2024/11/29 12:59:52.044818 [INFO] Starting...
2024/11/29 12:59:52.044857 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 12:59:52.044912 [INFO] reading event message file
2024/11/29 12:59:52.045348 [INFO] Engine received EB command userdata-exec

2024/11/29 12:59:52.052484 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 12:59:52.627896 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 12:59:53.272331 [INFO] This is a workflow controlled instance.
2024/11/29 12:59:53.272429 [INFO] Engine command: (env-launch)

2024/11/29 12:59:53.272705 [INFO] Executing instruction: SyncClock
2024/11/29 12:59:53.272710 [INFO] Starting SyncClock
2024/11/29 12:59:53.272717 [INFO] Running command: /usr/bin/chronyc tracking
2024/11/29 12:59:53.286447 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Fri Nov 29 12:59:51 2024
System time     : 0.000073418 seconds fast of NTP time
Last offset     : -0.074315801 seconds
RMS offset      : 0.074315801 seconds
Frequency       : 5.213 ppm fast
Residual freq   : +172.892 ppm
Skew            : 0.859 ppm
Root delay      : 0.001757746 seconds
Root dispersion : 0.000667777 seconds
Update interval : 0.0 seconds
Leap status     : Normal

2024/11/29 12:59:53.286462 [INFO] Running command: /usr/bin/chronyc -a makestep
2024/11/29 12:59:53.290862 [INFO] 200 OK

2024/11/29 12:59:53.291497 [INFO] Skipping Configure OS
2024/11/29 12:59:53.291505 [INFO] Skipping LockRepo
2024/11/29 12:59:53.291509 [INFO] Skipping GenerateEBBanner
2024/11/29 12:59:53.291513 [INFO] Skipping Install Process Manager
2024/11/29 12:59:53.291517 [INFO] Skipping install syslog
2024/11/29 12:59:53.291520 [INFO] Skipping install cron
2024/11/29 12:59:53.291524 [INFO] Skipping install proxy
2024/11/29 12:59:53.291528 [INFO] Skipping installhealthd
2024/11/29 12:59:53.291532 [INFO] Skipping Install Log Streaming Manager
2024/11/29 12:59:53.291536 [INFO] Skipping install X-Ray
2024/11/29 12:59:53.291540 [INFO] Skipping install Third Party License
2024/11/29 12:59:53.291544 [INFO] Skipping install httpd
2024/11/29 12:59:53.291549 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:53.291553 [INFO] Executing instruction: installSqsd
2024/11/29 12:59:53.291556 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2024/11/29 12:59:53.291560 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:53.291562 [INFO] Executing instruction: bootstraphealthd
2024/11/29 12:59:53.291565 [INFO] this is an enhanced health env ...
2024/11/29 12:59:53.291573 [INFO] bootstrap healthd....
2024/11/29 12:59:53.291589 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/11/29 12:59:53.469742 [INFO] /usr/bin/id: ‘healthd’: no such user

2024/11/29 12:59:53.470487 [INFO] bootstrap healthd....
2024/11/29 12:59:53.470501 [INFO] Running command: /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/11/29 12:59:53.483290 [INFO] 1001

2024/11/29 12:59:53.483475 [INFO] configure bundle log for healthd...
2024/11/29 12:59:53.483513 [INFO] Executing instruction: GetSetupProxyLog
2024/11/29 12:59:53.483560 [INFO] Skipping Install yum packages
2024/11/29 12:59:53.483565 [INFO] Skipping Install Python Bundle
2024/11/29 12:59:53.483569 [INFO] Skipping Configure Python site-packages
2024/11/29 12:59:53.483574 [INFO] Skipping Install Python Modules
2024/11/29 12:59:53.483578 [INFO] Skipping MarkBaked
2024/11/29 12:59:53.483582 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:53.483585 [INFO] Executing instruction: TuneSystemSettings
2024/11/29 12:59:53.483588 [INFO] Starting TuneSystemSettings
2024/11/29 12:59:53.483591 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:53.485686 [INFO] Executing instruction: GetSetupLogRotate
2024/11/29 12:59:53.485691 [INFO] Initialize LogRotate files and directories
2024/11/29 12:59:53.495331 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:53.495337 [INFO] Executing instruction: BootstrapCFNHup
2024/11/29 12:59:53.495340 [INFO] Bootstrap cfn-hup
2024/11/29 12:59:53.496358 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2024/11/29 12:59:53.496943 [INFO] Executing instruction: StartCFNHup
2024/11/29 12:59:53.496947 [INFO] Start cfn-hup
2024/11/29 12:59:53.496958 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2024/11/29 12:59:53.518400 [INFO] cfn-hup is not registered with EB yet, registering it now
2024/11/29 12:59:53.518419 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2024/11/29 12:59:53.541935 [INFO] Running command: systemctl daemon-reload
2024/11/29 12:59:53.999638 [INFO] Running command: systemctl reset-failed
2024/11/29 12:59:54.023971 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/29 12:59:54.031316 [INFO] Running command: systemctl enable aws-eb.target
2024/11/29 12:59:54.484677 [INFO] Running command: systemctl start aws-eb.target
2024/11/29 12:59:54.505000 [INFO] Running command: systemctl enable cfn-hup.service
2024/11/29 12:59:54.954834 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2024/11/29 12:59:54.954876 [INFO] Running command: systemctl is-active cfn-hup.service
2024/11/29 12:59:54.973690 [INFO] cfn-hup process is not running, starting it now
2024/11/29 12:59:54.973707 [INFO] Running command: systemctl show -p PartOf cfn-hup.service
2024/11/29 12:59:54.992546 [INFO] Running command: systemctl is-active cfn-hup.service
2024/11/29 12:59:55.003715 [INFO] Running command: systemctl start cfn-hup.service
2024/11/29 12:59:55.098039 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:55.098052 [INFO] Executing instruction: SetupPublishLogCronjob
2024/11/29 12:59:55.098055 [INFO] Setup publish logs cron job...
2024/11/29 12:59:55.098059 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2024/11/29 12:59:55.098842 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:55.098850 [INFO] Executing instruction: MarkBootstrapped
2024/11/29 12:59:55.098853 [INFO] Starting MarkBootstrapped
2024/11/29 12:59:55.098857 [INFO] Instance has NOT been bootstrapped
2024/11/29 12:59:55.098907 [INFO] Marked instance as Bootstrapped
2024/11/29 12:59:55.098910 [INFO] Executing instruction: Save CFN Stack Info
2024/11/29 12:59:55.098942 [INFO] Executing cleanup logic
2024/11/29 12:59:55.098950 [INFO] Platform Engine finished execution on command: env-launch

2024/11/29 13:02:24.470098 [INFO] Starting...
2024/11/29 13:02:24.470133 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 13:02:24.470150 [INFO] reading event message file
2024/11/29 13:02:24.470265 [INFO] Engine received EB command cfn-hup-exec

2024/11/29 13:02:24.563086 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 13:02:24.857705 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 13:02:25.147468 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/29 13:02:25.147480 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/29 13:02:25.147484 [INFO] Engine command: (app-deploy)

2024/11/29 13:02:25.147488 [INFO] Downloading EB Application...
2024/11/29 13:02:25.147491 [INFO] Region: us-east-1
2024/11/29 13:02:25.147493 [INFO] envID: e-phgumpyagn
2024/11/29 13:02:25.147499 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/29 13:02:25.147502 [INFO] Using manifest file name from command request
2024/11/29 13:02:25.147507 [INFO] Unable to get version manifest file.
2024/11/29 13:02:25.147509 [INFO] Downloading latest manifest available.
2024/11/29 13:02:25.147511 [INFO] Download latest app version manifest
2024/11/29 13:02:25.147594 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/29 13:02:25.205406 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732885138568

2024/11/29 13:02:25.205587 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732885138568
2024/11/29 13:02:25.222435 [INFO] Download successful148bytes downloaded
2024/11/29 13:02:25.222523 [INFO] Trying to read and parse version manifest...
2024/11/29 13:02:25.222616 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-0b7e-241129_075841471266
2024/11/29 13:02:26.174021 [INFO] Download successful47522491bytes downloaded
2024/11/29 13:02:26.174355 [INFO] Executing instruction: ElectLeader
2024/11/29 13:02:26.174362 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/29 13:02:26.174365 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/29 13:02:26.174375 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 818eaae5-cb3c-46bb-8fc2-c2ec8d10dec4 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/29 13:02:26.426123 [INFO] Instance is Leader.
2024/11/29 13:02:26.426170 [INFO] Executing instruction: stopSqsd
2024/11/29 13:02:26.426175 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/29 13:02:26.426178 [INFO] Executing instruction: PreBuildEbExtension
2024/11/29 13:02:26.426181 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/29 13:02:26.426191 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/29 13:02:26.727924 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/29 13:02:26.727941 [INFO] Executing instruction: StageApplication
2024/11/29 13:02:26.727945 [INFO] Recreating /var/app/staging/
2024/11/29 13:02:26.729173 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/29 13:02:26.729185 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/29 13:02:28.384013 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/29 13:02:28.440196 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/29 13:02:28.440258 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/29 13:02:28.440272 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/29 13:02:28.440274 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/29 13:02:28.440279 [INFO] Executing instruction: InstallDependency
2024/11/29 13:02:28.440283 [INFO] checking dependencies file
2024/11/29 13:02:28.440297 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/29 13:02:28.440306 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/29 13:02:52.354827 [INFO] Collecting Flask==3.0.0
  Downloading flask-3.0.0-py3-none-any.whl (99 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 99.7/99.7 kB 5.2 MB/s eta 0:00:00
Collecting Flask-CORS==4.0.0
  Downloading Flask_Cors-4.0.0-py2.py3-none-any.whl (14 kB)
Collecting anthropic>=0.8.1
  Downloading anthropic-0.40.0-py3-none-any.whl (199 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 199.5/199.5 kB 22.7 MB/s eta 0:00:00
Collecting python-dotenv==1.0.0
  Downloading python_dotenv-1.0.0-py3-none-any.whl (19 kB)
Collecting tenacity==8.2.3
  Downloading tenacity-8.2.3-py3-none-any.whl (24 kB)
Collecting beautifulsoup4==4.12.2
  Downloading beautifulsoup4-4.12.2-py3-none-any.whl (142 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 143.0/143.0 kB 16.6 MB/s eta 0:00:00
Collecting markdown==3.5.1
  Downloading Markdown-3.5.1-py3-none-any.whl (102 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 102.2/102.2 kB 21.1 MB/s eta 0:00:00
Collecting PyMuPDF==1.23.8
  Downloading PyMuPDF-1.23.8-cp311-none-manylinux2014_x86_64.whl (4.4 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.4/4.4 MB 79.0 MB/s eta 0:00:00
Collecting python-docx==1.0.1
  Downloading python_docx-1.0.1-py3-none-any.whl (237 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 237.4/237.4 kB 34.3 MB/s eta 0:00:00
Collecting chardet==5.2.0
  Downloading chardet-5.2.0-py3-none-any.whl (199 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 199.4/199.4 kB 30.3 MB/s eta 0:00:00
Collecting reportlab==4.0.8
  Downloading reportlab-4.0.8-py3-none-any.whl (1.9 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.9/1.9 MB 91.7 MB/s eta 0:00:00
Collecting langchain==0.0.300
  Downloading langchain-0.0.300-py3-none-any.whl (1.7 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 72.1 MB/s eta 0:00:00
Collecting python-multipart==0.0.6
  Downloading python_multipart-0.0.6-py3-none-any.whl (45 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 45.7/45.7 kB 9.6 MB/s eta 0:00:00
Collecting PyPDF2==3.0.1
  Downloading pypdf2-3.0.1-py3-none-any.whl (232 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 232.6/232.6 kB 34.2 MB/s eta 0:00:00
Collecting gunicorn==21.2.0
  Downloading gunicorn-21.2.0-py3-none-any.whl (80 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 80.2/80.2 kB 18.4 MB/s eta 0:00:00
Collecting Werkzeug>=3.0.0
  Downloading werkzeug-3.1.3-py3-none-any.whl (224 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 224.5/224.5 kB 33.8 MB/s eta 0:00:00
Collecting Jinja2>=3.1.2
  Downloading jinja2-3.1.4-py3-none-any.whl (133 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.3/133.3 kB 22.9 MB/s eta 0:00:00
Collecting itsdangerous>=2.1.2
  Downloading itsdangerous-2.2.0-py3-none-any.whl (16 kB)
Collecting click>=8.1.3
  Downloading click-8.1.7-py3-none-any.whl (97 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 97.9/97.9 kB 18.0 MB/s eta 0:00:00
Collecting blinker>=1.6.2
  Downloading blinker-1.9.0-py3-none-any.whl (8.5 kB)
Collecting soupsieve>1.2
  Downloading soupsieve-2.6-py3-none-any.whl (36 kB)
Collecting PyMuPDFb==1.23.7
  Downloading PyMuPDFb-1.23.7-py3-none-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (30.6 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 30.6/30.6 MB 44.3 MB/s eta 0:00:00
Collecting lxml>=3.1.0
  Downloading lxml-5.3.0-cp311-cp311-manylinux_2_28_x86_64.whl (5.0 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.0/5.0 MB 78.7 MB/s eta 0:00:00
Collecting typing-extensions
  Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)
Collecting pillow>=9.0.0
  Downloading pillow-11.0.0-cp311-cp311-manylinux_2_28_x86_64.whl (4.4 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.4/4.4 MB 57.1 MB/s eta 0:00:00
Collecting PyYAML>=5.3
  Downloading PyYAML-6.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (762 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 763.0/763.0 kB 117.9 MB/s eta 0:00:00
Collecting SQLAlchemy<3,>=1.4
  Downloading SQLAlchemy-2.0.36-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.2 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.2/3.2 MB 84.1 MB/s eta 0:00:00
Collecting aiohttp<4.0.0,>=3.8.3
  Downloading aiohttp-3.11.8-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.7 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 48.9 MB/s eta 0:00:00
Collecting anyio<4.0
  Downloading anyio-3.7.1-py3-none-any.whl (80 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 80.9/80.9 kB 19.6 MB/s eta 0:00:00
Collecting dataclasses-json<0.7,>=0.5.7
  Downloading dataclasses_json-0.6.7-py3-none-any.whl (28 kB)
Collecting jsonpatch<2.0,>=1.33
  Downloading jsonpatch-1.33-py2.py3-none-any.whl (12 kB)
Collecting langsmith<0.1.0,>=0.0.38
  Downloading langsmith-0.0.92-py3-none-any.whl (56 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 56.5/56.5 kB 19.1 MB/s eta 0:00:00
Collecting numexpr<3.0.0,>=2.8.4
  Downloading numexpr-2.10.2-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (398 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 398.9/398.9 kB 40.3 MB/s eta 0:00:00
Collecting numpy<2,>=1
  Downloading numpy-1.26.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (18.3 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 18.3/18.3 MB 87.7 MB/s eta 0:00:00
Collecting pydantic<3,>=1
  Downloading pydantic-2.10.2-py3-none-any.whl (456 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 456.4/456.4 kB 67.6 MB/s eta 0:00:00
Collecting requests<3,>=2
  Downloading requests-2.32.3-py3-none-any.whl (64 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 64.9/64.9 kB 19.1 MB/s eta 0:00:00
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Collecting distro<2,>=1.7.0
  Downloading distro-1.9.0-py3-none-any.whl (20 kB)
Collecting httpx<1,>=0.23.0
  Downloading httpx-0.28.0-py3-none-any.whl (73 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 73.6/73.6 kB 21.1 MB/s eta 0:00:00
Collecting jiter<1,>=0.4.0
  Downloading jiter-0.8.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (343 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.3/343.3 kB 45.3 MB/s eta 0:00:00
Collecting sniffio
  Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
Collecting aiohappyeyeballs>=2.3.0
  Downloading aiohappyeyeballs-2.4.3-py3-none-any.whl (14 kB)
Collecting aiosignal>=1.1.2
  Downloading aiosignal-1.3.1-py3-none-any.whl (7.6 kB)
Collecting attrs>=17.3.0
  Downloading attrs-24.2.0-py3-none-any.whl (63 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 63.0/63.0 kB 24.3 MB/s eta 0:00:00
Collecting frozenlist>=1.1.1
  Downloading frozenlist-1.5.0-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (274 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 274.9/274.9 kB 59.9 MB/s eta 0:00:00
Collecting multidict<7.0,>=4.5
  Downloading multidict-6.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (129 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 129.0/129.0 kB 39.2 MB/s eta 0:00:00
Collecting propcache>=0.2.0
  Downloading propcache-0.2.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (236 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 236.0/236.0 kB 28.3 MB/s eta 0:00:00
Collecting yarl<2.0,>=1.17.0
  Downloading yarl-1.18.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (343 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 343.9/343.9 kB 60.9 MB/s eta 0:00:00
Collecting idna>=2.8
  Downloading idna-3.10-py3-none-any.whl (70 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 70.4/70.4 kB 20.1 MB/s eta 0:00:00
Collecting marshmallow<4.0.0,>=3.18.0
  Downloading marshmallow-3.23.1-py3-none-any.whl (49 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 49.5/49.5 kB 11.6 MB/s eta 0:00:00
Collecting typing-inspect<1,>=0.4.0
  Downloading typing_inspect-0.9.0-py3-none-any.whl (8.8 kB)
Collecting certifi
  Downloading certifi-2024.8.30-py3-none-any.whl (167 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 167.3/167.3 kB 28.6 MB/s eta 0:00:00
Collecting httpcore==1.*
  Downloading httpcore-1.0.7-py3-none-any.whl (78 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.6/78.6 kB 17.7 MB/s eta 0:00:00
Collecting h11<0.15,>=0.13
  Downloading h11-0.14.0-py3-none-any.whl (58 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.3/58.3 kB 20.9 MB/s eta 0:00:00
Collecting MarkupSafe>=2.0
  Downloading MarkupSafe-3.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (23 kB)
Collecting jsonpointer>=1.9
  Downloading jsonpointer-3.0.0-py2.py3-none-any.whl (7.6 kB)
Collecting annotated-types>=0.6.0
  Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Collecting pydantic-core==2.27.1
  Downloading pydantic_core-2.27.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 47.7 MB/s eta 0:00:00
Collecting charset-normalizer<4,>=2
  Downloading charset_normalizer-3.4.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (142 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 142.6/142.6 kB 27.5 MB/s eta 0:00:00
Collecting urllib3<3,>=1.21.1
  Downloading urllib3-2.2.3-py3-none-any.whl (126 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 126.3/126.3 kB 29.4 MB/s eta 0:00:00
Collecting greenlet!=0.4.17
  Downloading greenlet-3.1.1-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (602 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 602.4/602.4 kB 94.7 MB/s eta 0:00:00
Collecting mypy-extensions>=0.3.0
  Downloading mypy_extensions-1.0.0-py3-none-any.whl (4.7 kB)
Installing collected packages: urllib3, typing-extensions, tenacity, soupsieve, sniffio, PyYAML, python-multipart, python-dotenv, PyPDF2, PyMuPDFb, propcache, pillow, numpy, mypy-extensions, multidict, marshmallow, MarkupSafe, markdown, lxml, jsonpointer, jiter, itsdangerous, idna, h11, gunicorn, greenlet, frozenlist, distro, click, charset-normalizer, chardet, certifi, blinker, attrs, annotated-types, aiohappyeyeballs, yarl, Werkzeug, typing-inspect, SQLAlchemy, requests, reportlab, python-docx, PyMuPDF, pydantic-core, numexpr, jsonpatch, Jinja2, httpcore, beautifulsoup4, anyio, aiosignal, pydantic, httpx, Flask, dataclasses-json, aiohttp, langsmith, Flask-CORS, anthropic, langchain
  Attempting uninstall: gunicorn
    Found existing installation: gunicorn 23.0.0
    Uninstalling gunicorn-23.0.0:
      Successfully uninstalled gunicorn-23.0.0
Successfully installed Flask-3.0.0 Flask-CORS-4.0.0 Jinja2-3.1.4 MarkupSafe-3.0.2 PyMuPDF-1.23.8 PyMuPDFb-1.23.7 PyPDF2-3.0.1 PyYAML-6.0.2 SQLAlchemy-2.0.36 Werkzeug-3.1.3 aiohappyeyeballs-2.4.3 aiohttp-3.11.8 aiosignal-1.3.1 annotated-types-0.7.0 anthropic-0.40.0 anyio-3.7.1 attrs-24.2.0 beautifulsoup4-4.12.2 blinker-1.9.0 certifi-2024.8.30 chardet-5.2.0 charset-normalizer-3.4.0 click-8.1.7 dataclasses-json-0.6.7 distro-1.9.0 frozenlist-1.5.0 greenlet-3.1.1 gunicorn-21.2.0 h11-0.14.0 httpcore-1.0.7 httpx-0.28.0 idna-3.10 itsdangerous-2.2.0 jiter-0.8.0 jsonpatch-1.33 jsonpointer-3.0.0 langchain-0.0.300 langsmith-0.0.92 lxml-5.3.0 markdown-3.5.1 marshmallow-3.23.1 multidict-6.1.0 mypy-extensions-1.0.0 numexpr-2.10.2 numpy-1.26.4 pillow-11.0.0 propcache-0.2.0 pydantic-2.10.2 pydantic-core-2.27.1 python-docx-1.0.1 python-dotenv-1.0.0 python-multipart-0.0.6 reportlab-4.0.8 requests-2.32.3 sniffio-1.3.1 soupsieve-2.6 tenacity-8.2.3 typing-extensions-4.12.2 typing-inspect-0.9.0 urllib3-2.2.3 yarl-1.18.0

2024/11/29 13:02:52.355964 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/29 13:02:52.355976 [INFO] Executing instruction: check Procfile
2024/11/29 13:02:52.356024 [INFO] detected Procfile in application source bundle ...
2024/11/29 13:02:52.356035 [INFO] Executing instruction: configure X-Ray
2024/11/29 13:02:52.356042 [INFO] X-Ray is not enabled.
2024/11/29 13:02:52.356045 [INFO] Executing instruction: configure proxy server
2024/11/29 13:02:52.356064 [INFO] Recreating /var/proxy/staging/nginx
2024/11/29 13:02:52.369915 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/29 13:02:52.372405 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 13:02:52.411072 [INFO] Running command: systemctl daemon-reload
2024/11/29 13:02:52.674259 [INFO] Running command: systemctl reset-failed
2024/11/29 13:02:52.682302 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/29 13:02:52.689770 [INFO] Running command: systemctl enable aws-eb.target
2024/11/29 13:02:52.943646 [INFO] Running command: systemctl start aws-eb.target
2024/11/29 13:02:52.953012 [INFO] Running command: systemctl enable healthd.service
2024/11/29 13:02:53.206561 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/29 13:02:53.206583 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 13:02:53.234588 [INFO] Running command: systemctl is-active healthd.service
2024/11/29 13:02:53.248257 [INFO] Running command: systemctl start healthd.service
2024/11/29 13:02:53.326419 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/29 13:02:53.327902 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/29 13:02:53.329042 [INFO] Executing instruction: configure log streaming
2024/11/29 13:02:53.329050 [INFO] log streaming is not enabled
2024/11/29 13:02:53.329053 [INFO] disable log stream
2024/11/29 13:02:53.329063 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/29 13:02:53.343574 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/29 13:02:53.357307 [INFO] Executing instruction: GetToggleForceRotate
2024/11/29 13:02:53.357318 [INFO] Checking if logs need forced rotation
2024/11/29 13:02:53.357330 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 13:02:53.812565 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 13:02:54.261702 [INFO] Generating rsyslog config from Procfile
2024/11/29 13:02:54.265104 [INFO] Running command: systemctl restart rsyslog.service
2024/11/29 13:02:54.865152 [INFO] Executing instruction: PostBuildEbExtension
2024/11/29 13:02:54.865173 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/29 13:02:54.865183 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/29 13:02:55.185967 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/29 13:02:55.185998 [INFO] Executing instruction: CleanEbExtensions
2024/11/29 13:02:55.186084 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/29 13:02:55.186088 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/29 13:02:55.186101 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/29 13:02:55.186112 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/29 13:02:55.186115 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/29 13:02:55.186119 [INFO] Executing instruction: stop X-Ray
2024/11/29 13:02:55.186122 [INFO] stop X-Ray ...
2024/11/29 13:02:55.186130 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/29 13:02:55.199674 [WARN] stopProcess Warning: process xray is not registered 
2024/11/29 13:02:55.199693 [INFO] Running command: systemctl stop xray.service
2024/11/29 13:02:55.212836 [INFO] Executing instruction: stop proxy
2024/11/29 13:02:55.212853 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/29 13:02:55.226557 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/29 13:02:55.226572 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 13:02:55.240787 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/11/29 13:02:55.240800 [INFO] Executing instruction: FlipApplication
2024/11/29 13:02:55.240804 [INFO] Fetching environment variables...
2024/11/29 13:02:55.240906 [INFO] Purge old process...
2024/11/29 13:02:55.240919 [INFO] Removing /var/app/current/ if it exists
2024/11/29 13:02:55.240926 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/29 13:02:55.240940 [INFO] Register application processes...
2024/11/29 13:02:55.240943 [INFO] Registering the proc: web

2024/11/29 13:02:55.240949 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/29 13:02:55.252340 [INFO] Running command: systemctl daemon-reload
2024/11/29 13:02:55.513612 [INFO] Running command: systemctl reset-failed
2024/11/29 13:02:55.522912 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/29 13:02:55.530326 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2024/11/29 13:02:55.531845 [INFO] Running command: systemctl enable eb-app.target
2024/11/29 13:02:55.788617 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2024/11/29 13:02:55.788638 [INFO] Running command: systemctl start eb-app.target
2024/11/29 13:02:55.797815 [INFO] Running command: systemctl enable web.service
2024/11/29 13:02:56.053831 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/29 13:02:56.053850 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/29 13:02:56.064033 [INFO] Running command: systemctl is-active web.service
2024/11/29 13:02:56.071246 [INFO] Running command: systemctl start web.service
2024/11/29 13:02:56.113503 [INFO] Executing instruction: start X-Ray
2024/11/29 13:02:56.113516 [INFO] X-Ray is not enabled.
2024/11/29 13:02:56.113520 [INFO] Executing instruction: start proxy with new configuration
2024/11/29 13:02:56.113535 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/29 13:02:56.166499 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/29 13:02:56.166594 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/29 13:02:56.173239 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 13:02:56.190464 [INFO] Running command: systemctl daemon-reload
2024/11/29 13:02:56.628136 [INFO] Running command: systemctl reset-failed
2024/11/29 13:02:56.638982 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 13:02:56.659614 [INFO] Running command: systemctl is-active nginx.service
2024/11/29 13:02:56.675685 [INFO] Running command: systemctl start nginx.service
2024/11/29 13:02:56.848481 [INFO] Executing instruction: configureSqsd
2024/11/29 13:02:56.848494 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/29 13:02:56.848497 [INFO] Executing instruction: startSqsd
2024/11/29 13:02:56.848500 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/29 13:02:56.848503 [INFO] Executing instruction: Track pids in healthd
2024/11/29 13:02:56.848507 [INFO] This is an enhanced health env...
2024/11/29 13:02:56.848515 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/29 13:02:56.868565 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/29 13:02:56.868587 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/29 13:02:56.885013 [INFO] web.service

2024/11/29 13:02:56.885181 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/29 13:02:56.885216 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/29 13:02:56.885231 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/29 13:02:56.885234 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/29 13:02:56.885238 [INFO] Executing cleanup logic
2024/11/29 13:02:56.885327 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732885372356,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732885376885,"severity":"INFO"}]}]}

2024/11/29 13:02:56.885930 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/29 16:47:04.980505 [INFO] Starting...
2024/11/29 16:47:04.980542 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 16:47:04.980562 [INFO] reading event message file
2024/11/29 16:47:04.980687 [INFO] Engine received EB command cfn-hup-exec

2024/11/29 16:47:05.116227 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 16:47:05.405657 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 16:47:05.692679 [INFO] checking whether command bundle-log is applicable to this instance...
2024/11/29 16:47:05.692691 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/29 16:47:05.692694 [INFO] Engine command: (bundle-log)

2024/11/29 16:47:05.692731 [INFO] Executing instruction: GetBundleLogs
2024/11/29 16:47:05.692734 [INFO] Bundle Logs...
2024/11/29 16:47:05.793528 [INFO] Executing cleanup logic
2024/11/29 16:47:05.793640 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732898825793,"severity":"INFO"}]}]}

2024/11/29 16:47:05.793753 [INFO] Platform Engine finished execution on command: bundle-log

2024/11/29 16:47:47.943639 [INFO] Starting...
2024/11/29 16:47:47.943673 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 16:47:47.943690 [INFO] reading event message file
2024/11/29 16:47:47.943803 [INFO] Engine received EB command cfn-hup-exec

2024/11/29 16:47:48.011878 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 16:47:48.310618 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 16:47:48.602993 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/29 16:47:48.603014 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/29 16:47:48.603017 [INFO] Engine command: (tail-log)

2024/11/29 16:47:48.603053 [INFO] Executing instruction: GetTailLogs
2024/11/29 16:47:48.603056 [INFO] Tail Logs...
2024/11/29 16:47:48.603252 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/29 16:47:48.605244 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/29 16:47:48.607484 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/29 16:47:48.609335 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/29 16:47:48.610948 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/29 16:47:48.684613 [INFO] Executing cleanup logic
2024/11/29 16:47:48.684693 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732898868684,"severity":"INFO"}]}]}

2024/11/29 16:47:48.684777 [INFO] Platform Engine finished execution on command: tail-log

2024/11/29 20:27:41.593606 [INFO] Starting...
2024/11/29 20:27:41.593642 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 20:27:41.593660 [INFO] reading event message file
2024/11/29 20:27:41.593783 [INFO] Engine received EB command cfn-hup-exec

2024/11/29 20:27:41.659554 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 20:27:41.966508 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 20:27:42.262687 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/29 20:27:42.262698 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/29 20:27:42.262701 [INFO] Engine command: (tail-log)

2024/11/29 20:27:42.262738 [INFO] Executing instruction: GetTailLogs
2024/11/29 20:27:42.262741 [INFO] Tail Logs...
2024/11/29 20:27:42.263877 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/29 20:27:42.265989 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/29 20:27:42.267437 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/29 20:27:42.268768 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/29 20:27:42.271267 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/29 20:27:42.338858 [INFO] Executing cleanup logic
2024/11/29 20:27:42.338934 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732912062338,"severity":"INFO"}]}]}

2024/11/29 20:27:42.339056 [INFO] Platform Engine finished execution on command: tail-log

2024/11/29 20:42:16.688307 [INFO] Starting...
2024/11/29 20:42:16.688342 [INFO] Starting EBPlatform-PlatformEngine
2024/11/29 20:42:16.688365 [INFO] reading event message file
2024/11/29 20:42:16.688481 [INFO] Engine received EB command cfn-hup-exec

2024/11/29 20:42:16.762844 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 20:42:17.067047 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 20:42:17.354627 [INFO] checking whether command config-deploy is applicable to this instance...
2024/11/29 20:42:17.354638 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/29 20:42:17.354641 [INFO] Engine command: (config-deploy)

2024/11/29 20:42:17.354646 [INFO] Using manifest file name from command request
2024/11/29 20:42:17.354662 [INFO] Unable to get version manifest file.
2024/11/29 20:42:17.354665 [INFO] Downloading latest manifest available.
2024/11/29 20:42:17.354667 [INFO] Download latest app version manifest
2024/11/29 20:42:17.354740 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/29 20:42:17.395872 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732912915341

2024/11/29 20:42:17.396024 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732912915341
2024/11/29 20:42:17.410950 [INFO] Download successful148bytes downloaded
2024/11/29 20:42:17.411074 [INFO] Trying to read and parse version manifest...
2024/11/29 20:42:17.411216 [INFO] Executing instruction: stopSqsd
2024/11/29 20:42:17.411219 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/29 20:42:17.411222 [INFO] Executing instruction: StageApplication
2024/11/29 20:42:17.411225 [INFO] Recreating /var/app/staging/
2024/11/29 20:42:17.412693 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/29 20:42:17.412705 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/29 20:42:19.068059 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/29 20:42:19.129217 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2024/11/29 20:42:19.129252 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2024/11/29 20:42:19.129279 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2024/11/29 20:42:19.129282 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2024/11/29 20:42:19.129286 [INFO] Executing instruction: InstallDependency
2024/11/29 20:42:19.129291 [INFO] checking dependencies file
2024/11/29 20:42:19.129301 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/29 20:42:19.129310 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/29 20:42:22.079172 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/29 20:42:22.079228 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/29 20:42:22.079234 [INFO] Executing instruction: check Procfile
2024/11/29 20:42:22.079279 [INFO] detected Procfile in application source bundle ...
2024/11/29 20:42:22.079286 [INFO] Executing instruction: configure X-Ray
2024/11/29 20:42:22.079290 [INFO] X-Ray is not enabled.
2024/11/29 20:42:22.079295 [INFO] Executing instruction: configure proxy server
2024/11/29 20:42:22.079313 [INFO] Recreating /var/proxy/staging/nginx
2024/11/29 20:42:22.093607 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/29 20:42:22.096078 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 20:42:22.132095 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/29 20:42:22.132111 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 20:42:22.141942 [INFO] Running command: systemctl is-active healthd.service
2024/11/29 20:42:22.149192 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 20:42:22.162429 [INFO] Running command: systemctl stop healthd.service
2024/11/29 20:42:22.214716 [INFO] Running command: systemctl disable healthd.service
2024/11/29 20:42:22.519583 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/29 20:42:22.519692 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:22.819449 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:22.830799 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:23.088208 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:23.095828 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/29 20:42:23.103440 [INFO] Running command: systemctl enable aws-eb.target
2024/11/29 20:42:23.358416 [INFO] Running command: systemctl start aws-eb.target
2024/11/29 20:42:23.366139 [INFO] Running command: systemctl enable healthd.service
2024/11/29 20:42:23.632937 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/29 20:42:23.632959 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/29 20:42:23.641951 [INFO] Running command: systemctl is-active healthd.service
2024/11/29 20:42:23.650233 [INFO] Running command: systemctl start healthd.service
2024/11/29 20:42:23.716145 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/29 20:42:23.717744 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/29 20:42:23.719012 [INFO] Executing instruction: GetSetupProxyLog
2024/11/29 20:42:23.719147 [INFO] Executing instruction: configure log streaming
2024/11/29 20:42:23.719152 [INFO] log streaming is not enabled
2024/11/29 20:42:23.719155 [INFO] disable log stream
2024/11/29 20:42:23.719163 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/29 20:42:23.740065 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/29 20:42:23.756770 [INFO] Executing instruction: GetToggleForceRotate
2024/11/29 20:42:23.756782 [INFO] Checking if logs need forced rotation
2024/11/29 20:42:23.756795 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/29 20:42:24.312666 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/29 20:42:24.722567 [INFO] Generating rsyslog config from Procfile
2024/11/29 20:42:24.724325 [INFO] Running command: systemctl restart rsyslog.service
2024/11/29 20:42:24.838849 [INFO] Executing instruction: CleanEbExtensions
2024/11/29 20:42:24.838963 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/29 20:42:24.838970 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2024/11/29 20:42:24.838981 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2024/11/29 20:42:24.838993 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2024/11/29 20:42:24.839000 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2024/11/29 20:42:24.839005 [INFO] Executing instruction: stop X-Ray
2024/11/29 20:42:24.839007 [INFO] stop X-Ray ...
2024/11/29 20:42:24.839016 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/29 20:42:24.857511 [WARN] stopProcess Warning: process xray is not registered 
2024/11/29 20:42:24.857526 [INFO] Running command: systemctl stop xray.service
2024/11/29 20:42:24.874478 [INFO] Executing instruction: stop proxy
2024/11/29 20:42:24.874494 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/29 20:42:24.887849 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/29 20:42:24.887863 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 20:42:24.897140 [INFO] Running command: systemctl is-active nginx.service
2024/11/29 20:42:24.904800 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 20:42:24.913094 [INFO] Running command: systemctl stop nginx.service
2024/11/29 20:42:25.017079 [INFO] Running command: systemctl disable nginx.service
2024/11/29 20:42:25.280429 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:25.539692 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:25.548541 [INFO] Executing instruction: FlipApplication
2024/11/29 20:42:25.548555 [INFO] Fetching environment variables...
2024/11/29 20:42:25.548725 [INFO] Purge old process...
2024/11/29 20:42:25.548740 [INFO] Running command: systemctl stop eb-app.target
2024/11/29 20:42:25.564959 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/29 20:42:25.584557 [INFO] web.service

2024/11/29 20:42:25.584573 [INFO] deregistering process: web
2024/11/29 20:42:25.584581 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/29 20:42:25.602684 [INFO] Running command: systemctl is-active web.service
2024/11/29 20:42:25.614185 [INFO] Running command: systemctl disable web.service
2024/11/29 20:42:25.933236 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/29 20:42:25.933297 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:26.270782 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:26.280031 [INFO] Running command: systemctl is-active web.service
2024/11/29 20:42:26.287320 [INFO] Process web has been fully terminated
2024/11/29 20:42:26.287331 [INFO] All processes have been fully terminated
2024/11/29 20:42:26.287335 [INFO] Removing /var/app/current/ if it exists
2024/11/29 20:42:26.417836 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/29 20:42:26.417864 [INFO] Register application processes...
2024/11/29 20:42:26.417867 [INFO] Registering the proc: web

2024/11/29 20:42:26.417878 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/29 20:42:26.455628 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:26.718705 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:26.726655 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/29 20:42:26.733471 [INFO] Running command: systemctl enable eb-app.target
2024/11/29 20:42:26.982799 [INFO] Running command: systemctl start eb-app.target
2024/11/29 20:42:26.991681 [INFO] Running command: systemctl enable web.service
2024/11/29 20:42:27.247014 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/29 20:42:27.247034 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/29 20:42:27.258393 [INFO] Running command: systemctl is-active web.service
2024/11/29 20:42:27.265018 [INFO] Running command: systemctl start web.service
2024/11/29 20:42:27.320283 [INFO] Executing instruction: start X-Ray
2024/11/29 20:42:27.320296 [INFO] X-Ray is not enabled.
2024/11/29 20:42:27.320300 [INFO] Executing instruction: start proxy with new configuration
2024/11/29 20:42:27.320315 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/29 20:42:27.353098 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/29 20:42:27.353269 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/29 20:42:27.355407 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 20:42:27.381835 [INFO] Running command: systemctl daemon-reload
2024/11/29 20:42:27.837837 [INFO] Running command: systemctl reset-failed
2024/11/29 20:42:27.855633 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/29 20:42:27.878826 [INFO] Running command: systemctl is-active nginx.service
2024/11/29 20:42:27.896925 [INFO] Running command: systemctl start nginx.service
2024/11/29 20:42:28.074908 [INFO] Executing instruction: configureSqsd
2024/11/29 20:42:28.074922 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/29 20:42:28.074925 [INFO] Executing instruction: startSqsd
2024/11/29 20:42:28.074928 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/29 20:42:28.074931 [INFO] Executing instruction: Track pids in healthd
2024/11/29 20:42:28.074946 [INFO] This is an enhanced health env...
2024/11/29 20:42:28.074958 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/29 20:42:28.095145 [INFO] healthd.service nginx.service cfn-hup.service

2024/11/29 20:42:28.095165 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/29 20:42:28.114824 [INFO] web.service

2024/11/29 20:42:28.115031 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2024/11/29 20:42:28.115046 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2024/11/29 20:42:28.115058 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2024/11/29 20:42:28.115061 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2024/11/29 20:42:28.115065 [INFO] Executing cleanup logic
2024/11/29 20:42:28.115158 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732912942079,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732912948115,"severity":"INFO"}]}]}

2024/11/29 20:42:28.115361 [INFO] Platform Engine finished execution on command: config-deploy

2024/11/30 10:25:53.010187 [INFO] Starting...
2024/11/30 10:25:53.010221 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:25:53.010237 [INFO] reading event message file
2024/11/30 10:25:53.010346 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:25:53.080220 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:25:53.371971 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:25:53.651765 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 10:25:53.651777 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:25:53.651781 [INFO] Engine command: (app-deploy)

2024/11/30 10:25:53.651786 [INFO] Downloading EB Application...
2024/11/30 10:25:53.651788 [INFO] Region: us-east-1
2024/11/30 10:25:53.651791 [INFO] envID: e-phgumpyagn
2024/11/30 10:25:53.651793 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 10:25:53.651800 [INFO] Using manifest file name from command request
2024/11/30 10:25:53.651804 [INFO] Manifest name is : manifest_1732962350507
2024/11/30 10:25:53.651807 [INFO] Download app version manifest
2024/11/30 10:25:53.651906 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732962350507
2024/11/30 10:25:53.692678 [INFO] Download successful102bytes downloaded
2024/11/30 10:25:53.692831 [INFO] Trying to read and parse version manifest...
2024/11/30 10:25:53.694501 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-0b7e-241130_052448360215
2024/11/30 10:25:54.446648 [INFO] Download successful47523162bytes downloaded
2024/11/30 10:25:54.446863 [INFO] Executing instruction: ElectLeader
2024/11/30 10:25:54.446869 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 10:25:54.446872 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 10:25:54.446881 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id d474bf90-a577-4284-aba6-ac9c3a6b9923 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 10:25:54.747582 [INFO] Instance is Leader.
2024/11/30 10:25:54.747632 [INFO] Executing instruction: stopSqsd
2024/11/30 10:25:54.747637 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:25:54.747640 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 10:25:54.747643 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 10:25:54.747653 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 10:25:55.060442 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 10:25:55.060486 [INFO] Executing instruction: StageApplication
2024/11/30 10:25:55.060490 [INFO] Recreating /var/app/staging/
2024/11/30 10:25:55.145972 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:25:55.145993 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:25:56.825230 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:25:56.885365 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 10:25:56.885409 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 10:25:56.885425 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 10:25:56.885428 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 10:25:56.885432 [INFO] Executing instruction: InstallDependency
2024/11/30 10:25:56.885437 [INFO] checking dependencies file
2024/11/30 10:25:56.885448 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:25:56.885457 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:25:59.542035 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:25:59.542066 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:25:59.542072 [INFO] Executing instruction: check Procfile
2024/11/30 10:25:59.542114 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:25:59.542120 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:25:59.542124 [INFO] X-Ray is not enabled.
2024/11/30 10:25:59.542127 [INFO] Executing instruction: configure proxy server
2024/11/30 10:25:59.542140 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:25:59.554286 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:25:59.565436 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:25:59.568161 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:25:59.612652 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:25:59.612669 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:25:59.622621 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:25:59.634806 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:25:59.644999 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:25:59.705349 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:25:59.998939 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:25:59.999055 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:00.296923 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:00.308385 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:00.573519 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:00.581137 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:26:00.588226 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:26:00.851921 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:26:00.859580 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:26:01.120811 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:26:01.120830 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:26:01.131310 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:26:01.138264 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:26:01.204219 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:26:01.205637 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:26:01.206999 [INFO] Executing instruction: configure log streaming
2024/11/30 10:26:01.207007 [INFO] log streaming is not enabled
2024/11/30 10:26:01.207010 [INFO] disable log stream
2024/11/30 10:26:01.207018 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:26:01.222100 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:26:01.237487 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:26:01.237498 [INFO] Checking if logs need forced rotation
2024/11/30 10:26:01.237508 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:26:01.778235 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:26:02.245513 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:26:02.248375 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:26:02.611442 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 10:26:02.611466 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 10:26:02.611477 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 10:26:02.952146 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 10:26:02.952227 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:26:02.952353 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:26:02.952360 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 10:26:02.952373 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 10:26:02.952386 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 10:26:02.952392 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 10:26:02.952406 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:26:02.952409 [INFO] stop X-Ray ...
2024/11/30 10:26:02.952419 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:26:02.963493 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:26:02.963515 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:26:02.976850 [INFO] Executing instruction: stop proxy
2024/11/30 10:26:02.977090 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:26:02.987794 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:26:02.987815 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:26:02.998605 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:26:03.005493 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:26:03.013703 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:26:03.119366 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:26:03.387191 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:03.643482 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:03.650680 [INFO] Executing instruction: FlipApplication
2024/11/30 10:26:03.650689 [INFO] Fetching environment variables...
2024/11/30 10:26:03.650850 [INFO] Purge old process...
2024/11/30 10:26:03.650863 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:26:03.664901 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:26:03.679754 [INFO] web.service

2024/11/30 10:26:03.679766 [INFO] deregistering process: web
2024/11/30 10:26:03.679775 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:26:03.699131 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:26:03.714483 [INFO] Running command: systemctl disable web.service
2024/11/30 10:26:04.037745 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:26:04.037811 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:04.348836 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:04.358335 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:26:04.365194 [INFO] Process web has been fully terminated
2024/11/30 10:26:04.365205 [INFO] All processes have been fully terminated
2024/11/30 10:26:04.365209 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:26:04.498769 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:26:04.498797 [INFO] Register application processes...
2024/11/30 10:26:04.498802 [INFO] Registering the proc: web

2024/11/30 10:26:04.498812 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:26:04.547522 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:04.806074 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:04.815214 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:26:04.822030 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:26:05.074484 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:26:05.083369 [INFO] Running command: systemctl enable web.service
2024/11/30 10:26:05.342674 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:26:05.342694 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:26:05.353755 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:26:05.360165 [INFO] Running command: systemctl start web.service
2024/11/30 10:26:05.424585 [INFO] Executing instruction: start X-Ray
2024/11/30 10:26:05.424600 [INFO] X-Ray is not enabled.
2024/11/30 10:26:05.424603 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:26:05.424619 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:26:05.464698 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:26:05.464885 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:26:05.467970 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:26:05.493041 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:26:05.959417 [INFO] Running command: systemctl reset-failed
2024/11/30 10:26:05.973111 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:26:05.988938 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:26:06.007443 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:26:06.204622 [INFO] Executing instruction: configureSqsd
2024/11/30 10:26:06.204634 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:26:06.204638 [INFO] Executing instruction: startSqsd
2024/11/30 10:26:06.204641 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:26:06.204643 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:26:06.205116 [INFO] This is an enhanced health env...
2024/11/30 10:26:06.205126 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:26:06.224476 [INFO] cfn-hup.service nginx.service healthd.service

2024/11/30 10:26:06.224495 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:26:06.245611 [INFO] web.service

2024/11/30 10:26:06.246196 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 10:26:06.246229 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 10:26:06.246242 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 10:26:06.246244 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 10:26:06.246249 [INFO] Executing cleanup logic
2024/11/30 10:26:06.246343 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732962359542,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732962366246,"severity":"INFO"}]}]}

2024/11/30 10:26:06.246547 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 10:30:01.000064 [INFO] Starting...
2024/11/30 10:30:01.000101 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:30:01.000117 [INFO] reading event message file
2024/11/30 10:30:01.000235 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:30:01.073936 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:30:01.377205 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:30:01.682296 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 10:30:01.682307 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:30:01.682310 [INFO] Engine command: (tail-log)

2024/11/30 10:30:01.682357 [INFO] Executing instruction: GetTailLogs
2024/11/30 10:30:01.682360 [INFO] Tail Logs...
2024/11/30 10:30:01.683184 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 10:30:01.686936 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 10:30:01.688466 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 10:30:01.690277 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 10:30:01.691934 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 10:30:01.755935 [INFO] Executing cleanup logic
2024/11/30 10:30:01.756015 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732962601755,"severity":"INFO"}]}]}

2024/11/30 10:30:01.756090 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 10:33:29.580157 [INFO] Starting...
2024/11/30 10:33:29.580193 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:33:29.580209 [INFO] reading event message file
2024/11/30 10:33:29.580326 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:33:29.646554 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:33:29.963957 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:33:30.253994 [INFO] checking whether command config-deploy is applicable to this instance...
2024/11/30 10:33:30.254006 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:33:30.254009 [INFO] Engine command: (config-deploy)

2024/11/30 10:33:30.254024 [INFO] Using manifest file name from command request
2024/11/30 10:33:30.254029 [INFO] Unable to get version manifest file.
2024/11/30 10:33:30.254031 [INFO] Downloading latest manifest available.
2024/11/30 10:33:30.254034 [INFO] Download latest app version manifest
2024/11/30 10:33:30.254111 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 10:33:30.292224 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732962788687

2024/11/30 10:33:30.292502 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732962788687
2024/11/30 10:33:30.308139 [INFO] Download successful148bytes downloaded
2024/11/30 10:33:30.308259 [INFO] Trying to read and parse version manifest...
2024/11/30 10:33:30.308424 [INFO] Executing instruction: stopSqsd
2024/11/30 10:33:30.308429 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:33:30.308432 [INFO] Executing instruction: StageApplication
2024/11/30 10:33:30.308435 [INFO] Recreating /var/app/staging/
2024/11/30 10:33:30.308479 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:33:30.308486 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:33:31.977882 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:33:32.045357 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2024/11/30 10:33:32.045403 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2024/11/30 10:33:32.045415 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2024/11/30 10:33:32.045418 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2024/11/30 10:33:32.045422 [INFO] Executing instruction: InstallDependency
2024/11/30 10:33:32.045427 [INFO] checking dependencies file
2024/11/30 10:33:32.045439 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:33:32.045447 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:33:34.698288 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:33:34.698332 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:33:34.698338 [INFO] Executing instruction: check Procfile
2024/11/30 10:33:34.698380 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:33:34.698387 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:33:34.698392 [INFO] X-Ray is not enabled.
2024/11/30 10:33:34.698395 [INFO] Executing instruction: configure proxy server
2024/11/30 10:33:34.698409 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:33:34.703504 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:33:34.709324 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:33:34.710861 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:33:34.722898 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:33:34.722923 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:33:34.731368 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:33:34.737342 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:33:34.746489 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:33:34.815224 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:33:35.108939 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:33:35.109000 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:35.377283 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:35.386307 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:35.656338 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:35.665711 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:33:35.674636 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:33:35.942827 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:33:35.952503 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:33:36.209504 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:33:36.209523 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:33:36.220905 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:33:36.227313 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:33:36.290532 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:33:36.291153 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:33:36.291801 [INFO] Executing instruction: GetSetupProxyLog
2024/11/30 10:33:36.291919 [INFO] Executing instruction: configure log streaming
2024/11/30 10:33:36.291924 [INFO] log streaming is not enabled
2024/11/30 10:33:36.291926 [INFO] disable log stream
2024/11/30 10:33:36.291935 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:33:36.307855 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:33:36.335517 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:33:36.335530 [INFO] Checking if logs need forced rotation
2024/11/30 10:33:36.335542 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:33:36.922667 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:33:37.314470 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:33:37.317937 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:33:37.867326 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:33:37.867906 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:33:37.867913 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2024/11/30 10:33:37.867924 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2024/11/30 10:33:37.867937 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2024/11/30 10:33:37.867940 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2024/11/30 10:33:37.867944 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:33:37.867947 [INFO] stop X-Ray ...
2024/11/30 10:33:37.867956 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:33:37.888819 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:33:37.888837 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:33:37.905068 [INFO] Executing instruction: stop proxy
2024/11/30 10:33:37.905083 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:33:37.916796 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:33:37.916809 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:33:37.932089 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:33:37.945844 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:33:37.953011 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:33:38.037999 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:33:38.323035 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:38.623630 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:38.633369 [INFO] Executing instruction: FlipApplication
2024/11/30 10:33:38.633382 [INFO] Fetching environment variables...
2024/11/30 10:33:38.633962 [INFO] Purge old process...
2024/11/30 10:33:38.634006 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:33:38.654369 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:33:38.674580 [INFO] web.service

2024/11/30 10:33:38.674598 [INFO] deregistering process: web
2024/11/30 10:33:38.674606 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:33:38.696730 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:33:38.713316 [INFO] Running command: systemctl disable web.service
2024/11/30 10:33:39.040879 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:33:39.040945 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:39.318972 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:39.327313 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:33:39.334371 [INFO] Process web has been fully terminated
2024/11/30 10:33:39.334381 [INFO] All processes have been fully terminated
2024/11/30 10:33:39.334385 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:33:39.468483 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:33:39.468525 [INFO] Register application processes...
2024/11/30 10:33:39.468529 [INFO] Registering the proc: web

2024/11/30 10:33:39.468538 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:33:39.517677 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:39.776614 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:39.785167 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:33:39.791565 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:33:40.053046 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:33:40.063040 [INFO] Running command: systemctl enable web.service
2024/11/30 10:33:40.329897 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:33:40.329918 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:33:40.340027 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:33:40.346538 [INFO] Running command: systemctl start web.service
2024/11/30 10:33:40.402759 [INFO] Executing instruction: start X-Ray
2024/11/30 10:33:40.402774 [INFO] X-Ray is not enabled.
2024/11/30 10:33:40.402778 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:33:40.402794 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:33:40.429707 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:33:40.429887 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:33:40.442502 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:33:40.462001 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:33:40.903832 [INFO] Running command: systemctl reset-failed
2024/11/30 10:33:40.923285 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:33:40.939070 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:33:40.957381 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:33:41.146205 [INFO] Executing instruction: configureSqsd
2024/11/30 10:33:41.146219 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:33:41.146222 [INFO] Executing instruction: startSqsd
2024/11/30 10:33:41.146224 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:33:41.146230 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:33:41.146233 [INFO] This is an enhanced health env...
2024/11/30 10:33:41.146241 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:33:41.164449 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 10:33:41.164468 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:33:41.186078 [INFO] web.service

2024/11/30 10:33:41.186265 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2024/11/30 10:33:41.186279 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2024/11/30 10:33:41.186291 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2024/11/30 10:33:41.186294 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2024/11/30 10:33:41.186299 [INFO] Executing cleanup logic
2024/11/30 10:33:41.186394 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732962814698,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732962821186,"severity":"INFO"}]}]}

2024/11/30 10:33:41.186601 [INFO] Platform Engine finished execution on command: config-deploy

2024/11/30 10:34:52.529836 [INFO] Starting...
2024/11/30 10:34:52.529871 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:34:52.529887 [INFO] reading event message file
2024/11/30 10:34:52.529999 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:34:52.599953 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:34:52.909797 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:34:53.204592 [INFO] checking whether command config-deploy is applicable to this instance...
2024/11/30 10:34:53.204604 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:34:53.204607 [INFO] Engine command: (config-deploy)

2024/11/30 10:34:53.204611 [INFO] Using manifest file name from command request
2024/11/30 10:34:53.204617 [INFO] Unable to get version manifest file.
2024/11/30 10:34:53.204620 [INFO] Downloading latest manifest available.
2024/11/30 10:34:53.204622 [INFO] Download latest app version manifest
2024/11/30 10:34:53.204698 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 10:34:53.243901 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732962871575

2024/11/30 10:34:53.244034 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732962871575
2024/11/30 10:34:53.258798 [INFO] Download successful148bytes downloaded
2024/11/30 10:34:53.258948 [INFO] Trying to read and parse version manifest...
2024/11/30 10:34:53.259083 [INFO] Executing instruction: stopSqsd
2024/11/30 10:34:53.259087 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:34:53.259090 [INFO] Executing instruction: StageApplication
2024/11/30 10:34:53.259093 [INFO] Recreating /var/app/staging/
2024/11/30 10:34:53.259136 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:34:53.259143 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:34:54.918346 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:34:54.978853 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2024/11/30 10:34:54.978888 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2024/11/30 10:34:54.978902 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2024/11/30 10:34:54.978905 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2024/11/30 10:34:54.978909 [INFO] Executing instruction: InstallDependency
2024/11/30 10:34:54.978950 [INFO] checking dependencies file
2024/11/30 10:34:54.978963 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:34:54.978972 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:34:57.625282 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:34:57.625311 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:34:57.625316 [INFO] Executing instruction: check Procfile
2024/11/30 10:34:57.625359 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:34:57.625367 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:34:57.625371 [INFO] X-Ray is not enabled.
2024/11/30 10:34:57.625374 [INFO] Executing instruction: configure proxy server
2024/11/30 10:34:57.625388 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:34:57.633902 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:34:57.644568 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:34:57.647258 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:34:57.657684 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:34:57.657697 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:34:57.665320 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:34:57.672604 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:34:57.679507 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:34:57.735066 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:34:58.000661 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:34:58.000766 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:34:58.262838 [INFO] Running command: systemctl reset-failed
2024/11/30 10:34:58.273267 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:34:58.530021 [INFO] Running command: systemctl reset-failed
2024/11/30 10:34:58.536635 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:34:58.544898 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:34:58.798531 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:34:58.807009 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:34:59.068228 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:34:59.068246 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:34:59.078333 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:34:59.085287 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:34:59.138584 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:34:59.139748 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:34:59.141357 [INFO] Executing instruction: GetSetupProxyLog
2024/11/30 10:34:59.141497 [INFO] Executing instruction: configure log streaming
2024/11/30 10:34:59.141503 [INFO] log streaming is not enabled
2024/11/30 10:34:59.141506 [INFO] disable log stream
2024/11/30 10:34:59.141513 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:34:59.152229 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:34:59.171424 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:34:59.171436 [INFO] Checking if logs need forced rotation
2024/11/30 10:34:59.171446 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:34:59.698305 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:35:00.212382 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:35:00.215824 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:35:00.333263 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:35:00.333354 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:35:00.333360 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2024/11/30 10:35:00.333375 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2024/11/30 10:35:00.333386 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2024/11/30 10:35:00.333390 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2024/11/30 10:35:00.333394 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:35:00.333396 [INFO] stop X-Ray ...
2024/11/30 10:35:00.333405 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:35:00.348820 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:35:00.348835 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:35:00.366661 [INFO] Executing instruction: stop proxy
2024/11/30 10:35:00.366677 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:35:00.380496 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:35:00.380511 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:35:00.390686 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:35:00.398005 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:35:00.405342 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:35:00.507707 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:35:00.769872 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:35:01.029476 [INFO] Running command: systemctl reset-failed
2024/11/30 10:35:01.037866 [INFO] Executing instruction: FlipApplication
2024/11/30 10:35:01.037878 [INFO] Fetching environment variables...
2024/11/30 10:35:01.038088 [INFO] Purge old process...
2024/11/30 10:35:01.038102 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:35:01.053640 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:35:01.075723 [INFO] web.service

2024/11/30 10:35:01.075740 [INFO] deregistering process: web
2024/11/30 10:35:01.075749 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:35:01.092160 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:35:01.103321 [INFO] Running command: systemctl disable web.service
2024/11/30 10:35:01.434047 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:35:01.434115 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:35:01.735094 [INFO] Running command: systemctl reset-failed
2024/11/30 10:35:01.744601 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:35:01.753909 [INFO] Process web has been fully terminated
2024/11/30 10:35:01.753924 [INFO] All processes have been fully terminated
2024/11/30 10:35:01.753927 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:35:01.887905 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:35:01.887938 [INFO] Register application processes...
2024/11/30 10:35:01.887942 [INFO] Registering the proc: web

2024/11/30 10:35:01.887952 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:35:01.938173 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:35:02.201602 [INFO] Running command: systemctl reset-failed
2024/11/30 10:35:02.210624 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:35:02.218896 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:35:02.483176 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:35:02.494471 [INFO] Running command: systemctl enable web.service
2024/11/30 10:35:02.766799 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:35:02.766821 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:35:02.777357 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:35:02.784271 [INFO] Running command: systemctl start web.service
2024/11/30 10:35:02.853372 [INFO] Executing instruction: start X-Ray
2024/11/30 10:35:02.853389 [INFO] X-Ray is not enabled.
2024/11/30 10:35:02.853393 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:35:02.853408 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:35:02.886350 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:35:02.887179 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:35:02.892075 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:35:02.916313 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:35:03.366727 [INFO] Running command: systemctl reset-failed
2024/11/30 10:35:03.383252 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:35:03.397419 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:35:03.416554 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:35:03.600269 [INFO] Executing instruction: configureSqsd
2024/11/30 10:35:03.600282 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:35:03.600286 [INFO] Executing instruction: startSqsd
2024/11/30 10:35:03.600288 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:35:03.600291 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:35:03.600295 [INFO] This is an enhanced health env...
2024/11/30 10:35:03.600303 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:35:03.614895 [INFO] cfn-hup.service nginx.service healthd.service

2024/11/30 10:35:03.614938 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:35:03.630132 [INFO] web.service

2024/11/30 10:35:03.630317 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2024/11/30 10:35:03.630370 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2024/11/30 10:35:03.630384 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2024/11/30 10:35:03.630387 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2024/11/30 10:35:03.630391 [INFO] Executing cleanup logic
2024/11/30 10:35:03.630489 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732962897625,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732962903630,"severity":"INFO"}]}]}

2024/11/30 10:35:03.630711 [INFO] Platform Engine finished execution on command: config-deploy

2024/11/30 10:39:01.856446 [INFO] Starting...
2024/11/30 10:39:01.856483 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:39:01.856500 [INFO] reading event message file
2024/11/30 10:39:01.858831 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:39:01.927939 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:39:02.233934 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:39:02.525649 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 10:39:02.525661 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:39:02.525664 [INFO] Engine command: (tail-log)

2024/11/30 10:39:02.527905 [INFO] Executing instruction: GetTailLogs
2024/11/30 10:39:02.527914 [INFO] Tail Logs...
2024/11/30 10:39:02.528196 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 10:39:02.529812 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 10:39:02.534689 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 10:39:02.536600 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 10:39:02.540456 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 10:39:02.594358 [INFO] Executing cleanup logic
2024/11/30 10:39:02.594419 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732963142594,"severity":"INFO"}]}]}

2024/11/30 10:39:02.594507 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 10:48:12.279510 [INFO] Starting...
2024/11/30 10:48:12.279547 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:48:12.279564 [INFO] reading event message file
2024/11/30 10:48:12.279677 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:48:12.359013 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:48:12.651352 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:48:12.931519 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 10:48:12.931530 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:48:12.931533 [INFO] Engine command: (app-deploy)

2024/11/30 10:48:12.931537 [INFO] Downloading EB Application...
2024/11/30 10:48:12.931540 [INFO] Region: us-east-1
2024/11/30 10:48:12.931542 [INFO] envID: e-phgumpyagn
2024/11/30 10:48:12.931545 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 10:48:12.931548 [INFO] Using manifest file name from command request
2024/11/30 10:48:12.931553 [INFO] Manifest name is : manifest_1732963670597
2024/11/30 10:48:12.931555 [INFO] Download app version manifest
2024/11/30 10:48:12.931655 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963670597
2024/11/30 10:48:12.961696 [INFO] Download successful102bytes downloaded
2024/11/30 10:48:12.961823 [INFO] Trying to read and parse version manifest...
2024/11/30 10:48:12.964836 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-d7ab-241130_054734479078
2024/11/30 10:48:13.515862 [INFO] Download successful47526138bytes downloaded
2024/11/30 10:48:13.516078 [INFO] Executing instruction: ElectLeader
2024/11/30 10:48:13.516084 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 10:48:13.516087 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 10:48:13.516097 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 46f205dc-c4c9-48b4-8b83-c8d196d045d6 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 10:48:13.778486 [INFO] Instance is Leader.
2024/11/30 10:48:13.778543 [INFO] Executing instruction: stopSqsd
2024/11/30 10:48:13.778548 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:48:13.778551 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 10:48:13.778554 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 10:48:13.778572 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 10:48:14.113037 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 10:48:14.113053 [INFO] Executing instruction: StageApplication
2024/11/30 10:48:14.113057 [INFO] Recreating /var/app/staging/
2024/11/30 10:48:14.225352 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:48:14.225387 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:48:15.900957 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:48:15.959588 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 10:48:15.959614 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 10:48:15.959632 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 10:48:15.959654 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 10:48:15.959660 [INFO] Executing instruction: InstallDependency
2024/11/30 10:48:15.959665 [INFO] checking dependencies file
2024/11/30 10:48:15.959677 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:48:15.959686 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:48:18.607529 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:48:18.607562 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:48:18.607567 [INFO] Executing instruction: check Procfile
2024/11/30 10:48:18.607612 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:48:18.607619 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:48:18.607623 [INFO] X-Ray is not enabled.
2024/11/30 10:48:18.607625 [INFO] Executing instruction: configure proxy server
2024/11/30 10:48:18.607640 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:48:18.614397 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:48:18.621881 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:48:18.624048 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:48:18.662111 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:48:18.662127 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:48:18.674725 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:48:18.684728 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:48:18.694573 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:48:18.754961 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:48:19.063502 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:48:19.064013 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:19.361461 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:19.371392 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:19.627506 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:19.634987 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:48:19.641832 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:48:19.899789 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:48:19.909877 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:48:20.171002 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:48:20.171022 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:48:20.180645 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:48:20.187787 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:48:20.252088 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:48:20.254040 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:48:20.255558 [INFO] Executing instruction: configure log streaming
2024/11/30 10:48:20.255565 [INFO] log streaming is not enabled
2024/11/30 10:48:20.255568 [INFO] disable log stream
2024/11/30 10:48:20.255575 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:48:20.267170 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:48:20.284375 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:48:20.284385 [INFO] Checking if logs need forced rotation
2024/11/30 10:48:20.284398 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:48:20.795094 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:48:21.279131 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:48:21.280881 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:48:21.608667 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 10:48:21.608693 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 10:48:21.608703 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 10:48:21.926217 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 10:48:21.926234 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:48:21.926340 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:48:21.926345 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 10:48:21.926357 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 10:48:21.926371 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 10:48:21.926374 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 10:48:21.926379 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:48:21.926381 [INFO] stop X-Ray ...
2024/11/30 10:48:21.926391 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:48:21.938150 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:48:21.938167 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:48:21.951791 [INFO] Executing instruction: stop proxy
2024/11/30 10:48:21.951806 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:48:21.963406 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:48:21.963419 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:48:21.974537 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:48:21.981638 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:48:21.989174 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:48:22.097451 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:48:22.357691 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:22.621290 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:22.630492 [INFO] Executing instruction: FlipApplication
2024/11/30 10:48:22.630508 [INFO] Fetching environment variables...
2024/11/30 10:48:22.630688 [INFO] Purge old process...
2024/11/30 10:48:22.630702 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:48:22.653341 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:48:22.674195 [INFO] web.service

2024/11/30 10:48:22.674215 [INFO] deregistering process: web
2024/11/30 10:48:22.674224 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:48:22.686268 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:48:22.703286 [INFO] Running command: systemctl disable web.service
2024/11/30 10:48:23.026760 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:48:23.026825 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:23.308089 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:23.317310 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:48:23.324035 [INFO] Process web has been fully terminated
2024/11/30 10:48:23.324046 [INFO] All processes have been fully terminated
2024/11/30 10:48:23.324052 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:48:23.454921 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:48:23.454948 [INFO] Register application processes...
2024/11/30 10:48:23.454952 [INFO] Registering the proc: web

2024/11/30 10:48:23.454960 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:48:23.492806 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:23.758791 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:23.766680 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:48:23.773476 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:48:24.058690 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:48:24.068025 [INFO] Running command: systemctl enable web.service
2024/11/30 10:48:24.336091 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:48:24.336113 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:48:24.347752 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:48:24.354789 [INFO] Running command: systemctl start web.service
2024/11/30 10:48:24.425343 [INFO] Executing instruction: start X-Ray
2024/11/30 10:48:24.425358 [INFO] X-Ray is not enabled.
2024/11/30 10:48:24.425362 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:48:24.425377 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:48:24.462975 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:48:24.463176 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:48:24.472419 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:48:24.491452 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:48:24.942735 [INFO] Running command: systemctl reset-failed
2024/11/30 10:48:24.955745 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:48:24.978940 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:48:24.995310 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:48:25.184933 [INFO] Executing instruction: configureSqsd
2024/11/30 10:48:25.184946 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:48:25.184949 [INFO] Executing instruction: startSqsd
2024/11/30 10:48:25.184952 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:48:25.184955 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:48:25.184959 [INFO] This is an enhanced health env...
2024/11/30 10:48:25.184967 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:48:25.198969 [INFO] healthd.service nginx.service cfn-hup.service

2024/11/30 10:48:25.198987 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:48:25.214937 [INFO] web.service

2024/11/30 10:48:25.215108 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 10:48:25.215161 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 10:48:25.215173 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 10:48:25.215175 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 10:48:25.215179 [INFO] Executing cleanup logic
2024/11/30 10:48:25.215274 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732963698607,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732963705215,"severity":"INFO"}]}]}

2024/11/30 10:48:25.215480 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 10:50:21.578664 [INFO] Starting...
2024/11/30 10:50:21.578696 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:50:21.578713 [INFO] reading event message file
2024/11/30 10:50:21.578828 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:50:21.657264 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:50:21.946858 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:50:22.258731 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 10:50:22.258743 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:50:22.258746 [INFO] Engine command: (app-deploy)

2024/11/30 10:50:22.258751 [INFO] Downloading EB Application...
2024/11/30 10:50:22.258753 [INFO] Region: us-east-1
2024/11/30 10:50:22.258756 [INFO] envID: e-phgumpyagn
2024/11/30 10:50:22.258759 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 10:50:22.258762 [INFO] Using manifest file name from command request
2024/11/30 10:50:22.258766 [INFO] Manifest name is : manifest_1732963819238
2024/11/30 10:50:22.258769 [INFO] Download app version manifest
2024/11/30 10:50:22.258870 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963819238
2024/11/30 10:50:22.295346 [INFO] Download successful102bytes downloaded
2024/11/30 10:50:22.295478 [INFO] Trying to read and parse version manifest...
2024/11/30 10:50:22.298486 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-d7ab-241130_055006195394
2024/11/30 10:50:23.263298 [INFO] Download successful47526138bytes downloaded
2024/11/30 10:50:23.263520 [INFO] Executing instruction: ElectLeader
2024/11/30 10:50:23.263525 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 10:50:23.263529 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 10:50:23.263538 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 354b49ba-6903-4360-8860-1f0622815fec --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 10:50:23.505780 [INFO] Instance is Leader.
2024/11/30 10:50:23.505831 [INFO] Executing instruction: stopSqsd
2024/11/30 10:50:23.505835 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:50:23.505838 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 10:50:23.505841 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 10:50:23.505850 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 10:50:23.817004 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 10:50:23.817044 [INFO] Executing instruction: StageApplication
2024/11/30 10:50:23.817048 [INFO] Recreating /var/app/staging/
2024/11/30 10:50:23.903724 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:50:23.903750 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:50:25.560118 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:50:25.619744 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 10:50:25.619774 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 10:50:25.619792 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 10:50:25.619795 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 10:50:25.619801 [INFO] Executing instruction: InstallDependency
2024/11/30 10:50:25.619806 [INFO] checking dependencies file
2024/11/30 10:50:25.619821 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:50:25.619829 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:50:28.287195 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:50:28.287229 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:50:28.287236 [INFO] Executing instruction: check Procfile
2024/11/30 10:50:28.287282 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:50:28.287288 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:50:28.287293 [INFO] X-Ray is not enabled.
2024/11/30 10:50:28.287296 [INFO] Executing instruction: configure proxy server
2024/11/30 10:50:28.287310 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:50:28.293586 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:50:28.298973 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:50:28.300420 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:50:28.330134 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:50:28.330148 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:50:28.367064 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:50:28.373880 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:50:28.381219 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:50:28.455009 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:50:28.721240 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:50:28.721367 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:28.977193 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:28.986670 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:29.245421 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:29.252989 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:50:29.260072 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:50:29.521954 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:50:29.530630 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:50:29.785489 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:50:29.785519 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:50:29.795509 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:50:29.802727 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:50:29.858115 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:50:29.858715 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:50:29.859374 [INFO] Executing instruction: configure log streaming
2024/11/30 10:50:29.859381 [INFO] log streaming is not enabled
2024/11/30 10:50:29.859384 [INFO] disable log stream
2024/11/30 10:50:29.859392 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:50:29.873597 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:50:29.887005 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:50:29.887015 [INFO] Checking if logs need forced rotation
2024/11/30 10:50:29.887026 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:50:30.365276 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:50:30.855093 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:50:30.857074 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:50:31.362261 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 10:50:31.362282 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 10:50:31.362305 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 10:50:31.718743 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 10:50:31.718795 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:50:31.718908 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:50:31.718939 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 10:50:31.718952 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 10:50:31.718970 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 10:50:31.718974 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 10:50:31.718978 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:50:31.718981 [INFO] stop X-Ray ...
2024/11/30 10:50:31.718991 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:50:31.729623 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:50:31.729641 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:50:31.743196 [INFO] Executing instruction: stop proxy
2024/11/30 10:50:31.743213 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:50:31.753920 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:50:31.753936 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:50:31.765021 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:50:31.771269 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:50:31.779990 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:50:31.887270 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:50:32.153486 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:32.403301 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:32.413215 [INFO] Executing instruction: FlipApplication
2024/11/30 10:50:32.413226 [INFO] Fetching environment variables...
2024/11/30 10:50:32.413389 [INFO] Purge old process...
2024/11/30 10:50:32.413402 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:50:32.424609 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:50:32.440983 [INFO] web.service

2024/11/30 10:50:32.440996 [INFO] deregistering process: web
2024/11/30 10:50:32.441003 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:50:32.455489 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:50:32.474245 [INFO] Running command: systemctl disable web.service
2024/11/30 10:50:32.805874 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:50:32.805937 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:33.135416 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:33.143437 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:50:33.149851 [INFO] Process web has been fully terminated
2024/11/30 10:50:33.149859 [INFO] All processes have been fully terminated
2024/11/30 10:50:33.149862 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:50:33.281540 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:50:33.281580 [INFO] Register application processes...
2024/11/30 10:50:33.281584 [INFO] Registering the proc: web

2024/11/30 10:50:33.281594 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:50:33.317282 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:33.576440 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:33.586305 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:50:33.593462 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:50:33.856396 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:50:33.868532 [INFO] Running command: systemctl enable web.service
2024/11/30 10:50:34.129931 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:50:34.129949 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:50:34.140604 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:50:34.146581 [INFO] Running command: systemctl start web.service
2024/11/30 10:50:34.205970 [INFO] Executing instruction: start X-Ray
2024/11/30 10:50:34.205984 [INFO] X-Ray is not enabled.
2024/11/30 10:50:34.205988 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:50:34.206004 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:50:34.240366 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:50:34.240567 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:50:34.247277 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:50:34.275073 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:50:34.722648 [INFO] Running command: systemctl reset-failed
2024/11/30 10:50:34.732342 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:50:34.759361 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:50:34.777965 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:50:34.968144 [INFO] Executing instruction: configureSqsd
2024/11/30 10:50:34.968159 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:50:34.968162 [INFO] Executing instruction: startSqsd
2024/11/30 10:50:34.968165 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:50:34.968168 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:50:34.968171 [INFO] This is an enhanced health env...
2024/11/30 10:50:34.968180 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:50:34.985121 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 10:50:34.985140 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:50:35.004917 [INFO] web.service

2024/11/30 10:50:35.005109 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 10:50:35.005143 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 10:50:35.005156 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 10:50:35.005159 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 10:50:35.005163 [INFO] Executing cleanup logic
2024/11/30 10:50:35.005257 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732963828287,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732963835005,"severity":"INFO"}]}]}

2024/11/30 10:50:35.005459 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 10:51:10.160465 [INFO] Starting...
2024/11/30 10:51:10.160499 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:51:10.160516 [INFO] reading event message file
2024/11/30 10:51:10.160624 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:51:10.229951 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:51:10.512326 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:51:10.790727 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/11/30 10:51:10.790739 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:51:10.790742 [INFO] Engine command: (restart-app-server)

2024/11/30 10:51:10.790747 [INFO] Using manifest file name from command request
2024/11/30 10:51:10.790751 [INFO] Unable to get version manifest file.
2024/11/30 10:51:10.790754 [INFO] Downloading latest manifest available.
2024/11/30 10:51:10.790756 [INFO] Download latest app version manifest
2024/11/30 10:51:10.790833 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 10:51:10.839730 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963819238

2024/11/30 10:51:10.839891 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963819238
2024/11/30 10:51:10.855921 [INFO] Download successful102bytes downloaded
2024/11/30 10:51:10.856054 [INFO] Trying to read and parse version manifest...
2024/11/30 10:51:10.856115 [INFO] Executing instruction: stopSqsd
2024/11/30 10:51:10.856119 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:51:10.856121 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:51:10.856125 [INFO] X-Ray is not enabled.
2024/11/30 10:51:10.856127 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:51:10.856130 [INFO] stop X-Ray ...
2024/11/30 10:51:10.856136 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:51:10.905123 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:51:10.905141 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:51:10.920811 [INFO] Executing instruction: start X-Ray
2024/11/30 10:51:10.920826 [INFO] X-Ray is not enabled.
2024/11/30 10:51:10.920829 [INFO] Executing instruction: RestartAppServer
2024/11/30 10:51:10.920832 [INFO] Restarting customer application...
2024/11/30 10:51:10.920839 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:51:10.934073 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:51:11.022515 [INFO] Running command: systemctl restart eb-app.target
2024/11/30 10:51:11.047442 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:51:11.068065 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:51:11.085730 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:51:11.298688 [INFO] Executing instruction: configureSqsd
2024/11/30 10:51:11.298701 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:51:11.298705 [INFO] Executing instruction: startSqsd
2024/11/30 10:51:11.298707 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:51:11.298711 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:51:11.298714 [INFO] This is an enhanced health env...
2024/11/30 10:51:11.298723 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:51:11.306799 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 10:51:11.306816 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:51:11.314899 [INFO] web.service

2024/11/30 10:51:11.315043 [INFO] Executing cleanup logic
2024/11/30 10:51:11.315112 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732963871315,"severity":"INFO"}]}]}

2024/11/30 10:51:11.315123 [INFO] Platform Engine finished execution on command: restart-app-server

2024/11/30 10:53:17.810995 [INFO] Starting...
2024/11/30 10:53:17.811031 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:53:17.811047 [INFO] reading event message file
2024/11/30 10:53:17.811161 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:53:17.882084 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:53:18.181929 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:53:18.473978 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/11/30 10:53:18.473989 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:53:18.473992 [INFO] Engine command: (restart-app-server)

2024/11/30 10:53:18.474009 [INFO] Using manifest file name from command request
2024/11/30 10:53:18.474016 [INFO] Unable to get version manifest file.
2024/11/30 10:53:18.474019 [INFO] Downloading latest manifest available.
2024/11/30 10:53:18.474021 [INFO] Download latest app version manifest
2024/11/30 10:53:18.474104 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 10:53:18.518115 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963819238

2024/11/30 10:53:18.518260 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732963819238
2024/11/30 10:53:18.534316 [INFO] Download successful102bytes downloaded
2024/11/30 10:53:18.534449 [INFO] Trying to read and parse version manifest...
2024/11/30 10:53:18.534511 [INFO] Executing instruction: stopSqsd
2024/11/30 10:53:18.534515 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:53:18.534518 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:53:18.534522 [INFO] X-Ray is not enabled.
2024/11/30 10:53:18.534524 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:53:18.534527 [INFO] stop X-Ray ...
2024/11/30 10:53:18.534534 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:53:18.546011 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:53:18.546025 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:53:18.560097 [INFO] Executing instruction: start X-Ray
2024/11/30 10:53:18.560111 [INFO] X-Ray is not enabled.
2024/11/30 10:53:18.560114 [INFO] Executing instruction: RestartAppServer
2024/11/30 10:53:18.560117 [INFO] Restarting customer application...
2024/11/30 10:53:18.560124 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:53:18.567816 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:53:18.679055 [INFO] Running command: systemctl restart eb-app.target
2024/11/30 10:53:18.694637 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:53:18.719038 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:53:18.737663 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:53:18.913930 [INFO] Executing instruction: configureSqsd
2024/11/30 10:53:18.913944 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:53:18.913947 [INFO] Executing instruction: startSqsd
2024/11/30 10:53:18.913950 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:53:18.913953 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:53:18.913957 [INFO] This is an enhanced health env...
2024/11/30 10:53:18.913966 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:53:18.921559 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 10:53:18.921572 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:53:18.930264 [INFO] web.service

2024/11/30 10:53:18.930392 [INFO] Executing cleanup logic
2024/11/30 10:53:18.930460 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732963998930,"severity":"INFO"}]}]}

2024/11/30 10:53:18.930539 [INFO] Platform Engine finished execution on command: restart-app-server

2024/11/30 10:54:07.681595 [INFO] Starting...
2024/11/30 10:54:07.681627 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:54:07.681642 [INFO] reading event message file
2024/11/30 10:54:07.681757 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:54:07.753800 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:54:08.045095 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:54:08.334241 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 10:54:08.334254 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:54:08.334257 [INFO] Engine command: (tail-log)

2024/11/30 10:54:08.334295 [INFO] Executing instruction: GetTailLogs
2024/11/30 10:54:08.334298 [INFO] Tail Logs...
2024/11/30 10:54:08.335243 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 10:54:08.337226 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 10:54:08.338812 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 10:54:08.341350 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 10:54:08.344343 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 10:54:08.514533 [INFO] Executing cleanup logic
2024/11/30 10:54:08.514616 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732964048514,"severity":"INFO"}]}]}

2024/11/30 10:54:08.514698 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 10:59:20.645487 [INFO] Starting...
2024/11/30 10:59:20.645519 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 10:59:20.645535 [INFO] reading event message file
2024/11/30 10:59:20.645651 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 10:59:20.719594 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:59:21.015633 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:59:21.297243 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 10:59:21.297255 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 10:59:21.297257 [INFO] Engine command: (app-deploy)

2024/11/30 10:59:21.297275 [INFO] Downloading EB Application...
2024/11/30 10:59:21.297278 [INFO] Region: us-east-1
2024/11/30 10:59:21.297280 [INFO] envID: e-phgumpyagn
2024/11/30 10:59:21.297283 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 10:59:21.297286 [INFO] Using manifest file name from command request
2024/11/30 10:59:21.297291 [INFO] Manifest name is : manifest_1732964338462
2024/11/30 10:59:21.297293 [INFO] Download app version manifest
2024/11/30 10:59:21.297401 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964338462
2024/11/30 10:59:21.358307 [INFO] Download successful102bytes downloaded
2024/11/30 10:59:21.358455 [INFO] Trying to read and parse version manifest...
2024/11/30 10:59:21.360703 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-82b6-241130_055841342817
2024/11/30 10:59:22.019210 [INFO] Download successful47529521bytes downloaded
2024/11/30 10:59:22.019414 [INFO] Executing instruction: ElectLeader
2024/11/30 10:59:22.019419 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 10:59:22.019423 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 10:59:22.019432 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id c9fd469b-4d73-4346-8c1b-f8a3022671ea --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 10:59:22.270598 [INFO] Instance is Leader.
2024/11/30 10:59:22.270646 [INFO] Executing instruction: stopSqsd
2024/11/30 10:59:22.270650 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 10:59:22.270653 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 10:59:22.270657 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 10:59:22.270667 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 10:59:22.581712 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 10:59:22.581743 [INFO] Executing instruction: StageApplication
2024/11/30 10:59:22.581747 [INFO] Recreating /var/app/staging/
2024/11/30 10:59:22.646316 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 10:59:22.646341 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 10:59:24.312892 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 10:59:24.372491 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 10:59:24.372519 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 10:59:24.372534 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 10:59:24.372537 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 10:59:24.372541 [INFO] Executing instruction: InstallDependency
2024/11/30 10:59:24.372546 [INFO] checking dependencies file
2024/11/30 10:59:24.372557 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 10:59:24.372567 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 10:59:27.020686 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 10:59:27.020720 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 10:59:27.020727 [INFO] Executing instruction: check Procfile
2024/11/30 10:59:27.020834 [INFO] detected Procfile in application source bundle ...
2024/11/30 10:59:27.020842 [INFO] Executing instruction: configure X-Ray
2024/11/30 10:59:27.020846 [INFO] X-Ray is not enabled.
2024/11/30 10:59:27.020850 [INFO] Executing instruction: configure proxy server
2024/11/30 10:59:27.020866 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 10:59:27.027045 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 10:59:27.035018 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 10:59:27.037115 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:59:27.044916 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 10:59:27.044929 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:59:27.053163 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:59:27.059417 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:59:27.067452 [INFO] Running command: systemctl stop healthd.service
2024/11/30 10:59:27.134903 [INFO] Running command: systemctl disable healthd.service
2024/11/30 10:59:27.402086 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 10:59:27.402192 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:27.663395 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:27.676845 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:27.947067 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:27.954492 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 10:59:27.962418 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 10:59:28.219158 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 10:59:28.229271 [INFO] Running command: systemctl enable healthd.service
2024/11/30 10:59:28.492031 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 10:59:28.492052 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 10:59:28.504435 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 10:59:28.511612 [INFO] Running command: systemctl start healthd.service
2024/11/30 10:59:28.572000 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 10:59:28.573463 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 10:59:28.574503 [INFO] Executing instruction: configure log streaming
2024/11/30 10:59:28.574511 [INFO] log streaming is not enabled
2024/11/30 10:59:28.574514 [INFO] disable log stream
2024/11/30 10:59:28.574523 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 10:59:28.592954 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 10:59:28.607260 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 10:59:28.607273 [INFO] Checking if logs need forced rotation
2024/11/30 10:59:28.607297 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 10:59:29.096974 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 10:59:29.617908 [INFO] Generating rsyslog config from Procfile
2024/11/30 10:59:29.620197 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 10:59:29.863698 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 10:59:29.863723 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 10:59:29.863733 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 10:59:30.218429 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 10:59:30.218448 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 10:59:30.218557 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 10:59:30.218562 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 10:59:30.218574 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 10:59:30.218587 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 10:59:30.218590 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 10:59:30.218594 [INFO] Executing instruction: stop X-Ray
2024/11/30 10:59:30.218596 [INFO] stop X-Ray ...
2024/11/30 10:59:30.218605 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 10:59:30.229102 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 10:59:30.229121 [INFO] Running command: systemctl stop xray.service
2024/11/30 10:59:30.242147 [INFO] Executing instruction: stop proxy
2024/11/30 10:59:30.242164 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 10:59:30.254708 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 10:59:30.254724 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:59:30.265987 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:59:30.272667 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:59:30.280043 [INFO] Running command: systemctl stop nginx.service
2024/11/30 10:59:30.387628 [INFO] Running command: systemctl disable nginx.service
2024/11/30 10:59:30.653262 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:30.922027 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:30.930826 [INFO] Executing instruction: FlipApplication
2024/11/30 10:59:30.930839 [INFO] Fetching environment variables...
2024/11/30 10:59:30.931017 [INFO] Purge old process...
2024/11/30 10:59:30.931033 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 10:59:30.943866 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:59:30.965729 [INFO] web.service

2024/11/30 10:59:30.965748 [INFO] deregistering process: web
2024/11/30 10:59:30.965757 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:59:30.985638 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:59:30.995637 [INFO] Running command: systemctl disable web.service
2024/11/30 10:59:31.338250 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 10:59:31.338314 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:31.660722 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:31.669294 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:59:31.676160 [INFO] Process web has been fully terminated
2024/11/30 10:59:31.676171 [INFO] All processes have been fully terminated
2024/11/30 10:59:31.676175 [INFO] Removing /var/app/current/ if it exists
2024/11/30 10:59:31.811098 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 10:59:31.811126 [INFO] Register application processes...
2024/11/30 10:59:31.811130 [INFO] Registering the proc: web

2024/11/30 10:59:31.811139 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:59:31.853034 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:32.111904 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:32.119608 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 10:59:32.126172 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 10:59:32.391736 [INFO] Running command: systemctl start eb-app.target
2024/11/30 10:59:32.401837 [INFO] Running command: systemctl enable web.service
2024/11/30 10:59:32.659757 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 10:59:32.659778 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 10:59:32.670567 [INFO] Running command: systemctl is-active web.service
2024/11/30 10:59:32.676768 [INFO] Running command: systemctl start web.service
2024/11/30 10:59:32.744013 [INFO] Executing instruction: start X-Ray
2024/11/30 10:59:32.744026 [INFO] X-Ray is not enabled.
2024/11/30 10:59:32.744029 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 10:59:32.744051 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 10:59:32.782977 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 10:59:32.783144 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 10:59:32.792450 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:59:32.811769 [INFO] Running command: systemctl daemon-reload
2024/11/30 10:59:33.253803 [INFO] Running command: systemctl reset-failed
2024/11/30 10:59:33.273323 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 10:59:33.288678 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 10:59:33.302018 [INFO] Running command: systemctl start nginx.service
2024/11/30 10:59:33.474624 [INFO] Executing instruction: configureSqsd
2024/11/30 10:59:33.474637 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 10:59:33.474641 [INFO] Executing instruction: startSqsd
2024/11/30 10:59:33.474643 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 10:59:33.474646 [INFO] Executing instruction: Track pids in healthd
2024/11/30 10:59:33.474650 [INFO] This is an enhanced health env...
2024/11/30 10:59:33.474658 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 10:59:33.495597 [INFO] healthd.service nginx.service cfn-hup.service

2024/11/30 10:59:33.495617 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 10:59:33.514463 [INFO] web.service

2024/11/30 10:59:33.514640 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 10:59:33.514674 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 10:59:33.514687 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 10:59:33.514690 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 10:59:33.514694 [INFO] Executing cleanup logic
2024/11/30 10:59:33.514792 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732964367020,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732964373514,"severity":"INFO"}]}]}

2024/11/30 10:59:33.515013 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 11:04:08.121126 [INFO] Starting...
2024/11/30 11:04:08.121163 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:04:08.121178 [INFO] reading event message file
2024/11/30 11:04:08.121301 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:04:08.196335 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:04:08.492983 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:04:08.785718 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/11/30 11:04:08.785729 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:04:08.785732 [INFO] Engine command: (restart-app-server)

2024/11/30 11:04:08.785737 [INFO] Using manifest file name from command request
2024/11/30 11:04:08.785742 [INFO] Unable to get version manifest file.
2024/11/30 11:04:08.785744 [INFO] Downloading latest manifest available.
2024/11/30 11:04:08.785747 [INFO] Download latest app version manifest
2024/11/30 11:04:08.785823 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 11:04:08.824552 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964338462

2024/11/30 11:04:08.824705 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964338462
2024/11/30 11:04:08.840061 [INFO] Download successful102bytes downloaded
2024/11/30 11:04:08.840211 [INFO] Trying to read and parse version manifest...
2024/11/30 11:04:08.840266 [INFO] Executing instruction: stopSqsd
2024/11/30 11:04:08.840269 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:04:08.840272 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:04:08.840275 [INFO] X-Ray is not enabled.
2024/11/30 11:04:08.840278 [INFO] Executing instruction: stop X-Ray
2024/11/30 11:04:08.840283 [INFO] stop X-Ray ...
2024/11/30 11:04:08.840290 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 11:04:08.877967 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 11:04:08.877984 [INFO] Running command: systemctl stop xray.service
2024/11/30 11:04:08.894753 [INFO] Executing instruction: start X-Ray
2024/11/30 11:04:08.894766 [INFO] X-Ray is not enabled.
2024/11/30 11:04:08.894769 [INFO] Executing instruction: RestartAppServer
2024/11/30 11:04:08.894772 [INFO] Restarting customer application...
2024/11/30 11:04:08.894779 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:04:08.909669 [INFO] Running command: systemctl stop nginx.service
2024/11/30 11:04:08.987105 [INFO] Running command: systemctl restart eb-app.target
2024/11/30 11:04:09.014831 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:04:09.042631 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:04:09.065112 [INFO] Running command: systemctl start nginx.service
2024/11/30 11:04:09.269215 [INFO] Executing instruction: configureSqsd
2024/11/30 11:04:09.269228 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 11:04:09.269231 [INFO] Executing instruction: startSqsd
2024/11/30 11:04:09.269234 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 11:04:09.269237 [INFO] Executing instruction: Track pids in healthd
2024/11/30 11:04:09.269240 [INFO] This is an enhanced health env...
2024/11/30 11:04:09.269248 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 11:04:09.279762 [INFO] healthd.service nginx.service cfn-hup.service

2024/11/30 11:04:09.279778 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:04:09.287403 [INFO] web.service

2024/11/30 11:04:09.287539 [INFO] Executing cleanup logic
2024/11/30 11:04:09.287610 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732964649287,"severity":"INFO"}]}]}

2024/11/30 11:04:09.287620 [INFO] Platform Engine finished execution on command: restart-app-server

2024/11/30 11:09:42.874294 [INFO] Starting...
2024/11/30 11:09:42.874370 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:09:42.874392 [INFO] reading event message file
2024/11/30 11:09:42.874539 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:09:42.947024 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:09:43.235583 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:09:43.532549 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 11:09:43.532560 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:09:43.532563 [INFO] Engine command: (app-deploy)

2024/11/30 11:09:43.532568 [INFO] Downloading EB Application...
2024/11/30 11:09:43.532571 [INFO] Region: us-east-1
2024/11/30 11:09:43.532573 [INFO] envID: e-phgumpyagn
2024/11/30 11:09:43.532576 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 11:09:43.532579 [INFO] Using manifest file name from command request
2024/11/30 11:09:43.532584 [INFO] Manifest name is : manifest_1732964961581
2024/11/30 11:09:43.532586 [INFO] Download app version manifest
2024/11/30 11:09:43.532688 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964961581
2024/11/30 11:09:43.562896 [INFO] Download successful102bytes downloaded
2024/11/30 11:09:43.563081 [INFO] Trying to read and parse version manifest...
2024/11/30 11:09:43.565302 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-97c7-241130_060905753196
2024/11/30 11:09:44.494034 [INFO] Download successful47532382bytes downloaded
2024/11/30 11:09:44.494286 [INFO] Executing instruction: ElectLeader
2024/11/30 11:09:44.494291 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 11:09:44.494294 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 11:09:44.494304 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 32201976-4c1d-464d-a2fa-3318b4a848f0 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 11:09:44.792479 [INFO] Instance is Leader.
2024/11/30 11:09:44.792528 [INFO] Executing instruction: stopSqsd
2024/11/30 11:09:44.792532 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:09:44.792535 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 11:09:44.792539 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 11:09:44.792549 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 11:09:45.104078 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 11:09:45.104098 [INFO] Executing instruction: StageApplication
2024/11/30 11:09:45.104101 [INFO] Recreating /var/app/staging/
2024/11/30 11:09:45.155778 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 11:09:45.155800 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 11:09:46.824394 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 11:09:46.881720 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 11:09:46.884544 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 11:09:46.884573 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 11:09:46.884576 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 11:09:46.884583 [INFO] Executing instruction: InstallDependency
2024/11/30 11:09:46.884587 [INFO] checking dependencies file
2024/11/30 11:09:46.884600 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 11:09:46.885437 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 11:09:49.486307 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 11:09:49.486346 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 11:09:49.487296 [INFO] Executing instruction: check Procfile
2024/11/30 11:09:49.488659 [INFO] detected Procfile in application source bundle ...
2024/11/30 11:09:49.488668 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:09:49.488672 [INFO] X-Ray is not enabled.
2024/11/30 11:09:49.488675 [INFO] Executing instruction: configure proxy server
2024/11/30 11:09:49.488691 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 11:09:49.494704 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 11:09:49.501115 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 11:09:49.502308 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:09:49.513094 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 11:09:49.513112 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:09:49.521574 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:09:49.528536 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:09:49.535774 [INFO] Running command: systemctl stop healthd.service
2024/11/30 11:09:49.584497 [INFO] Running command: systemctl disable healthd.service
2024/11/30 11:09:49.853364 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 11:09:49.853448 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:09:50.121348 [INFO] Running command: systemctl reset-failed
2024/11/30 11:09:50.131177 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:09:50.389189 [INFO] Running command: systemctl reset-failed
2024/11/30 11:09:50.397820 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 11:09:50.405489 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 11:09:50.663967 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 11:09:50.673397 [INFO] Running command: systemctl enable healthd.service
2024/11/30 11:09:50.932051 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 11:09:50.932071 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:09:50.943178 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:09:50.950346 [INFO] Running command: systemctl start healthd.service
2024/11/30 11:09:51.021766 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 11:09:51.022610 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 11:09:51.023670 [INFO] Executing instruction: configure log streaming
2024/11/30 11:09:51.023678 [INFO] log streaming is not enabled
2024/11/30 11:09:51.023681 [INFO] disable log stream
2024/11/30 11:09:51.023689 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 11:09:51.037348 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 11:09:51.054686 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 11:09:51.054700 [INFO] Checking if logs need forced rotation
2024/11/30 11:09:51.054712 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:09:51.577426 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:09:52.080927 [INFO] Generating rsyslog config from Procfile
2024/11/30 11:09:52.084043 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 11:09:52.362778 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 11:09:52.362800 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 11:09:52.362813 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 11:09:52.781338 [INFO] Error occurred during build: Command 01_reload_nginx failed

2024/11/30 11:09:52.781372 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/11/30 11:09:52.781376 [INFO] Executing cleanup logic
2024/11/30 11:09:52.781461 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732964989488,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1732964992781,"severity":"ERROR"}]}]}

2024/11/30 11:09:52.781686 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 11:13:52.254357 [INFO] Starting...
2024/11/30 11:13:52.254394 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:13:52.254411 [INFO] reading event message file
2024/11/30 11:13:52.254560 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:13:52.328495 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:13:52.627275 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:13:52.918366 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/11/30 11:13:52.918376 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:13:52.918380 [INFO] Engine command: (restart-app-server)

2024/11/30 11:13:52.918384 [INFO] Using manifest file name from command request
2024/11/30 11:13:52.918389 [INFO] Unable to get version manifest file.
2024/11/30 11:13:52.918392 [INFO] Downloading latest manifest available.
2024/11/30 11:13:52.918394 [INFO] Download latest app version manifest
2024/11/30 11:13:52.918473 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 11:13:52.961233 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964996632

2024/11/30 11:13:52.961367 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732964996632
2024/11/30 11:13:52.978774 [INFO] Download successful103bytes downloaded
2024/11/30 11:13:52.978891 [INFO] Trying to read and parse version manifest...
2024/11/30 11:13:52.978956 [INFO] Executing instruction: stopSqsd
2024/11/30 11:13:52.978960 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:13:52.978963 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:13:52.978966 [INFO] X-Ray is not enabled.
2024/11/30 11:13:52.978969 [INFO] Executing instruction: stop X-Ray
2024/11/30 11:13:52.978986 [INFO] stop X-Ray ...
2024/11/30 11:13:52.978993 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 11:13:53.019962 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 11:13:53.019981 [INFO] Running command: systemctl stop xray.service
2024/11/30 11:13:53.036820 [INFO] Executing instruction: start X-Ray
2024/11/30 11:13:53.036835 [INFO] X-Ray is not enabled.
2024/11/30 11:13:53.036838 [INFO] Executing instruction: RestartAppServer
2024/11/30 11:13:53.036842 [INFO] Restarting customer application...
2024/11/30 11:13:53.036849 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:13:53.051891 [INFO] Running command: systemctl stop nginx.service
2024/11/30 11:13:53.137158 [INFO] Running command: systemctl restart eb-app.target
2024/11/30 11:13:53.163744 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:13:53.182113 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:13:53.201093 [INFO] Running command: systemctl start nginx.service
2024/11/30 11:13:53.325594 [INFO] Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.

2024/11/30 11:13:53.325615 [ERROR] An error occurred during execution of command [restart-app-server] - [RestartAppServer]. Stop running the command. Error: start nginx failed with error startProcess Failure: starting process "nginx" failed: Command systemctl start nginx.service failed with error exit status 1. Stderr:Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
  

2024/11/30 11:13:53.325619 [INFO] Executing cleanup logic
2024/11/30 11:13:53.325700 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1732965233325,"severity":"ERROR"}]}]}

2024/11/30 11:13:53.325711 [INFO] Platform Engine finished execution on command: restart-app-server

2024/11/30 11:14:43.810792 [INFO] Starting...
2024/11/30 11:14:43.810824 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:14:43.810846 [INFO] reading event message file
2024/11/30 11:14:43.811006 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:14:43.882136 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:14:44.182866 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:14:44.476957 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 11:14:44.476968 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:14:44.476971 [INFO] Engine command: (tail-log)

2024/11/30 11:14:44.477019 [INFO] Executing instruction: GetTailLogs
2024/11/30 11:14:44.477023 [INFO] Tail Logs...
2024/11/30 11:14:44.477223 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 11:14:44.478956 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 11:14:44.481266 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 11:14:44.483347 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 11:14:44.487315 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 11:14:44.538645 [INFO] Executing cleanup logic
2024/11/30 11:14:44.538726 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732965284538,"severity":"INFO"}]}]}

2024/11/30 11:14:44.538817 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 11:18:04.883947 [INFO] Starting...
2024/11/30 11:18:04.883980 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:18:04.883998 [INFO] reading event message file
2024/11/30 11:18:04.884113 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:18:04.972257 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:18:05.263571 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:18:05.544984 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 11:18:05.544994 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:18:05.544997 [INFO] Engine command: (app-deploy)

2024/11/30 11:18:05.545002 [INFO] Downloading EB Application...
2024/11/30 11:18:05.545016 [INFO] Region: us-east-1
2024/11/30 11:18:05.545019 [INFO] envID: e-phgumpyagn
2024/11/30 11:18:05.545021 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 11:18:05.545024 [INFO] Using manifest file name from command request
2024/11/30 11:18:05.545029 [INFO] Manifest name is : manifest_1732965463099
2024/11/30 11:18:05.545032 [INFO] Download app version manifest
2024/11/30 11:18:05.545134 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732965463099
2024/11/30 11:18:05.578311 [INFO] Download successful104bytes downloaded
2024/11/30 11:18:05.578460 [INFO] Trying to read and parse version manifest...
2024/11/30 11:18:05.580705 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-9381-241130_061727725668
2024/11/30 11:18:06.556323 [INFO] Download successful47534873bytes downloaded
2024/11/30 11:18:06.556526 [INFO] Executing instruction: ElectLeader
2024/11/30 11:18:06.556532 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 11:18:06.556535 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 11:18:06.556670 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 235323b3-6f42-44e2-bb46-6759665e563c --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 11:18:06.801217 [INFO] Instance is Leader.
2024/11/30 11:18:06.801266 [INFO] Executing instruction: stopSqsd
2024/11/30 11:18:06.801270 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:18:06.801274 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 11:18:06.801277 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 11:18:06.801287 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 11:18:07.111766 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 11:18:07.111784 [INFO] Executing instruction: StageApplication
2024/11/30 11:18:07.111800 [INFO] Recreating /var/app/staging/
2024/11/30 11:18:07.308038 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 11:18:07.308065 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 11:18:08.986939 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 11:18:09.049045 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 11:18:09.049070 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 11:18:09.049099 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 11:18:09.049102 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 11:18:09.049107 [INFO] Executing instruction: InstallDependency
2024/11/30 11:18:09.049112 [INFO] checking dependencies file
2024/11/30 11:18:09.049123 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 11:18:09.049131 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 11:18:11.636237 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 11:18:11.636279 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 11:18:11.636284 [INFO] Executing instruction: check Procfile
2024/11/30 11:18:11.636327 [INFO] detected Procfile in application source bundle ...
2024/11/30 11:18:11.636333 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:18:11.636337 [INFO] X-Ray is not enabled.
2024/11/30 11:18:11.636340 [INFO] Executing instruction: configure proxy server
2024/11/30 11:18:11.636354 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 11:18:11.643027 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 11:18:11.649576 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 11:18:11.650981 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:18:11.659954 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 11:18:11.659967 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:18:11.668008 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:18:11.675042 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:18:11.683417 [INFO] Running command: systemctl stop healthd.service
2024/11/30 11:18:11.744652 [INFO] Running command: systemctl disable healthd.service
2024/11/30 11:18:12.033963 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 11:18:12.034099 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:12.299910 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:12.312304 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:12.569175 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:12.578257 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 11:18:12.585463 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 11:18:12.851253 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 11:18:12.860118 [INFO] Running command: systemctl enable healthd.service
2024/11/30 11:18:13.120824 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 11:18:13.120843 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:18:13.130299 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:18:13.136651 [INFO] Running command: systemctl start healthd.service
2024/11/30 11:18:13.199993 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 11:18:13.200630 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 11:18:13.201550 [INFO] Executing instruction: configure log streaming
2024/11/30 11:18:13.201557 [INFO] log streaming is not enabled
2024/11/30 11:18:13.201560 [INFO] disable log stream
2024/11/30 11:18:13.201569 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 11:18:13.217859 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 11:18:13.245345 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 11:18:13.245359 [INFO] Checking if logs need forced rotation
2024/11/30 11:18:13.245372 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:18:13.718522 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:18:14.220410 [INFO] Generating rsyslog config from Procfile
2024/11/30 11:18:14.221569 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 11:18:14.608787 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 11:18:14.608810 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 11:18:14.608821 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 11:18:14.967863 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 11:18:14.967881 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 11:18:14.967989 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 11:18:14.967993 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 11:18:14.968006 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 11:18:14.968021 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 11:18:14.968024 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 11:18:14.968029 [INFO] Executing instruction: stop X-Ray
2024/11/30 11:18:14.968032 [INFO] stop X-Ray ...
2024/11/30 11:18:14.968041 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 11:18:14.979185 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 11:18:14.979201 [INFO] Running command: systemctl stop xray.service
2024/11/30 11:18:14.991364 [INFO] Executing instruction: stop proxy
2024/11/30 11:18:14.991377 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 11:18:15.002976 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 11:18:15.002990 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:18:15.014163 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:18:15.024687 [INFO] Running command: systemctl disable nginx.service
2024/11/30 11:18:15.288803 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:15.558007 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:15.567752 [INFO] Executing instruction: FlipApplication
2024/11/30 11:18:15.567765 [INFO] Fetching environment variables...
2024/11/30 11:18:15.567922 [INFO] Purge old process...
2024/11/30 11:18:15.567936 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 11:18:15.586285 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:18:15.601630 [INFO] web.service

2024/11/30 11:18:15.601644 [INFO] deregistering process: web
2024/11/30 11:18:15.601651 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:18:15.610706 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:18:15.617565 [INFO] Running command: systemctl disable web.service
2024/11/30 11:18:15.898763 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 11:18:15.898823 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:16.182797 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:16.190487 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:18:16.197024 [INFO] Process web has been fully terminated
2024/11/30 11:18:16.197035 [INFO] All processes have been fully terminated
2024/11/30 11:18:16.197038 [INFO] Removing /var/app/current/ if it exists
2024/11/30 11:18:16.331260 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 11:18:16.331302 [INFO] Register application processes...
2024/11/30 11:18:16.331306 [INFO] Registering the proc: web

2024/11/30 11:18:16.331315 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:18:16.369273 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:16.630091 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:16.638742 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 11:18:16.645744 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 11:18:16.910068 [INFO] Running command: systemctl start eb-app.target
2024/11/30 11:18:16.920668 [INFO] Running command: systemctl enable web.service
2024/11/30 11:18:17.181976 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 11:18:17.181995 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:18:17.193879 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:18:17.201518 [INFO] Running command: systemctl start web.service
2024/11/30 11:18:17.264131 [INFO] Executing instruction: start X-Ray
2024/11/30 11:18:17.264144 [INFO] X-Ray is not enabled.
2024/11/30 11:18:17.264147 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 11:18:17.264163 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 11:18:17.302326 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 11:18:17.302523 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 11:18:17.305941 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:18:17.330821 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:18:17.793830 [INFO] Running command: systemctl reset-failed
2024/11/30 11:18:17.813490 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:18:17.827727 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:18:17.844894 [INFO] Running command: systemctl start nginx.service
2024/11/30 11:18:18.034404 [INFO] Executing instruction: configureSqsd
2024/11/30 11:18:18.034419 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 11:18:18.034422 [INFO] Executing instruction: startSqsd
2024/11/30 11:18:18.034425 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 11:18:18.034428 [INFO] Executing instruction: Track pids in healthd
2024/11/30 11:18:18.034432 [INFO] This is an enhanced health env...
2024/11/30 11:18:18.034440 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 11:18:18.054830 [INFO] cfn-hup.service nginx.service healthd.service

2024/11/30 11:18:18.054851 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:18:18.074896 [INFO] web.service

2024/11/30 11:18:18.075093 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 11:18:18.075143 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 11:18:18.075156 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 11:18:18.075159 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 11:18:18.075163 [INFO] Executing cleanup logic
2024/11/30 11:18:18.075237 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732965491636,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732965498075,"severity":"INFO"}]}]}

2024/11/30 11:18:18.075442 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 11:20:06.979466 [INFO] Starting...
2024/11/30 11:20:06.979499 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:20:06.979516 [INFO] reading event message file
2024/11/30 11:20:06.979627 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:20:07.048534 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:20:07.357269 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:20:07.645480 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 11:20:07.645493 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:20:07.645496 [INFO] Engine command: (tail-log)

2024/11/30 11:20:07.645532 [INFO] Executing instruction: GetTailLogs
2024/11/30 11:20:07.645536 [INFO] Tail Logs...
2024/11/30 11:20:07.646186 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 11:20:07.649859 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 11:20:07.651677 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 11:20:07.653090 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 11:20:07.656748 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 11:20:07.747963 [INFO] Executing cleanup logic
2024/11/30 11:20:07.748046 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732965607747,"severity":"INFO"}]}]}

2024/11/30 11:20:07.748130 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 11:34:39.160052 [INFO] Starting...
2024/11/30 11:34:39.160087 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:34:39.160108 [INFO] reading event message file
2024/11/30 11:34:39.160226 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:34:39.245272 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:34:39.538694 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:34:39.817273 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/11/30 11:34:39.817285 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:34:39.817287 [INFO] Engine command: (restart-app-server)

2024/11/30 11:34:39.817303 [INFO] Using manifest file name from command request
2024/11/30 11:34:39.817308 [INFO] Unable to get version manifest file.
2024/11/30 11:34:39.817310 [INFO] Downloading latest manifest available.
2024/11/30 11:34:39.817316 [INFO] Download latest app version manifest
2024/11/30 11:34:39.817394 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 11:34:39.857219 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732965463099

2024/11/30 11:34:39.857530 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732965463099
2024/11/30 11:34:39.873290 [INFO] Download successful104bytes downloaded
2024/11/30 11:34:39.873414 [INFO] Trying to read and parse version manifest...
2024/11/30 11:34:39.873455 [INFO] Executing instruction: stopSqsd
2024/11/30 11:34:39.873459 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:34:39.873461 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:34:39.873464 [INFO] X-Ray is not enabled.
2024/11/30 11:34:39.873467 [INFO] Executing instruction: stop X-Ray
2024/11/30 11:34:39.873470 [INFO] stop X-Ray ...
2024/11/30 11:34:39.873476 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 11:34:39.887363 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 11:34:39.887377 [INFO] Running command: systemctl stop xray.service
2024/11/30 11:34:39.898455 [INFO] Executing instruction: start X-Ray
2024/11/30 11:34:39.898465 [INFO] X-Ray is not enabled.
2024/11/30 11:34:39.898468 [INFO] Executing instruction: RestartAppServer
2024/11/30 11:34:39.898471 [INFO] Restarting customer application...
2024/11/30 11:34:39.898479 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:34:39.907170 [INFO] Running command: systemctl stop nginx.service
2024/11/30 11:34:40.017457 [INFO] Running command: systemctl restart eb-app.target
2024/11/30 11:34:40.034225 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:34:40.048313 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:34:40.064560 [INFO] Running command: systemctl start nginx.service
2024/11/30 11:34:40.245874 [INFO] Executing instruction: configureSqsd
2024/11/30 11:34:40.245887 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 11:34:40.245890 [INFO] Executing instruction: startSqsd
2024/11/30 11:34:40.245893 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 11:34:40.245896 [INFO] Executing instruction: Track pids in healthd
2024/11/30 11:34:40.245899 [INFO] This is an enhanced health env...
2024/11/30 11:34:40.245909 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 11:34:40.256126 [INFO] cfn-hup.service nginx.service healthd.service

2024/11/30 11:34:40.256142 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:34:40.264635 [INFO] web.service

2024/11/30 11:34:40.264795 [INFO] Executing cleanup logic
2024/11/30 11:34:40.264880 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732966480264,"severity":"INFO"}]}]}

2024/11/30 11:34:40.264902 [INFO] Platform Engine finished execution on command: restart-app-server

2024/11/30 11:35:43.626586 [INFO] Starting...
2024/11/30 11:35:43.626617 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:35:43.626633 [INFO] reading event message file
2024/11/30 11:35:43.626749 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:35:43.693249 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:35:44.000996 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:35:44.294712 [INFO] checking whether command tail-log is applicable to this instance...
2024/11/30 11:35:44.294723 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:35:44.294726 [INFO] Engine command: (tail-log)

2024/11/30 11:35:44.294776 [INFO] Executing instruction: GetTailLogs
2024/11/30 11:35:44.294779 [INFO] Tail Logs...
2024/11/30 11:35:44.295378 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/11/30 11:35:44.297203 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/11/30 11:35:44.299628 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/11/30 11:35:44.301334 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/11/30 11:35:44.302768 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/11/30 11:35:44.394325 [INFO] Executing cleanup logic
2024/11/30 11:35:44.394390 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1732966544394,"severity":"INFO"}]}]}

2024/11/30 11:35:44.394481 [INFO] Platform Engine finished execution on command: tail-log

2024/11/30 11:44:32.508008 [INFO] Starting...
2024/11/30 11:44:32.508041 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 11:44:32.508058 [INFO] reading event message file
2024/11/30 11:44:32.508174 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 11:44:32.576746 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:44:32.889755 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:44:33.189262 [INFO] checking whether command app-deploy is applicable to this instance...
2024/11/30 11:44:33.189273 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 11:44:33.189276 [INFO] Engine command: (app-deploy)

2024/11/30 11:44:33.189280 [INFO] Downloading EB Application...
2024/11/30 11:44:33.189295 [INFO] Region: us-east-1
2024/11/30 11:44:33.189298 [INFO] envID: e-phgumpyagn
2024/11/30 11:44:33.189300 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/11/30 11:44:33.189303 [INFO] Using manifest file name from command request
2024/11/30 11:44:33.189308 [INFO] Manifest name is : manifest_1732967070100
2024/11/30 11:44:33.189310 [INFO] Download app version manifest
2024/11/30 11:44:33.189411 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732967070100
2024/11/30 11:44:33.220890 [INFO] Download successful104bytes downloaded
2024/11/30 11:44:33.221033 [INFO] Trying to read and parse version manifest...
2024/11/30 11:44:33.225396 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-9381-241130_064410712879
2024/11/30 11:44:34.846154 [INFO] Download successful88683111bytes downloaded
2024/11/30 11:44:34.846333 [INFO] Executing instruction: ElectLeader
2024/11/30 11:44:34.846338 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/11/30 11:44:34.846341 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/11/30 11:44:34.846351 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id eb652b1b-7db0-465b-b0ed-64340831ad09 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/11/30 11:44:35.105230 [INFO] Instance is Leader.
2024/11/30 11:44:35.105277 [INFO] Executing instruction: stopSqsd
2024/11/30 11:44:35.105282 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 11:44:35.105285 [INFO] Executing instruction: PreBuildEbExtension
2024/11/30 11:44:35.105288 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/11/30 11:44:35.105299 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/11/30 11:44:35.397893 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/11/30 11:44:35.397936 [INFO] Executing instruction: StageApplication
2024/11/30 11:44:35.397940 [INFO] Recreating /var/app/staging/
2024/11/30 11:44:35.398034 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 11:44:35.398044 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 11:44:37.463501 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 11:44:37.553423 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/11/30 11:44:37.553449 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/11/30 11:44:37.553462 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/11/30 11:44:37.553465 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/11/30 11:44:37.553469 [INFO] Executing instruction: InstallDependency
2024/11/30 11:44:37.553476 [INFO] checking dependencies file
2024/11/30 11:44:37.553487 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 11:44:37.553496 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 11:44:40.178481 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 11:44:40.178538 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 11:44:40.178545 [INFO] Executing instruction: check Procfile
2024/11/30 11:44:40.178588 [INFO] detected Procfile in application source bundle ...
2024/11/30 11:44:40.178594 [INFO] Executing instruction: configure X-Ray
2024/11/30 11:44:40.178598 [INFO] X-Ray is not enabled.
2024/11/30 11:44:40.178601 [INFO] Executing instruction: configure proxy server
2024/11/30 11:44:40.178616 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 11:44:40.191358 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 11:44:40.200918 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 11:44:40.203520 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:44:40.219150 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 11:44:40.219164 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:44:40.226731 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:44:40.235024 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:44:40.242684 [INFO] Running command: systemctl stop healthd.service
2024/11/30 11:44:40.315158 [INFO] Running command: systemctl disable healthd.service
2024/11/30 11:44:40.584835 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 11:44:40.584937 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:40.853844 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:40.865742 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:41.145343 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:41.152486 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 11:44:41.159142 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 11:44:41.422023 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 11:44:41.433219 [INFO] Running command: systemctl enable healthd.service
2024/11/30 11:44:41.691735 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 11:44:41.691755 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 11:44:41.703102 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 11:44:41.709105 [INFO] Running command: systemctl start healthd.service
2024/11/30 11:44:41.766892 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 11:44:41.768238 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 11:44:41.769314 [INFO] Executing instruction: configure log streaming
2024/11/30 11:44:41.769322 [INFO] log streaming is not enabled
2024/11/30 11:44:41.769325 [INFO] disable log stream
2024/11/30 11:44:41.769333 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 11:44:41.791591 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 11:44:41.807040 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 11:44:41.807052 [INFO] Checking if logs need forced rotation
2024/11/30 11:44:41.807063 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 11:44:42.293289 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 11:44:42.815840 [INFO] Generating rsyslog config from Procfile
2024/11/30 11:44:42.818367 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 11:44:42.942744 [INFO] Executing instruction: PostBuildEbExtension
2024/11/30 11:44:42.942768 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/11/30 11:44:42.942779 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/11/30 11:44:43.296601 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/11/30 11:44:43.296622 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 11:44:43.296733 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 11:44:43.296737 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/11/30 11:44:43.296749 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/11/30 11:44:43.296762 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/11/30 11:44:43.296765 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/11/30 11:44:43.296769 [INFO] Executing instruction: stop X-Ray
2024/11/30 11:44:43.296772 [INFO] stop X-Ray ...
2024/11/30 11:44:43.296780 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 11:44:43.307521 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 11:44:43.307541 [INFO] Running command: systemctl stop xray.service
2024/11/30 11:44:43.320563 [INFO] Executing instruction: stop proxy
2024/11/30 11:44:43.320579 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 11:44:43.331543 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 11:44:43.331558 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:44:43.343752 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:44:43.350411 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:44:43.359006 [INFO] Running command: systemctl stop nginx.service
2024/11/30 11:44:43.467291 [INFO] Running command: systemctl disable nginx.service
2024/11/30 11:44:43.731133 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:43.986225 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:43.995276 [INFO] Executing instruction: FlipApplication
2024/11/30 11:44:43.995289 [INFO] Fetching environment variables...
2024/11/30 11:44:43.995457 [INFO] Purge old process...
2024/11/30 11:44:43.995471 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 11:44:44.014126 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:44:44.035293 [INFO] web.service

2024/11/30 11:44:44.035322 [INFO] deregistering process: web
2024/11/30 11:44:44.035330 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:44:44.051363 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:44:44.059327 [INFO] Running command: systemctl disable web.service
2024/11/30 11:44:44.395605 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 11:44:44.395675 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:44.687034 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:44.694468 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:44:44.701910 [INFO] Process web has been fully terminated
2024/11/30 11:44:44.701918 [INFO] All processes have been fully terminated
2024/11/30 11:44:44.701921 [INFO] Removing /var/app/current/ if it exists
2024/11/30 11:44:44.836350 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 11:44:44.836377 [INFO] Register application processes...
2024/11/30 11:44:44.836381 [INFO] Registering the proc: web

2024/11/30 11:44:44.836391 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:44:44.888035 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:45.148843 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:45.157404 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 11:44:45.163875 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 11:44:45.430337 [INFO] Running command: systemctl start eb-app.target
2024/11/30 11:44:45.440964 [INFO] Running command: systemctl enable web.service
2024/11/30 11:44:45.698607 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 11:44:45.698631 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 11:44:45.709105 [INFO] Running command: systemctl is-active web.service
2024/11/30 11:44:45.716463 [INFO] Running command: systemctl start web.service
2024/11/30 11:44:45.782530 [INFO] Executing instruction: start X-Ray
2024/11/30 11:44:45.782545 [INFO] X-Ray is not enabled.
2024/11/30 11:44:45.782549 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 11:44:45.782564 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 11:44:45.814998 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 11:44:45.815189 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 11:44:45.817775 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:44:45.849857 [INFO] Running command: systemctl daemon-reload
2024/11/30 11:44:46.309548 [INFO] Running command: systemctl reset-failed
2024/11/30 11:44:46.323290 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 11:44:46.338219 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 11:44:46.356299 [INFO] Running command: systemctl start nginx.service
2024/11/30 11:44:46.555822 [INFO] Executing instruction: configureSqsd
2024/11/30 11:44:46.555835 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 11:44:46.555838 [INFO] Executing instruction: startSqsd
2024/11/30 11:44:46.555841 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 11:44:46.555844 [INFO] Executing instruction: Track pids in healthd
2024/11/30 11:44:46.555861 [INFO] This is an enhanced health env...
2024/11/30 11:44:46.555869 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 11:44:46.575667 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 11:44:46.575688 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 11:44:46.594986 [INFO] web.service

2024/11/30 11:44:46.595183 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/11/30 11:44:46.595238 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/11/30 11:44:46.595251 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/11/30 11:44:46.595254 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/11/30 11:44:46.595262 [INFO] Executing cleanup logic
2024/11/30 11:44:46.596500 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732967080178,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732967086595,"severity":"INFO"}]}]}

2024/11/30 11:44:46.596726 [INFO] Platform Engine finished execution on command: app-deploy

2024/11/30 12:14:45.902816 [INFO] Starting...
2024/11/30 12:14:45.902850 [INFO] Starting EBPlatform-PlatformEngine
2024/11/30 12:14:45.902867 [INFO] reading event message file
2024/11/30 12:14:45.903037 [INFO] Engine received EB command cfn-hup-exec

2024/11/30 12:14:45.980894 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 12:14:46.320158 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 12:14:46.636411 [INFO] checking whether command config-deploy is applicable to this instance...
2024/11/30 12:14:46.636423 [INFO] this command is applicable to the instance, thus instance should execute command
2024/11/30 12:14:46.636426 [INFO] Engine command: (config-deploy)

2024/11/30 12:14:46.636431 [INFO] Using manifest file name from command request
2024/11/30 12:14:46.636437 [INFO] Unable to get version manifest file.
2024/11/30 12:14:46.636439 [INFO] Downloading latest manifest available.
2024/11/30 12:14:46.636442 [INFO] Download latest app version manifest
2024/11/30 12:14:46.636522 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/11/30 12:14:46.707750 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732968864752

2024/11/30 12:14:46.708054 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1732968864752
2024/11/30 12:14:46.726513 [INFO] Download successful150bytes downloaded
2024/11/30 12:14:46.726636 [INFO] Trying to read and parse version manifest...
2024/11/30 12:14:46.726780 [INFO] Executing instruction: stopSqsd
2024/11/30 12:14:46.726784 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/11/30 12:14:46.726787 [INFO] Executing instruction: StageApplication
2024/11/30 12:14:46.726790 [INFO] Recreating /var/app/staging/
2024/11/30 12:14:46.726847 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/11/30 12:14:46.726855 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/11/30 12:14:48.798032 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/11/30 12:14:48.863721 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2024/11/30 12:14:48.863748 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2024/11/30 12:14:48.863762 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2024/11/30 12:14:48.863764 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2024/11/30 12:14:48.863769 [INFO] Executing instruction: InstallDependency
2024/11/30 12:14:48.863773 [INFO] checking dependencies file
2024/11/30 12:14:48.863784 [INFO] Installing dependencies with requirements.txt by using Pip
2024/11/30 12:14:48.863795 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/11/30 12:14:51.524223 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic>=0.8.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.40.0)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (1.23.8)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (1.0.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (5.2.0)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (4.0.8)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (0.0.6)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (3.0.1)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (21.2.0)
Requirement already satisfied: Werkzeug>=3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.3)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 6)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 8)) (1.23.7)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: typing-extensions in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 9)) (4.12.2)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 11)) (11.0.0)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.11.8)
Requirement already satisfied: anyio<4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (3.7.1)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (1.26.4)
Requirement already satisfied: pydantic<3,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.10.2)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 12)) (2.32.3)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 15)) (24.2)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: jiter<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (0.8.0)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic>=0.8.1->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 12)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4.0->langchain==0.0.300->-r requirements.txt (line 12)) (3.10)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic>=0.8.1->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: MarkupSafe>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Jinja2>=3.1.2->Flask==3.0.0->-r requirements.txt (line 1)) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 12)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1->langchain==0.0.300->-r requirements.txt (line 12)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (3.4.0)
Requirement already satisfied: urllib3<3,>=1.21.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 12)) (2.2.3)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 12)) (3.1.1)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 12)) (1.0.0)

2024/11/30 12:14:51.524271 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/11/30 12:14:51.524279 [INFO] Executing instruction: check Procfile
2024/11/30 12:14:51.524322 [INFO] detected Procfile in application source bundle ...
2024/11/30 12:14:51.524330 [INFO] Executing instruction: configure X-Ray
2024/11/30 12:14:51.524335 [INFO] X-Ray is not enabled.
2024/11/30 12:14:51.524338 [INFO] Executing instruction: configure proxy server
2024/11/30 12:14:51.524354 [INFO] Recreating /var/proxy/staging/nginx
2024/11/30 12:14:51.531383 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/11/30 12:14:51.546571 [INFO] Executing instruction: configure healthd specific proxy conf
2024/11/30 12:14:51.549035 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 12:14:51.599722 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/11/30 12:14:51.599748 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 12:14:51.607814 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 12:14:51.614661 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 12:14:51.622102 [INFO] Running command: systemctl stop healthd.service
2024/11/30 12:14:51.734734 [INFO] Running command: systemctl disable healthd.service
2024/11/30 12:14:52.040121 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/11/30 12:14:52.040906 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:52.306823 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:52.318750 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:52.581768 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:52.590337 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/11/30 12:14:52.596968 [INFO] Running command: systemctl enable aws-eb.target
2024/11/30 12:14:52.859569 [INFO] Running command: systemctl start aws-eb.target
2024/11/30 12:14:52.867867 [INFO] Running command: systemctl enable healthd.service
2024/11/30 12:14:53.133272 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/11/30 12:14:53.133293 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/11/30 12:14:53.142750 [INFO] Running command: systemctl is-active healthd.service
2024/11/30 12:14:53.149213 [INFO] Running command: systemctl start healthd.service
2024/11/30 12:14:53.198729 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/11/30 12:14:53.199724 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/11/30 12:14:53.200721 [INFO] Executing instruction: GetSetupProxyLog
2024/11/30 12:14:53.200872 [INFO] Executing instruction: configure log streaming
2024/11/30 12:14:53.200878 [INFO] log streaming is not enabled
2024/11/30 12:14:53.200881 [INFO] disable log stream
2024/11/30 12:14:53.200889 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/11/30 12:14:53.214531 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/11/30 12:14:53.232595 [INFO] Executing instruction: GetToggleForceRotate
2024/11/30 12:14:53.232606 [INFO] Checking if logs need forced rotation
2024/11/30 12:14:53.232616 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/11/30 12:14:53.779495 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/11/30 12:14:54.266022 [INFO] Generating rsyslog config from Procfile
2024/11/30 12:14:54.267569 [INFO] Running command: systemctl restart rsyslog.service
2024/11/30 12:14:54.611814 [INFO] Executing instruction: CleanEbExtensions
2024/11/30 12:14:54.611926 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/11/30 12:14:54.611931 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2024/11/30 12:14:54.611942 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2024/11/30 12:14:54.611955 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2024/11/30 12:14:54.611958 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2024/11/30 12:14:54.611962 [INFO] Executing instruction: stop X-Ray
2024/11/30 12:14:54.611965 [INFO] stop X-Ray ...
2024/11/30 12:14:54.611973 [INFO] Running command: systemctl show -p PartOf xray.service
2024/11/30 12:14:54.638008 [WARN] stopProcess Warning: process xray is not registered 
2024/11/30 12:14:54.638023 [INFO] Running command: systemctl stop xray.service
2024/11/30 12:14:54.651041 [INFO] Executing instruction: stop proxy
2024/11/30 12:14:54.651054 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/11/30 12:14:54.662774 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/11/30 12:14:54.662790 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 12:14:54.674385 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 12:14:54.681026 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 12:14:54.690228 [INFO] Running command: systemctl stop nginx.service
2024/11/30 12:14:54.799199 [INFO] Running command: systemctl disable nginx.service
2024/11/30 12:14:55.062937 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:55.320921 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:55.329264 [INFO] Executing instruction: FlipApplication
2024/11/30 12:14:55.329275 [INFO] Fetching environment variables...
2024/11/30 12:14:55.329483 [INFO] Purge old process...
2024/11/30 12:14:55.329528 [INFO] Running command: systemctl stop eb-app.target
2024/11/30 12:14:55.340713 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 12:14:55.350146 [INFO] web.service

2024/11/30 12:14:55.350157 [INFO] deregistering process: web
2024/11/30 12:14:55.350164 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 12:14:55.359816 [INFO] Running command: systemctl is-active web.service
2024/11/30 12:14:55.365915 [INFO] Running command: systemctl disable web.service
2024/11/30 12:14:55.629097 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/11/30 12:14:55.629156 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:55.889661 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:55.897462 [INFO] Running command: systemctl is-active web.service
2024/11/30 12:14:55.903699 [INFO] Process web has not been fully terminated
2024/11/30 12:14:55.903709 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/11/30 12:14:56.903806 [INFO] Running command: systemctl is-active web.service
2024/11/30 12:14:56.910741 [INFO] Process web has been fully terminated
2024/11/30 12:14:56.910751 [INFO] All processes have been fully terminated
2024/11/30 12:14:56.910755 [INFO] Removing /var/app/current/ if it exists
2024/11/30 12:14:57.042459 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/11/30 12:14:57.042486 [INFO] Register application processes...
2024/11/30 12:14:57.042492 [INFO] Registering the proc: web

2024/11/30 12:14:57.042501 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 12:14:57.079284 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:57.336712 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:57.343295 [INFO] Running command: systemctl is-enabled eb-app.target
2024/11/30 12:14:57.350228 [INFO] Running command: systemctl enable eb-app.target
2024/11/30 12:14:57.605472 [INFO] Running command: systemctl start eb-app.target
2024/11/30 12:14:57.619792 [INFO] Running command: systemctl enable web.service
2024/11/30 12:14:57.883114 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/11/30 12:14:57.883133 [INFO] Running command: systemctl show -p PartOf web.service
2024/11/30 12:14:57.894302 [INFO] Running command: systemctl is-active web.service
2024/11/30 12:14:57.901381 [INFO] Running command: systemctl start web.service
2024/11/30 12:14:57.966156 [INFO] Executing instruction: start X-Ray
2024/11/30 12:14:57.966169 [INFO] X-Ray is not enabled.
2024/11/30 12:14:57.966172 [INFO] Executing instruction: start proxy with new configuration
2024/11/30 12:14:57.966187 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/11/30 12:14:58.013355 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/11/30 12:14:58.013546 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/11/30 12:14:58.015926 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 12:14:58.039773 [INFO] Running command: systemctl daemon-reload
2024/11/30 12:14:58.473259 [INFO] Running command: systemctl reset-failed
2024/11/30 12:14:58.488034 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/11/30 12:14:58.503935 [INFO] Running command: systemctl is-active nginx.service
2024/11/30 12:14:58.517376 [INFO] Running command: systemctl start nginx.service
2024/11/30 12:14:58.687985 [INFO] Executing instruction: configureSqsd
2024/11/30 12:14:58.687998 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/11/30 12:14:58.688002 [INFO] Executing instruction: startSqsd
2024/11/30 12:14:58.688004 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/11/30 12:14:58.688007 [INFO] Executing instruction: Track pids in healthd
2024/11/30 12:14:58.688010 [INFO] This is an enhanced health env...
2024/11/30 12:14:58.688018 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/11/30 12:14:58.705727 [INFO] cfn-hup.service healthd.service nginx.service

2024/11/30 12:14:58.705745 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/11/30 12:14:58.720580 [INFO] web.service

2024/11/30 12:14:58.721207 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2024/11/30 12:14:58.721223 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2024/11/30 12:14:58.721234 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2024/11/30 12:14:58.721237 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2024/11/30 12:14:58.721241 [INFO] Executing cleanup logic
2024/11/30 12:14:58.721328 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1732968891524,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1732968898721,"severity":"INFO"}]}]}

2024/11/30 12:14:58.721514 [INFO] Platform Engine finished execution on command: config-deploy

2024/12/01 03:15:34.569240 [INFO] Starting...
2024/12/01 03:15:34.569277 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 03:15:34.569293 [INFO] reading event message file
2024/12/01 03:15:34.570640 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 03:15:34.685151 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 03:15:34.986761 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 03:15:35.275294 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 03:15:35.275305 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 03:15:35.275308 [INFO] Engine command: (app-deploy)

2024/12/01 03:15:35.275313 [INFO] Downloading EB Application...
2024/12/01 03:15:35.275316 [INFO] Region: us-east-1
2024/12/01 03:15:35.275318 [INFO] envID: e-phgumpyagn
2024/12/01 03:15:35.275321 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 03:15:35.275324 [INFO] Using manifest file name from command request
2024/12/01 03:15:35.275329 [INFO] Manifest name is : manifest_1733022912858
2024/12/01 03:15:35.275331 [INFO] Download app version manifest
2024/12/01 03:15:35.275437 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733022912858
2024/12/01 03:15:35.325680 [INFO] Download successful104bytes downloaded
2024/12/01 03:15:35.325829 [INFO] Trying to read and parse version manifest...
2024/12/01 03:15:35.328784 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-729c-241130_221401946567
2024/12/01 03:15:36.474146 [INFO] Download successful88729524bytes downloaded
2024/12/01 03:15:36.475700 [INFO] Executing instruction: ElectLeader
2024/12/01 03:15:36.475707 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 03:15:36.475711 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 03:15:36.475721 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id d5a6905e-6a24-41e0-ad5c-a36562e77cb2 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 03:15:36.764090 [INFO] Instance is Leader.
2024/12/01 03:15:36.764136 [INFO] Executing instruction: stopSqsd
2024/12/01 03:15:36.764140 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 03:15:36.764144 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 03:15:36.764147 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 03:15:36.764158 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 03:15:37.101780 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 03:15:37.101794 [INFO] Executing instruction: StageApplication
2024/12/01 03:15:37.101798 [INFO] Recreating /var/app/staging/
2024/12/01 03:15:37.101879 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 03:15:37.101889 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 03:15:39.096316 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 03:15:39.160280 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 03:15:39.160311 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 03:15:39.160327 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 03:15:39.160330 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 03:15:39.160335 [INFO] Executing instruction: InstallDependency
2024/12/01 03:15:39.160357 [INFO] checking dependencies file
2024/12/01 03:15:39.160368 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 03:15:39.160376 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 03:15:47.436895 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Collecting anthropic==0.7.7
  Downloading anthropic-0.7.7-py3-none-any.whl (808 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 808.1/808.1 kB 30.1 MB/s eta 0:00:00
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Collecting Werkzeug==3.0.1
  Downloading werkzeug-3.0.1-py3-none-any.whl (226 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 226.7/226.7 kB 40.2 MB/s eta 0:00:00
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (3.0.1)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (1.0.1)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (4.0.8)
Collecting Flask-Session==0.5.0
  Downloading flask_session-0.5.0-py3-none-any.whl (7.2 kB)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (21.2.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Collecting boto3==1.34.11
  Downloading boto3-1.34.11-py3-none-any.whl (139 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 139.3/139.3 kB 38.1 MB/s eta 0:00:00
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (2.10.2)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.3.1)
Collecting tokenizers>=0.13.0
  Downloading tokenizers-0.21.0-cp39-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.0/3.0 MB 66.4 MB/s eta 0:00:00
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (4.12.2)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==3.0.1->-r requirements.txt (line 5)) (3.0.2)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 7)) (5.3.0)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 8)) (11.0.0)
Collecting cachelib
  Downloading cachelib-0.13.0-py3-none-any.whl (20 kB)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 10)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Collecting botocore<1.35.0,>=1.34.11
  Downloading botocore-1.34.162-py3-none-any.whl (12.5 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.5/12.5 MB 69.8 MB/s eta 0:00:00
Collecting jmespath<2.0.0,>=0.7.1
  Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)
Collecting s3transfer<0.11.0,>=0.10.0
  Downloading s3transfer-0.10.4-py3-none-any.whl (83 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 83.2/83.2 kB 25.7 MB/s eta 0:00:00
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.7.7->-r requirements.txt (line 3)) (3.10)
Collecting python-dateutil<3.0.0,>=2.1
  Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 229.9/229.9 kB 57.5 MB/s eta 0:00:00
Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (2.2.3)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Collecting huggingface-hub<1.0,>=0.16.4
  Downloading huggingface_hub-0.26.3-py3-none-any.whl (447 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 447.6/447.6 kB 64.5 MB/s eta 0:00:00
Collecting filelock
  Downloading filelock-3.16.1-py3-none-any.whl (16 kB)
Collecting fsspec>=2023.5.0
  Downloading fsspec-2024.10.0-py3-none-any.whl (179 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 179.6/179.6 kB 26.4 MB/s eta 0:00:00
Collecting tqdm>=4.42.1
  Downloading tqdm-4.67.1-py3-none-any.whl (78 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.5/78.5 kB 14.9 MB/s eta 0:00:00
Collecting six>=1.5
  Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)
Installing collected packages: Werkzeug, tqdm, six, jmespath, fsspec, filelock, cachelib, python-dateutil, huggingface-hub, tokenizers, Flask-Session, botocore, s3transfer, anthropic, boto3
  Attempting uninstall: Werkzeug
    Found existing installation: Werkzeug 3.1.3
    Uninstalling Werkzeug-3.1.3:
      Successfully uninstalled Werkzeug-3.1.3
  Attempting uninstall: anthropic
    Found existing installation: anthropic 0.40.0
    Uninstalling anthropic-0.40.0:
      Successfully uninstalled anthropic-0.40.0
Successfully installed Flask-Session-0.5.0 Werkzeug-3.0.1 anthropic-0.7.7 boto3-1.34.11 botocore-1.34.162 cachelib-0.13.0 filelock-3.16.1 fsspec-2024.10.0 huggingface-hub-0.26.3 jmespath-1.0.1 python-dateutil-2.9.0.post0 s3transfer-0.10.4 six-1.16.0 tokenizers-0.21.0 tqdm-4.67.1

2024/12/01 03:15:47.438139 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 03:15:47.438148 [INFO] Executing instruction: check Procfile
2024/12/01 03:15:47.439094 [INFO] detected Procfile in application source bundle ...
2024/12/01 03:15:47.439103 [INFO] Executing instruction: configure X-Ray
2024/12/01 03:15:47.439107 [INFO] X-Ray is not enabled.
2024/12/01 03:15:47.439110 [INFO] Executing instruction: configure proxy server
2024/12/01 03:15:47.439130 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 03:15:47.446729 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 03:15:47.463488 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 03:15:47.466198 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 03:15:47.521729 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 03:15:47.521750 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 03:15:47.532724 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 03:15:47.544528 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 03:15:47.554324 [INFO] Running command: systemctl stop healthd.service
2024/12/01 03:15:47.614715 [INFO] Running command: systemctl disable healthd.service
2024/12/01 03:15:47.918498 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 03:15:47.918587 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:48.220997 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:48.232058 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:48.502097 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:48.509317 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 03:15:48.517488 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 03:15:48.780426 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 03:15:48.789773 [INFO] Running command: systemctl enable healthd.service
2024/12/01 03:15:49.047650 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 03:15:49.047670 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 03:15:49.059129 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 03:15:49.065802 [INFO] Running command: systemctl start healthd.service
2024/12/01 03:15:49.128010 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 03:15:49.129244 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 03:15:49.129920 [INFO] Executing instruction: configure log streaming
2024/12/01 03:15:49.129931 [INFO] log streaming is not enabled
2024/12/01 03:15:49.129934 [INFO] disable log stream
2024/12/01 03:15:49.129942 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 03:15:49.142378 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 03:15:49.160299 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 03:15:49.160310 [INFO] Checking if logs need forced rotation
2024/12/01 03:15:49.160320 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 03:15:49.653578 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 03:15:50.162236 [INFO] Generating rsyslog config from Procfile
2024/12/01 03:15:50.165093 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 03:15:50.610519 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 03:15:50.610553 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 03:15:50.610578 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 03:15:51.021864 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 03:15:51.021879 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 03:15:51.021988 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 03:15:51.021993 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 03:15:51.022005 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 03:15:51.022017 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/12/01 03:15:51.022020 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 03:15:51.022024 [INFO] Executing instruction: stop X-Ray
2024/12/01 03:15:51.022027 [INFO] stop X-Ray ...
2024/12/01 03:15:51.022036 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 03:15:51.035241 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 03:15:51.035256 [INFO] Running command: systemctl stop xray.service
2024/12/01 03:15:51.048224 [INFO] Executing instruction: stop proxy
2024/12/01 03:15:51.048239 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 03:15:51.060297 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 03:15:51.060313 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 03:15:51.071960 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 03:15:51.078802 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 03:15:51.087595 [INFO] Running command: systemctl stop nginx.service
2024/12/01 03:15:51.188666 [INFO] Running command: systemctl disable nginx.service
2024/12/01 03:15:51.450699 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:51.712433 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:51.720961 [INFO] Executing instruction: FlipApplication
2024/12/01 03:15:51.720971 [INFO] Fetching environment variables...
2024/12/01 03:15:51.721203 [INFO] Purge old process...
2024/12/01 03:15:51.721220 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 03:15:51.730141 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 03:15:51.739070 [INFO] web.service

2024/12/01 03:15:51.739082 [INFO] deregistering process: web
2024/12/01 03:15:51.739088 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 03:15:51.748253 [INFO] Running command: systemctl is-active web.service
2024/12/01 03:15:51.756564 [INFO] Running command: systemctl disable web.service
2024/12/01 03:15:52.033178 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 03:15:52.033275 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:52.330967 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:52.343684 [INFO] Running command: systemctl is-active web.service
2024/12/01 03:15:52.363225 [INFO] Process web has not been fully terminated
2024/12/01 03:15:52.363242 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 03:15:53.363331 [INFO] Running command: systemctl is-active web.service
2024/12/01 03:15:53.370695 [INFO] Process web has been fully terminated
2024/12/01 03:15:53.370705 [INFO] All processes have been fully terminated
2024/12/01 03:15:53.370709 [INFO] Removing /var/app/current/ if it exists
2024/12/01 03:15:53.536868 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 03:15:53.536896 [INFO] Register application processes...
2024/12/01 03:15:53.536901 [INFO] Registering the proc: web

2024/12/01 03:15:53.536911 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 03:15:53.575162 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:53.845484 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:53.852989 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 03:15:53.859830 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 03:15:54.116071 [INFO] Running command: systemctl start eb-app.target
2024/12/01 03:15:54.125477 [INFO] Running command: systemctl enable web.service
2024/12/01 03:15:54.384101 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 03:15:54.384120 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 03:15:54.395489 [INFO] Running command: systemctl is-active web.service
2024/12/01 03:15:54.403013 [INFO] Running command: systemctl start web.service
2024/12/01 03:15:54.465964 [INFO] Executing instruction: start X-Ray
2024/12/01 03:15:54.465977 [INFO] X-Ray is not enabled.
2024/12/01 03:15:54.465981 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 03:15:54.465995 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 03:15:54.504864 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 03:15:54.505058 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 03:15:54.509119 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 03:15:54.534494 [INFO] Running command: systemctl daemon-reload
2024/12/01 03:15:54.984487 [INFO] Running command: systemctl reset-failed
2024/12/01 03:15:55.003631 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 03:15:55.019672 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 03:15:55.037530 [INFO] Running command: systemctl start nginx.service
2024/12/01 03:15:55.240816 [INFO] Executing instruction: configureSqsd
2024/12/01 03:15:55.240828 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 03:15:55.240831 [INFO] Executing instruction: startSqsd
2024/12/01 03:15:55.240834 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 03:15:55.240837 [INFO] Executing instruction: Track pids in healthd
2024/12/01 03:15:55.240840 [INFO] This is an enhanced health env...
2024/12/01 03:15:55.240849 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 03:15:55.255508 [INFO] cfn-hup.service nginx.service healthd.service

2024/12/01 03:15:55.255527 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 03:15:55.275326 [INFO] web.service

2024/12/01 03:15:55.275456 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 03:15:55.275469 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 03:15:55.275482 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/12/01 03:15:55.275485 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/12/01 03:15:55.275489 [INFO] Executing cleanup logic
2024/12/01 03:15:55.276915 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733022947439,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1733022955275,"severity":"INFO"}]}]}

2024/12/01 03:15:55.277130 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 10:34:12.707316 [INFO] Starting...
2024/12/01 10:34:12.707415 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 10:34:12.707434 [INFO] reading event message file
2024/12/01 10:34:12.708425 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 10:34:12.820002 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:34:13.258168 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:34:13.566074 [INFO] checking whether command restart-app-server is applicable to this instance...
2024/12/01 10:34:13.566085 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 10:34:13.566089 [INFO] Engine command: (restart-app-server)

2024/12/01 10:34:13.566094 [INFO] Using manifest file name from command request
2024/12/01 10:34:13.566099 [INFO] Unable to get version manifest file.
2024/12/01 10:34:13.566101 [INFO] Downloading latest manifest available.
2024/12/01 10:34:13.566104 [INFO] Download latest app version manifest
2024/12/01 10:34:13.566221 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/12/01 10:34:13.612723 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733022912858

2024/12/01 10:34:13.612892 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733022912858
2024/12/01 10:34:13.631369 [INFO] Download successful104bytes downloaded
2024/12/01 10:34:13.631536 [INFO] Trying to read and parse version manifest...
2024/12/01 10:34:13.632968 [INFO] Executing instruction: stopSqsd
2024/12/01 10:34:13.632979 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 10:34:13.632984 [INFO] Executing instruction: configure X-Ray
2024/12/01 10:34:13.633009 [INFO] X-Ray is not enabled.
2024/12/01 10:34:13.633013 [INFO] Executing instruction: stop X-Ray
2024/12/01 10:34:13.633015 [INFO] stop X-Ray ...
2024/12/01 10:34:13.633023 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 10:34:13.661498 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 10:34:13.661520 [INFO] Running command: systemctl stop xray.service
2024/12/01 10:34:13.682687 [INFO] Executing instruction: start X-Ray
2024/12/01 10:34:13.682706 [INFO] X-Ray is not enabled.
2024/12/01 10:34:13.682709 [INFO] Executing instruction: RestartAppServer
2024/12/01 10:34:13.682712 [INFO] Restarting customer application...
2024/12/01 10:34:13.682722 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:34:13.694852 [INFO] Running command: systemctl stop nginx.service
2024/12/01 10:34:13.778030 [INFO] Running command: systemctl restart eb-app.target
2024/12/01 10:34:13.796082 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:34:13.813508 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 10:34:13.821914 [INFO] Running command: systemctl start nginx.service
2024/12/01 10:34:13.959658 [INFO] Executing instruction: configureSqsd
2024/12/01 10:34:13.959674 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 10:34:13.959677 [INFO] Executing instruction: startSqsd
2024/12/01 10:34:13.959680 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 10:34:13.959683 [INFO] Executing instruction: Track pids in healthd
2024/12/01 10:34:13.959686 [INFO] This is an enhanced health env...
2024/12/01 10:34:13.959695 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 10:34:13.970247 [INFO] cfn-hup.service nginx.service healthd.service

2024/12/01 10:34:13.970265 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 10:34:13.977359 [INFO] web.service

2024/12/01 10:34:13.977483 [INFO] Executing cleanup logic
2024/12/01 10:34:13.977551 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733049253977,"severity":"INFO"}]}]}

2024/12/01 10:34:13.977560 [INFO] Platform Engine finished execution on command: restart-app-server

2024/12/01 10:37:04.018280 [INFO] Starting...
2024/12/01 10:37:04.018314 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 10:37:04.018331 [INFO] reading event message file
2024/12/01 10:37:04.018450 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 10:37:04.089364 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:37:04.389998 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:37:04.676827 [INFO] checking whether command config-deploy is applicable to this instance...
2024/12/01 10:37:04.676837 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 10:37:04.676840 [INFO] Engine command: (config-deploy)

2024/12/01 10:37:04.676845 [INFO] Using manifest file name from command request
2024/12/01 10:37:04.676860 [INFO] Unable to get version manifest file.
2024/12/01 10:37:04.676863 [INFO] Downloading latest manifest available.
2024/12/01 10:37:04.676865 [INFO] Download latest app version manifest
2024/12/01 10:37:04.676945 [INFO] resources/environments/e-phgumpyagn/_runtime/versions/manifest
2024/12/01 10:37:04.736548 [INFO] latestManifest key *: resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733049403044

2024/12/01 10:37:04.736855 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733049403044
2024/12/01 10:37:04.753055 [INFO] Download successful150bytes downloaded
2024/12/01 10:37:04.753199 [INFO] Trying to read and parse version manifest...
2024/12/01 10:37:04.753343 [INFO] Executing instruction: stopSqsd
2024/12/01 10:37:04.753347 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 10:37:04.753350 [INFO] Executing instruction: StageApplication
2024/12/01 10:37:04.753353 [INFO] Recreating /var/app/staging/
2024/12/01 10:37:04.753412 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 10:37:04.753419 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 10:37:06.848093 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 10:37:06.914142 [INFO] Executing instruction: RunConfigDeployPreBuildHooks
2024/12/01 10:37:06.914171 [INFO] Executing platform hooks in .platform/confighooks/prebuild/
2024/12/01 10:37:06.914185 [INFO] The dir .platform/confighooks/prebuild/ does not exist
2024/12/01 10:37:06.914187 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/prebuild
2024/12/01 10:37:06.914192 [INFO] Executing instruction: InstallDependency
2024/12/01 10:37:06.914196 [INFO] checking dependencies file
2024/12/01 10:37:06.914207 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 10:37:06.914215 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 10:37:10.949113 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic==0.7.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.7.7)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: Werkzeug==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (3.0.1)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (3.0.1)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (1.0.1)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (4.0.8)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (21.2.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: boto3==1.34.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 18)) (1.34.11)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (2.10.2)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (4.12.2)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==3.0.1->-r requirements.txt (line 5)) (3.0.2)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 7)) (5.3.0)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 8)) (11.0.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 9)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 10)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (1.34.162)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (0.10.4)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.7.7->-r requirements.txt (line 3)) (3.10)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (2.2.3)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 10:37:10.949156 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 10:37:10.949173 [INFO] Executing instruction: check Procfile
2024/12/01 10:37:10.949217 [INFO] detected Procfile in application source bundle ...
2024/12/01 10:37:10.949223 [INFO] Executing instruction: configure X-Ray
2024/12/01 10:37:10.949227 [INFO] X-Ray is not enabled.
2024/12/01 10:37:10.949230 [INFO] Executing instruction: configure proxy server
2024/12/01 10:37:10.949243 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 10:37:10.955868 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 10:37:10.964880 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 10:37:10.967823 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:37:11.012151 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 10:37:11.012172 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:37:11.026022 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 10:37:11.034618 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:37:11.044327 [INFO] Running command: systemctl stop healthd.service
2024/12/01 10:37:11.124288 [INFO] Running command: systemctl disable healthd.service
2024/12/01 10:37:11.442658 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 10:37:11.443841 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:11.745767 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:11.755974 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:12.009706 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:12.018957 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 10:37:12.025782 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 10:37:12.289573 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 10:37:12.298872 [INFO] Running command: systemctl enable healthd.service
2024/12/01 10:37:12.562830 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 10:37:12.562852 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:37:12.571957 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 10:37:12.579559 [INFO] Running command: systemctl start healthd.service
2024/12/01 10:37:12.635253 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 10:37:12.636559 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 10:37:12.638520 [INFO] Executing instruction: GetSetupProxyLog
2024/12/01 10:37:12.638674 [INFO] Executing instruction: configure log streaming
2024/12/01 10:37:12.638680 [INFO] log streaming is not enabled
2024/12/01 10:37:12.638683 [INFO] disable log stream
2024/12/01 10:37:12.638691 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 10:37:12.651534 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 10:37:12.670217 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 10:37:12.670227 [INFO] Checking if logs need forced rotation
2024/12/01 10:37:12.670238 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:37:13.158336 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:37:13.796673 [INFO] Generating rsyslog config from Procfile
2024/12/01 10:37:13.799713 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 10:37:14.362083 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 10:37:14.362201 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 10:37:14.362206 [INFO] Executing instruction: RunConfigDeployPreDeployHooks
2024/12/01 10:37:14.362219 [INFO] Executing platform hooks in .platform/confighooks/predeploy/
2024/12/01 10:37:14.362257 [INFO] The dir .platform/confighooks/predeploy/ does not exist
2024/12/01 10:37:14.362261 [INFO] Finished running scripts in /var/app/staging/.platform/confighooks/predeploy
2024/12/01 10:37:14.362266 [INFO] Executing instruction: stop X-Ray
2024/12/01 10:37:14.362269 [INFO] stop X-Ray ...
2024/12/01 10:37:14.362277 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 10:37:14.378024 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 10:37:14.378039 [INFO] Running command: systemctl stop xray.service
2024/12/01 10:37:14.398785 [INFO] Executing instruction: stop proxy
2024/12/01 10:37:14.398801 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 10:37:14.411328 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 10:37:14.411345 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:37:14.425607 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 10:37:14.432980 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:37:14.440464 [INFO] Running command: systemctl stop nginx.service
2024/12/01 10:37:14.549730 [INFO] Running command: systemctl disable nginx.service
2024/12/01 10:37:14.808023 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:15.071246 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:15.078518 [INFO] Executing instruction: FlipApplication
2024/12/01 10:37:15.078532 [INFO] Fetching environment variables...
2024/12/01 10:37:15.078692 [INFO] Purge old process...
2024/12/01 10:37:15.078706 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 10:37:15.087517 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 10:37:15.095829 [INFO] web.service

2024/12/01 10:37:15.095839 [INFO] deregistering process: web
2024/12/01 10:37:15.095846 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:37:15.105955 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:37:15.112522 [INFO] Running command: systemctl disable web.service
2024/12/01 10:37:15.505608 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 10:37:15.505676 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:15.983415 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:16.003364 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:37:16.013228 [INFO] Process web has not been fully terminated
2024/12/01 10:37:16.013241 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 10:37:17.013546 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:37:17.020493 [INFO] Process web has been fully terminated
2024/12/01 10:37:17.020502 [INFO] All processes have been fully terminated
2024/12/01 10:37:17.020505 [INFO] Removing /var/app/current/ if it exists
2024/12/01 10:37:17.181318 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 10:37:17.181358 [INFO] Register application processes...
2024/12/01 10:37:17.181362 [INFO] Registering the proc: web

2024/12/01 10:37:17.181371 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:37:17.226049 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:17.492774 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:17.502327 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 10:37:17.510828 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 10:37:17.768301 [INFO] Running command: systemctl start eb-app.target
2024/12/01 10:37:17.777869 [INFO] Running command: systemctl enable web.service
2024/12/01 10:37:18.038572 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 10:37:18.038592 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:37:18.051645 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:37:18.058090 [INFO] Running command: systemctl start web.service
2024/12/01 10:37:18.125503 [INFO] Executing instruction: start X-Ray
2024/12/01 10:37:18.125517 [INFO] X-Ray is not enabled.
2024/12/01 10:37:18.125521 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 10:37:18.125536 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 10:37:18.164442 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 10:37:18.164644 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 10:37:18.172402 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:37:18.194852 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:37:18.650012 [INFO] Running command: systemctl reset-failed
2024/12/01 10:37:18.667157 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:37:18.688109 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 10:37:18.707997 [INFO] Running command: systemctl start nginx.service
2024/12/01 10:37:18.900690 [INFO] Executing instruction: configureSqsd
2024/12/01 10:37:18.900703 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 10:37:18.900709 [INFO] Executing instruction: startSqsd
2024/12/01 10:37:18.900712 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 10:37:18.900715 [INFO] Executing instruction: Track pids in healthd
2024/12/01 10:37:18.900718 [INFO] This is an enhanced health env...
2024/12/01 10:37:18.900727 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 10:37:18.914450 [INFO] healthd.service nginx.service cfn-hup.service

2024/12/01 10:37:18.914468 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 10:37:18.928682 [INFO] web.service

2024/12/01 10:37:18.928848 [INFO] Executing instruction: RunConfigDeployPostDeployHooks
2024/12/01 10:37:18.928861 [INFO] Executing platform hooks in .platform/confighooks/postdeploy/
2024/12/01 10:37:18.928875 [INFO] The dir .platform/confighooks/postdeploy/ does not exist
2024/12/01 10:37:18.928878 [INFO] Finished running scripts in /var/app/current/.platform/confighooks/postdeploy
2024/12/01 10:37:18.928882 [INFO] Executing cleanup logic
2024/12/01 10:37:18.928974 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733049430949,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1733049438928,"severity":"INFO"}]}]}

2024/12/01 10:37:18.929939 [INFO] Platform Engine finished execution on command: config-deploy

2024/12/01 10:40:01.795523 [INFO] Starting...
2024/12/01 10:40:01.795576 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 10:40:01.795595 [INFO] reading event message file
2024/12/01 10:40:01.795725 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 10:40:01.869316 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:40:02.165632 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:40:02.454427 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 10:40:02.454439 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 10:40:02.454442 [INFO] Engine command: (app-deploy)

2024/12/01 10:40:02.454447 [INFO] Downloading EB Application...
2024/12/01 10:40:02.454450 [INFO] Region: us-east-1
2024/12/01 10:40:02.454452 [INFO] envID: e-phgumpyagn
2024/12/01 10:40:02.454455 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 10:40:02.454458 [INFO] Using manifest file name from command request
2024/12/01 10:40:02.454462 [INFO] Manifest name is : manifest_1733049599276
2024/12/01 10:40:02.454465 [INFO] Download app version manifest
2024/12/01 10:40:02.454575 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733049599276
2024/12/01 10:40:02.487526 [INFO] Download successful104bytes downloaded
2024/12/01 10:40:02.487681 [INFO] Trying to read and parse version manifest...
2024/12/01 10:40:02.488866 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b293-241201_053845667130
2024/12/01 10:40:03.664043 [INFO] Download successful88741413bytes downloaded
2024/12/01 10:40:03.664278 [INFO] Executing instruction: ElectLeader
2024/12/01 10:40:03.664284 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 10:40:03.664292 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 10:40:03.664302 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id c612a81c-7f8e-470e-8ed4-d396482493db --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 10:40:03.981671 [INFO] Instance is Leader.
2024/12/01 10:40:03.981723 [INFO] Executing instruction: stopSqsd
2024/12/01 10:40:03.981727 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 10:40:03.981730 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 10:40:03.981733 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 10:40:03.981743 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 10:40:04.338027 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 10:40:04.338079 [INFO] Executing instruction: StageApplication
2024/12/01 10:40:04.338083 [INFO] Recreating /var/app/staging/
2024/12/01 10:40:04.338182 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 10:40:04.338192 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 10:40:06.346823 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 10:40:06.410662 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 10:40:06.410697 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 10:40:06.410712 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 10:40:06.410715 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 10:40:06.410720 [INFO] Executing instruction: InstallDependency
2024/12/01 10:40:06.410725 [INFO] checking dependencies file
2024/12/01 10:40:06.410736 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 10:40:06.410747 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 10:40:10.403035 [INFO] Requirement already satisfied: Flask==3.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (3.0.0)
Requirement already satisfied: Flask-CORS==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: anthropic==0.7.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (0.7.7)
Requirement already satisfied: python-dotenv==1.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (1.0.0)
Requirement already satisfied: Werkzeug==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (3.0.1)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (3.0.1)
Requirement already satisfied: python-docx==1.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (1.0.1)
Requirement already satisfied: reportlab==4.0.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (4.0.8)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (21.2.0)
Requirement already satisfied: tenacity==8.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (8.2.3)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: boto3==1.34.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 18)) (1.34.11)
Requirement already satisfied: Jinja2>=3.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.1.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: blinker>=1.6.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==3.0.0->-r requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (2.10.2)
Requirement already satisfied: sniffio in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (1.3.1)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.7.7->-r requirements.txt (line 3)) (4.12.2)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==3.0.1->-r requirements.txt (line 5)) (3.0.2)
Requirement already satisfied: lxml>=3.1.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==1.0.1->-r requirements.txt (line 7)) (5.3.0)
Requirement already satisfied: pillow>=9.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from reportlab==4.0.8->-r requirements.txt (line 8)) (11.0.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 9)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 10)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: botocore<1.35.0,>=1.34.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (1.34.162)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (1.0.1)
Requirement already satisfied: s3transfer<0.11.0,>=0.10.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.34.11->-r requirements.txt (line 18)) (0.10.4)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.7.7->-r requirements.txt (line 3)) (3.10)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (2.9.0.post0)
Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (2.2.3)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.7.7->-r requirements.txt (line 3)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.35.0,>=1.34.11->boto3==1.34.11->-r requirements.txt (line 18)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 10:40:10.403075 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 10:40:10.403081 [INFO] Executing instruction: check Procfile
2024/12/01 10:40:10.403126 [INFO] detected Procfile in application source bundle ...
2024/12/01 10:40:10.403133 [INFO] Executing instruction: configure X-Ray
2024/12/01 10:40:10.403136 [INFO] X-Ray is not enabled.
2024/12/01 10:40:10.403139 [INFO] Executing instruction: configure proxy server
2024/12/01 10:40:10.403155 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 10:40:10.415923 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 10:40:10.429058 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 10:40:10.432476 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:40:10.487551 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 10:40:10.487570 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:40:10.507314 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 10:40:10.516370 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:40:10.525850 [INFO] Running command: systemctl stop healthd.service
2024/12/01 10:40:10.585653 [INFO] Running command: systemctl disable healthd.service
2024/12/01 10:40:10.870540 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 10:40:10.870631 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:11.172640 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:11.185316 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:11.447311 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:11.456765 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 10:40:11.463593 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 10:40:11.724488 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 10:40:11.732274 [INFO] Running command: systemctl enable healthd.service
2024/12/01 10:40:11.988046 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 10:40:11.988066 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 10:40:11.999277 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 10:40:12.006365 [INFO] Running command: systemctl start healthd.service
2024/12/01 10:40:12.066829 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 10:40:12.068363 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 10:40:12.069964 [INFO] Executing instruction: configure log streaming
2024/12/01 10:40:12.069972 [INFO] log streaming is not enabled
2024/12/01 10:40:12.069975 [INFO] disable log stream
2024/12/01 10:40:12.069983 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 10:40:12.083901 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 10:40:12.102711 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 10:40:12.102722 [INFO] Checking if logs need forced rotation
2024/12/01 10:40:12.102733 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:40:12.589207 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:40:13.092217 [INFO] Generating rsyslog config from Procfile
2024/12/01 10:40:13.096983 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 10:40:13.333610 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 10:40:13.333643 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 10:40:13.333668 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 10:40:13.839315 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 10:40:13.839349 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 10:40:13.839448 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 10:40:13.839452 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 10:40:13.839464 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 10:40:13.839476 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/12/01 10:40:13.839479 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 10:40:13.839483 [INFO] Executing instruction: stop X-Ray
2024/12/01 10:40:13.839486 [INFO] stop X-Ray ...
2024/12/01 10:40:13.839495 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 10:40:13.850789 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 10:40:13.850811 [INFO] Running command: systemctl stop xray.service
2024/12/01 10:40:13.863391 [INFO] Executing instruction: stop proxy
2024/12/01 10:40:13.863413 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 10:40:13.876387 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 10:40:13.876407 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:40:13.888610 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 10:40:13.895544 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:40:13.904009 [INFO] Running command: systemctl stop nginx.service
2024/12/01 10:40:13.997517 [INFO] Running command: systemctl disable nginx.service
2024/12/01 10:40:14.264028 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:14.518461 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:14.527043 [INFO] Executing instruction: FlipApplication
2024/12/01 10:40:14.527055 [INFO] Fetching environment variables...
2024/12/01 10:40:14.527572 [INFO] Purge old process...
2024/12/01 10:40:14.527589 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 10:40:14.536925 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 10:40:14.545146 [INFO] web.service

2024/12/01 10:40:14.545157 [INFO] deregistering process: web
2024/12/01 10:40:14.545163 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:40:14.555176 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:40:14.562342 [INFO] Running command: systemctl disable web.service
2024/12/01 10:40:14.833331 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 10:40:14.833789 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:15.103167 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:15.113486 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:40:15.123855 [INFO] Process web has not been fully terminated
2024/12/01 10:40:15.123867 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 10:40:16.124163 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:40:16.131608 [INFO] Process web has been fully terminated
2024/12/01 10:40:16.131617 [INFO] All processes have been fully terminated
2024/12/01 10:40:16.131621 [INFO] Removing /var/app/current/ if it exists
2024/12/01 10:40:16.268996 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 10:40:16.269038 [INFO] Register application processes...
2024/12/01 10:40:16.269042 [INFO] Registering the proc: web

2024/12/01 10:40:16.269052 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:40:16.319021 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:16.578052 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:16.585856 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 10:40:16.592398 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 10:40:16.850308 [INFO] Running command: systemctl start eb-app.target
2024/12/01 10:40:16.859553 [INFO] Running command: systemctl enable web.service
2024/12/01 10:40:17.123236 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 10:40:17.123256 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 10:40:17.134872 [INFO] Running command: systemctl is-active web.service
2024/12/01 10:40:17.140980 [INFO] Running command: systemctl start web.service
2024/12/01 10:40:17.202053 [INFO] Executing instruction: start X-Ray
2024/12/01 10:40:17.202068 [INFO] X-Ray is not enabled.
2024/12/01 10:40:17.202072 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 10:40:17.202088 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 10:40:17.239404 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 10:40:17.239603 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 10:40:17.245085 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:40:17.267657 [INFO] Running command: systemctl daemon-reload
2024/12/01 10:40:17.741249 [INFO] Running command: systemctl reset-failed
2024/12/01 10:40:17.763713 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 10:40:17.777722 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 10:40:17.796447 [INFO] Running command: systemctl start nginx.service
2024/12/01 10:40:18.000159 [INFO] Executing instruction: configureSqsd
2024/12/01 10:40:18.000173 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 10:40:18.000176 [INFO] Executing instruction: startSqsd
2024/12/01 10:40:18.000179 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 10:40:18.000182 [INFO] Executing instruction: Track pids in healthd
2024/12/01 10:40:18.000185 [INFO] This is an enhanced health env...
2024/12/01 10:40:18.000194 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 10:40:18.014925 [INFO] cfn-hup.service healthd.service nginx.service

2024/12/01 10:40:18.014948 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 10:40:18.029564 [INFO] web.service

2024/12/01 10:40:18.029761 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 10:40:18.029775 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 10:40:18.029788 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/12/01 10:40:18.029791 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/12/01 10:40:18.029795 [INFO] Executing cleanup logic
2024/12/01 10:40:18.029905 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733049610403,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1733049618029,"severity":"INFO"}]}]}

2024/12/01 10:40:18.030100 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 10:42:01.575766 [INFO] Starting...
2024/12/01 10:42:01.575802 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 10:42:01.575941 [INFO] reading event message file
2024/12/01 10:42:01.576088 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 10:42:01.650668 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 10:42:01.948927 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 10:42:02.244607 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 10:42:02.244619 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 10:42:02.244622 [INFO] Engine command: (tail-log)

2024/12/01 10:42:02.244658 [INFO] Executing instruction: GetTailLogs
2024/12/01 10:42:02.244661 [INFO] Tail Logs...
2024/12/01 10:42:02.249090 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 10:42:02.251273 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 10:42:02.252733 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 10:42:02.255121 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 10:42:02.257543 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 10:42:02.354013 [INFO] Executing cleanup logic
2024/12/01 10:42:02.354093 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733049722354,"severity":"INFO"}]}]}

2024/12/01 10:42:02.354165 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 11:00:31.815286 [INFO] Starting...
2024/12/01 11:00:31.815319 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:00:31.815337 [INFO] reading event message file
2024/12/01 11:00:31.815454 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:00:31.889348 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:00:32.179250 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:00:32.459667 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 11:00:32.459678 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:00:32.459681 [INFO] Engine command: (app-deploy)

2024/12/01 11:00:32.459685 [INFO] Downloading EB Application...
2024/12/01 11:00:32.459688 [INFO] Region: us-east-1
2024/12/01 11:00:32.459702 [INFO] envID: e-phgumpyagn
2024/12/01 11:00:32.459704 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 11:00:32.459707 [INFO] Using manifest file name from command request
2024/12/01 11:00:32.459713 [INFO] Manifest name is : manifest_1733050810251
2024/12/01 11:00:32.459716 [INFO] Download app version manifest
2024/12/01 11:00:32.459820 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733050810251
2024/12/01 11:00:32.508363 [INFO] Download successful104bytes downloaded
2024/12/01 11:00:32.508503 [INFO] Trying to read and parse version manifest...
2024/12/01 11:00:32.510060 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-bce4-241201_055951113037
2024/12/01 11:00:33.980709 [INFO] Download successful88758412bytes downloaded
2024/12/01 11:00:33.981910 [INFO] Executing instruction: ElectLeader
2024/12/01 11:00:33.981916 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 11:00:33.981919 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 11:00:33.981945 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 188e13d8-7d3f-4722-ab9e-a46dc624b16c --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 11:00:34.230711 [INFO] Instance is Leader.
2024/12/01 11:00:34.230758 [INFO] Executing instruction: stopSqsd
2024/12/01 11:00:34.230762 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 11:00:34.230765 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 11:00:34.230768 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 11:00:34.230780 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 11:00:34.508022 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 11:00:34.508038 [INFO] Executing instruction: StageApplication
2024/12/01 11:00:34.508042 [INFO] Recreating /var/app/staging/
2024/12/01 11:00:34.508129 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 11:00:34.508138 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 11:00:36.516287 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 11:00:36.583672 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 11:00:36.583701 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 11:00:36.583715 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 11:00:36.583717 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 11:00:36.583722 [INFO] Executing instruction: InstallDependency
2024/12/01 11:00:36.583726 [INFO] checking dependencies file
2024/12/01 11:00:36.583738 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 11:00:36.583746 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 11:00:46.139125 [INFO] Collecting Flask==2.2.5
  Downloading Flask-2.2.5-py3-none-any.whl (101 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 101.8/101.8 kB 5.0 MB/s eta 0:00:00
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Collecting Werkzeug==2.2.3
  Downloading Werkzeug-2.2.3-py3-none-any.whl (233 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 233.6/233.6 kB 30.4 MB/s eta 0:00:00
Collecting python-dotenv==0.19.0
  Downloading python_dotenv-0.19.0-py2.py3-none-any.whl (17 kB)
Collecting boto3==1.26.137
  Downloading boto3-1.26.137-py3-none-any.whl (135 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 135.6/135.6 kB 22.5 MB/s eta 0:00:00
Collecting anthropic==0.3.11
  Downloading anthropic-0.3.11-py3-none-any.whl (796 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 796.3/796.3 kB 27.3 MB/s eta 0:00:00
Collecting tenacity==8.2.2
  Downloading tenacity-8.2.2-py3-none-any.whl (24 kB)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Collecting python-docx==0.8.11
  Downloading python-docx-0.8.11.tar.gz (5.6 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.6/5.6 MB 64.7 MB/s eta 0:00:00
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Collecting botocore<1.30.0,>=1.29.137
  Downloading botocore-1.29.165-py3-none-any.whl (11.0 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.0/11.0 MB 71.3 MB/s eta 0:00:00
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Collecting s3transfer<0.7.0,>=0.6.0
  Downloading s3transfer-0.6.2-py3-none-any.whl (79 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 79.8/79.8 kB 23.4 MB/s eta 0:00:00
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Collecting urllib3<1.27,>=1.25.4
  Downloading urllib3-1.26.20-py2.py3-none-any.whl (144 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 144.2/144.2 kB 20.8 MB/s eta 0:00:00
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)
Installing collected packages: Werkzeug, urllib3, tenacity, python-dotenv, python-docx, Flask, botocore, s3transfer, boto3, anthropic
  Attempting uninstall: Werkzeug
    Found existing installation: Werkzeug 3.0.1
    Uninstalling Werkzeug-3.0.1:
      Successfully uninstalled Werkzeug-3.0.1
  Attempting uninstall: urllib3
    Found existing installation: urllib3 2.2.3
    Uninstalling urllib3-2.2.3:
      Successfully uninstalled urllib3-2.2.3
  Attempting uninstall: tenacity
    Found existing installation: tenacity 8.2.3
    Uninstalling tenacity-8.2.3:
      Successfully uninstalled tenacity-8.2.3
  Attempting uninstall: python-dotenv
    Found existing installation: python-dotenv 1.0.0
    Uninstalling python-dotenv-1.0.0:
      Successfully uninstalled python-dotenv-1.0.0
  Attempting uninstall: python-docx
    Found existing installation: python-docx 1.0.1
    Uninstalling python-docx-1.0.1:
      Successfully uninstalled python-docx-1.0.1
  Running setup.py install for python-docx: started
  Running setup.py install for python-docx: finished with status 'done'
  Attempting uninstall: Flask
    Found existing installation: Flask 3.0.0
    Uninstalling Flask-3.0.0:
      Successfully uninstalled Flask-3.0.0
  Attempting uninstall: botocore
    Found existing installation: botocore 1.34.162
    Uninstalling botocore-1.34.162:
      Successfully uninstalled botocore-1.34.162
  Attempting uninstall: s3transfer
    Found existing installation: s3transfer 0.10.4
    Uninstalling s3transfer-0.10.4:
      Successfully uninstalled s3transfer-0.10.4
  Attempting uninstall: boto3
    Found existing installation: boto3 1.34.11
    Uninstalling boto3-1.34.11:
      Successfully uninstalled boto3-1.34.11
  Attempting uninstall: anthropic
    Found existing installation: anthropic 0.7.7
    Uninstalling anthropic-0.7.7:
      Successfully uninstalled anthropic-0.7.7
Successfully installed Flask-2.2.5 Werkzeug-2.2.3 anthropic-0.3.11 boto3-1.26.137 botocore-1.29.165 python-docx-0.8.11 python-dotenv-0.19.0 s3transfer-0.6.2 tenacity-8.2.2 urllib3-1.26.20

2024/12/01 11:00:46.140941 [INFO]   DEPRECATION: python-docx is being installed using the legacy 'setup.py install' method, because it does not have a 'pyproject.toml' and the 'wheel' package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the '--use-pep517' option. Discussion can be found at https://github.com/pypa/pip/issues/8559

[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 11:00:46.140950 [INFO] Executing instruction: check Procfile
2024/12/01 11:00:46.141000 [INFO] detected Procfile in application source bundle ...
2024/12/01 11:00:46.141006 [INFO] Executing instruction: configure X-Ray
2024/12/01 11:00:46.141010 [INFO] X-Ray is not enabled.
2024/12/01 11:00:46.141013 [INFO] Executing instruction: configure proxy server
2024/12/01 11:00:46.141030 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 11:00:46.155354 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 11:00:46.174195 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 11:00:46.177498 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:00:46.209235 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 11:00:46.209252 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:00:46.218498 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:00:46.224887 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:00:46.232695 [INFO] Running command: systemctl stop healthd.service
2024/12/01 11:00:46.324867 [INFO] Running command: systemctl disable healthd.service
2024/12/01 11:00:46.728700 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 11:00:46.729997 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:46.989492 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:47.012314 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:47.325265 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:47.332614 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 11:00:47.339646 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 11:00:47.603214 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 11:00:47.611371 [INFO] Running command: systemctl enable healthd.service
2024/12/01 11:00:47.870948 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 11:00:47.870986 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:00:47.880773 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:00:47.887772 [INFO] Running command: systemctl start healthd.service
2024/12/01 11:00:47.937698 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 11:00:47.938296 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 11:00:47.938881 [INFO] Executing instruction: configure log streaming
2024/12/01 11:00:47.938888 [INFO] log streaming is not enabled
2024/12/01 11:00:47.938891 [INFO] disable log stream
2024/12/01 11:00:47.938899 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 11:00:47.952318 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 11:00:47.966715 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 11:00:47.966727 [INFO] Checking if logs need forced rotation
2024/12/01 11:00:47.966738 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:00:48.614059 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:00:49.107781 [INFO] Generating rsyslog config from Procfile
2024/12/01 11:00:49.110302 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 11:00:49.332538 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 11:00:49.333441 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 11:00:49.333459 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 11:00:49.810300 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 11:00:49.810317 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 11:00:49.811797 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 11:00:49.811805 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 11:00:49.811863 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 11:00:49.811906 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 11:00:49.811910 [INFO] Try add execution permission
2024/12/01 11:00:49.811916 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 11:00:49.811930 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:00:49.851152 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 11:00:49.851168 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:00:49.856856 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 11:00:49.856876 [INFO] Executing instruction: stop X-Ray
2024/12/01 11:00:49.856879 [INFO] stop X-Ray ...
2024/12/01 11:00:49.856887 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 11:00:49.867434 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 11:00:49.867447 [INFO] Running command: systemctl stop xray.service
2024/12/01 11:00:49.880600 [INFO] Executing instruction: stop proxy
2024/12/01 11:00:49.880613 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 11:00:49.892277 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 11:00:49.892293 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:00:49.903346 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 11:00:49.909930 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:00:49.918994 [INFO] Running command: systemctl stop nginx.service
2024/12/01 11:00:50.027958 [INFO] Running command: systemctl disable nginx.service
2024/12/01 11:00:50.295496 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:50.564613 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:50.572799 [INFO] Executing instruction: FlipApplication
2024/12/01 11:00:50.572812 [INFO] Fetching environment variables...
2024/12/01 11:00:50.573045 [INFO] Purge old process...
2024/12/01 11:00:50.573084 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 11:00:50.592302 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 11:00:50.605243 [INFO] web.service

2024/12/01 11:00:50.605260 [INFO] deregistering process: web
2024/12/01 11:00:50.605552 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:00:50.621646 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:00:50.633656 [INFO] Running command: systemctl disable web.service
2024/12/01 11:00:50.991603 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 11:00:50.991666 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:51.403917 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:51.423236 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:00:51.433087 [INFO] Process web has not been fully terminated
2024/12/01 11:00:51.433101 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 11:00:52.433350 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:00:52.440260 [INFO] Process web has been fully terminated
2024/12/01 11:00:52.440271 [INFO] All processes have been fully terminated
2024/12/01 11:00:52.440274 [INFO] Removing /var/app/current/ if it exists
2024/12/01 11:00:52.755095 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 11:00:52.755123 [INFO] Register application processes...
2024/12/01 11:00:52.755127 [INFO] Registering the proc: web

2024/12/01 11:00:52.755152 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:00:52.794620 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:53.052527 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:53.060323 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 11:00:53.066671 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 11:00:53.328592 [INFO] Running command: systemctl start eb-app.target
2024/12/01 11:00:53.339481 [INFO] Running command: systemctl enable web.service
2024/12/01 11:00:53.594833 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 11:00:53.594852 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:00:53.605589 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:00:53.612961 [INFO] Running command: systemctl start web.service
2024/12/01 11:00:53.648705 [INFO] Executing instruction: start X-Ray
2024/12/01 11:00:53.648718 [INFO] X-Ray is not enabled.
2024/12/01 11:00:53.648721 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 11:00:53.648737 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 11:00:53.682894 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 11:00:53.683081 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 11:00:53.687839 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:00:53.711442 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:00:54.154445 [INFO] Running command: systemctl reset-failed
2024/12/01 11:00:54.173325 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:00:54.188149 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 11:00:54.205618 [INFO] Running command: systemctl start nginx.service
2024/12/01 11:00:54.370068 [INFO] Executing instruction: configureSqsd
2024/12/01 11:00:54.370082 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 11:00:54.370085 [INFO] Executing instruction: startSqsd
2024/12/01 11:00:54.370088 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 11:00:54.370091 [INFO] Executing instruction: Track pids in healthd
2024/12/01 11:00:54.370094 [INFO] This is an enhanced health env...
2024/12/01 11:00:54.370103 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 11:00:54.383721 [INFO] healthd.service cfn-hup.service nginx.service

2024/12/01 11:00:54.383742 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 11:00:54.399678 [INFO] web.service

2024/12/01 11:00:54.399852 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 11:00:54.399867 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 11:00:54.399883 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/12/01 11:00:54.399885 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/12/01 11:00:54.399890 [INFO] Executing cleanup logic
2024/12/01 11:00:54.399995 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733050846141,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1733050854399,"severity":"INFO"}]}]}

2024/12/01 11:00:54.400201 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 11:01:19.885635 [INFO] Starting...
2024/12/01 11:01:19.885667 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:01:19.885684 [INFO] reading event message file
2024/12/01 11:01:19.889437 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:01:19.967447 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:01:20.254553 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:01:20.543811 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 11:01:20.543823 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:01:20.543826 [INFO] Engine command: (tail-log)

2024/12/01 11:01:20.543872 [INFO] Executing instruction: GetTailLogs
2024/12/01 11:01:20.543876 [INFO] Tail Logs...
2024/12/01 11:01:20.545732 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 11:01:20.551321 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 11:01:20.553193 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 11:01:20.554615 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 11:01:20.556823 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 11:01:20.669414 [INFO] Executing cleanup logic
2024/12/01 11:01:20.669474 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733050880669,"severity":"INFO"}]}]}

2024/12/01 11:01:20.669562 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 11:03:00.530217 [INFO] Starting...
2024/12/01 11:03:00.530251 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:03:00.530267 [INFO] reading event message file
2024/12/01 11:03:00.530380 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:03:00.603262 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:03:00.897251 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:03:01.186977 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 11:03:01.186991 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:03:01.186994 [INFO] Engine command: (app-deploy)

2024/12/01 11:03:01.186998 [INFO] Downloading EB Application...
2024/12/01 11:03:01.187001 [INFO] Region: us-east-1
2024/12/01 11:03:01.187003 [INFO] envID: e-phgumpyagn
2024/12/01 11:03:01.187006 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 11:03:01.187009 [INFO] Using manifest file name from command request
2024/12/01 11:03:01.187014 [INFO] Manifest name is : manifest_1733050977982
2024/12/01 11:03:01.187016 [INFO] Download app version manifest
2024/12/01 11:03:01.187142 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733050977982
2024/12/01 11:03:01.229972 [INFO] Download successful104bytes downloaded
2024/12/01 11:03:01.230120 [INFO] Trying to read and parse version manifest...
2024/12/01 11:03:01.231737 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-dc4a-241201_060240258534
2024/12/01 11:03:02.003817 [INFO] Download successful88761447bytes downloaded
2024/12/01 11:03:02.004040 [INFO] Executing instruction: ElectLeader
2024/12/01 11:03:02.004045 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 11:03:02.004048 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 11:03:02.004072 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 7bd46696-9fa8-451c-b53e-624f77b18683 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 11:03:02.307508 [INFO] Instance is Leader.
2024/12/01 11:03:02.307551 [INFO] Executing instruction: stopSqsd
2024/12/01 11:03:02.307557 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 11:03:02.307562 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 11:03:02.307570 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 11:03:02.307583 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 11:03:02.635133 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 11:03:02.635172 [INFO] Executing instruction: StageApplication
2024/12/01 11:03:02.635175 [INFO] Recreating /var/app/staging/
2024/12/01 11:03:02.635256 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 11:03:02.635274 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 11:03:04.637305 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 11:03:04.701758 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 11:03:04.701791 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 11:03:04.701834 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 11:03:04.701837 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 11:03:04.701842 [INFO] Executing instruction: InstallDependency
2024/12/01 11:03:04.701847 [INFO] checking dependencies file
2024/12/01 11:03:04.701858 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 11:03:04.701868 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 11:03:08.517751 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 11:03:08.517792 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 11:03:08.517799 [INFO] Executing instruction: check Procfile
2024/12/01 11:03:08.517847 [INFO] detected Procfile in application source bundle ...
2024/12/01 11:03:08.517854 [INFO] Executing instruction: configure X-Ray
2024/12/01 11:03:08.517859 [INFO] X-Ray is not enabled.
2024/12/01 11:03:08.517863 [INFO] Executing instruction: configure proxy server
2024/12/01 11:03:08.517883 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 11:03:08.549007 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 11:03:08.557421 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 11:03:08.560245 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:03:08.623491 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 11:03:08.623513 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:03:08.635200 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:03:08.648418 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:03:08.658424 [INFO] Running command: systemctl stop healthd.service
2024/12/01 11:03:08.755155 [INFO] Running command: systemctl disable healthd.service
2024/12/01 11:03:09.056468 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 11:03:09.056530 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:03:09.350414 [INFO] Running command: systemctl reset-failed
2024/12/01 11:03:09.362639 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:03:09.622879 [INFO] Running command: systemctl reset-failed
2024/12/01 11:03:09.630117 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 11:03:09.637361 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 11:03:09.906081 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 11:03:09.915485 [INFO] Running command: systemctl enable healthd.service
2024/12/01 11:03:10.183550 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 11:03:10.183571 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:03:10.192671 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:03:10.200390 [INFO] Running command: systemctl start healthd.service
2024/12/01 11:03:10.253375 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 11:03:10.254484 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 11:03:10.255114 [INFO] Executing instruction: configure log streaming
2024/12/01 11:03:10.255122 [INFO] log streaming is not enabled
2024/12/01 11:03:10.255125 [INFO] disable log stream
2024/12/01 11:03:10.255133 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 11:03:10.268516 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 11:03:10.286362 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 11:03:10.286374 [INFO] Checking if logs need forced rotation
2024/12/01 11:03:10.286384 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:03:10.801370 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:03:11.274997 [INFO] Generating rsyslog config from Procfile
2024/12/01 11:03:11.277858 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 11:03:11.610835 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 11:03:11.610860 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 11:03:11.610871 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 11:03:12.021690 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 11:03:12.021708 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 11:03:12.021821 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 11:03:12.021825 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 11:03:12.021838 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 11:03:12.021871 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 11:03:12.021875 [INFO] Try add execution permission
2024/12/01 11:03:12.021880 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 11:03:12.021893 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:03:12.027979 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 11:03:12.027993 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:03:12.035233 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 11:03:12.035247 [INFO] Executing instruction: stop X-Ray
2024/12/01 11:03:12.035251 [INFO] stop X-Ray ...
2024/12/01 11:03:12.035258 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 11:03:12.046214 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 11:03:12.046227 [INFO] Running command: systemctl stop xray.service
2024/12/01 11:03:12.057954 [INFO] Executing instruction: stop proxy
2024/12/01 11:03:12.057967 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 11:03:12.069951 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 11:03:12.069963 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:03:12.082407 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 11:03:12.088650 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:03:12.096400 [INFO] Running command: systemctl stop nginx.service
2024/12/01 11:03:12.198070 [INFO] Running command: systemctl disable nginx.service
2024/12/01 11:03:12.459400 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:03:12.717895 [INFO] Running command: systemctl reset-failed
2024/12/01 11:03:12.724840 [INFO] Executing instruction: FlipApplication
2024/12/01 11:03:12.724852 [INFO] Fetching environment variables...
2024/12/01 11:03:12.725020 [INFO] Purge old process...
2024/12/01 11:03:12.725035 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 11:03:12.734081 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 11:03:12.743608 [INFO] web.service

2024/12/01 11:03:12.743620 [INFO] deregistering process: web
2024/12/01 11:03:12.743627 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:03:12.751716 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:03:12.759673 [INFO] Running command: systemctl disable web.service
2024/12/01 11:03:13.140826 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 11:03:13.140890 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:03:13.592939 [INFO] Running command: systemctl reset-failed
2024/12/01 11:03:13.613209 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:03:13.623241 [INFO] Process web has not been fully terminated
2024/12/01 11:03:13.623255 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 11:03:14.623355 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:03:14.630381 [INFO] Process web has been fully terminated
2024/12/01 11:03:14.630392 [INFO] All processes have been fully terminated
2024/12/01 11:03:14.630396 [INFO] Removing /var/app/current/ if it exists
2024/12/01 11:03:14.911639 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 11:03:14.911666 [INFO] Register application processes...
2024/12/01 11:03:14.911670 [INFO] Registering the proc: web

2024/12/01 11:03:14.911680 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:03:14.947507 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:03:15.207144 [INFO] Running command: systemctl reset-failed
2024/12/01 11:03:15.214300 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 11:03:15.222895 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 11:03:15.477533 [INFO] Running command: systemctl start eb-app.target
2024/12/01 11:03:15.486319 [INFO] Running command: systemctl enable web.service
2024/12/01 11:03:15.752936 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 11:03:15.752959 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:03:15.763604 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:03:15.769695 [INFO] Running command: systemctl start web.service
2024/12/01 11:03:15.821746 [INFO] Executing instruction: start X-Ray
2024/12/01 11:03:15.821760 [INFO] X-Ray is not enabled.
2024/12/01 11:03:15.821764 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 11:03:15.821779 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 11:03:15.845385 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:12
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 11:03:15.845401 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:12
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 11:03:15.845407 [INFO] Executing cleanup logic
2024/12/01 11:03:15.846416 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733050988517,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733050995845,"severity":"ERROR"}]}]}

2024/12/01 11:03:15.846639 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 11:03:42.700697 [INFO] Starting...
2024/12/01 11:03:42.700729 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:03:42.700745 [INFO] reading event message file
2024/12/01 11:03:42.700866 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:03:42.781917 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:03:43.075943 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:03:43.368802 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 11:03:43.368814 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:03:43.368816 [INFO] Engine command: (tail-log)

2024/12/01 11:03:43.368860 [INFO] Executing instruction: GetTailLogs
2024/12/01 11:03:43.368864 [INFO] Tail Logs...
2024/12/01 11:03:43.371824 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 11:03:43.374253 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 11:03:43.375750 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 11:03:43.380187 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 11:03:43.382017 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 11:03:43.488992 [INFO] Executing cleanup logic
2024/12/01 11:03:43.489054 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733051023489,"severity":"INFO"}]}]}

2024/12/01 11:03:43.489148 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 11:04:51.889680 [INFO] Starting...
2024/12/01 11:04:51.889711 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:04:51.889727 [INFO] reading event message file
2024/12/01 11:04:51.889843 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:04:51.967912 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:04:52.254638 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:04:52.540854 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 11:04:52.540866 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:04:52.540868 [INFO] Engine command: (app-deploy)

2024/12/01 11:04:52.540873 [INFO] Downloading EB Application...
2024/12/01 11:04:52.540876 [INFO] Region: us-east-1
2024/12/01 11:04:52.540878 [INFO] envID: e-phgumpyagn
2024/12/01 11:04:52.540881 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 11:04:52.540884 [INFO] Using manifest file name from command request
2024/12/01 11:04:52.540893 [INFO] Manifest name is : manifest_1733051089679
2024/12/01 11:04:52.540895 [INFO] Download app version manifest
2024/12/01 11:04:52.541010 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733051089679
2024/12/01 11:04:52.594275 [INFO] Download successful104bytes downloaded
2024/12/01 11:04:52.594431 [INFO] Trying to read and parse version manifest...
2024/12/01 11:04:52.598264 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_060432519590
2024/12/01 11:04:54.017641 [INFO] Download successful88764282bytes downloaded
2024/12/01 11:04:54.017851 [INFO] Executing instruction: ElectLeader
2024/12/01 11:04:54.017857 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 11:04:54.017942 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 11:04:54.017963 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 718c0308-7ae8-4e96-b4a3-968aafb8638f --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 11:04:54.253626 [INFO] Instance is Leader.
2024/12/01 11:04:54.253679 [INFO] Executing instruction: stopSqsd
2024/12/01 11:04:54.253683 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 11:04:54.253686 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 11:04:54.253690 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 11:04:54.253701 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 11:04:54.529011 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 11:04:54.529028 [INFO] Executing instruction: StageApplication
2024/12/01 11:04:54.529031 [INFO] Recreating /var/app/staging/
2024/12/01 11:04:54.529123 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 11:04:54.529133 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 11:04:56.519975 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 11:04:56.583687 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 11:04:56.583717 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 11:04:56.583729 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 11:04:56.583732 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 11:04:56.583737 [INFO] Executing instruction: InstallDependency
2024/12/01 11:04:56.583755 [INFO] checking dependencies file
2024/12/01 11:04:56.583766 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 11:04:56.583774 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 11:05:00.344715 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 11:05:00.345594 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 11:05:00.345602 [INFO] Executing instruction: check Procfile
2024/12/01 11:05:00.345647 [INFO] detected Procfile in application source bundle ...
2024/12/01 11:05:00.345654 [INFO] Executing instruction: configure X-Ray
2024/12/01 11:05:00.345657 [INFO] X-Ray is not enabled.
2024/12/01 11:05:00.345660 [INFO] Executing instruction: configure proxy server
2024/12/01 11:05:00.345674 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 11:05:00.381590 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 11:05:00.392596 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 11:05:00.395347 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:05:00.421746 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 11:05:00.421761 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:05:00.430123 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:05:00.436519 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:05:00.444440 [INFO] Running command: systemctl stop healthd.service
2024/12/01 11:05:00.505353 [INFO] Running command: systemctl disable healthd.service
2024/12/01 11:05:00.769853 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 11:05:00.770392 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:05:01.059064 [INFO] Running command: systemctl reset-failed
2024/12/01 11:05:01.069277 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:05:01.334796 [INFO] Running command: systemctl reset-failed
2024/12/01 11:05:01.343476 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 11:05:01.352396 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 11:05:01.617891 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 11:05:01.626915 [INFO] Running command: systemctl enable healthd.service
2024/12/01 11:05:01.892110 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 11:05:01.892130 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 11:05:01.901499 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 11:05:01.909820 [INFO] Running command: systemctl start healthd.service
2024/12/01 11:05:01.965866 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 11:05:01.966513 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 11:05:01.967186 [INFO] Executing instruction: configure log streaming
2024/12/01 11:05:01.967194 [INFO] log streaming is not enabled
2024/12/01 11:05:01.967197 [INFO] disable log stream
2024/12/01 11:05:01.967205 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 11:05:01.981030 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 11:05:02.002038 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 11:05:02.002056 [INFO] Checking if logs need forced rotation
2024/12/01 11:05:02.002082 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:05:02.526274 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:05:03.042823 [INFO] Generating rsyslog config from Procfile
2024/12/01 11:05:03.046840 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 11:05:03.342055 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 11:05:03.342082 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 11:05:03.342093 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 11:05:03.746046 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 11:05:03.746080 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 11:05:03.746184 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 11:05:03.746188 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 11:05:03.746201 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 11:05:03.746232 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 11:05:03.746236 [INFO] Try add execution permission
2024/12/01 11:05:03.746242 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 11:05:03.746258 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:05:03.755220 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 11:05:03.755237 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 11:05:03.761077 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 11:05:03.761087 [INFO] Executing instruction: stop X-Ray
2024/12/01 11:05:03.761091 [INFO] stop X-Ray ...
2024/12/01 11:05:03.761097 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 11:05:03.771735 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 11:05:03.771751 [INFO] Running command: systemctl stop xray.service
2024/12/01 11:05:03.785806 [INFO] Executing instruction: stop proxy
2024/12/01 11:05:03.785826 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 11:05:03.797083 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 11:05:03.797103 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 11:05:03.809885 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 11:05:03.809904 [INFO] Executing instruction: FlipApplication
2024/12/01 11:05:03.809907 [INFO] Fetching environment variables...
2024/12/01 11:05:03.810080 [INFO] Purge old process...
2024/12/01 11:05:03.810133 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 11:05:03.820611 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 11:05:03.829762 [INFO] web.service

2024/12/01 11:05:03.829777 [INFO] deregistering process: web
2024/12/01 11:05:03.829784 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:05:03.841281 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:05:03.848994 [INFO] Running command: systemctl disable web.service
2024/12/01 11:05:04.126134 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 11:05:04.126203 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:05:04.533154 [INFO] Running command: systemctl reset-failed
2024/12/01 11:05:04.553987 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:05:04.564065 [INFO] Process web has not been fully terminated
2024/12/01 11:05:04.564083 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 11:05:05.564176 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:05:05.571518 [INFO] Process web has been fully terminated
2024/12/01 11:05:05.571529 [INFO] All processes have been fully terminated
2024/12/01 11:05:05.571533 [INFO] Removing /var/app/current/ if it exists
2024/12/01 11:05:05.722664 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 11:05:05.722708 [INFO] Register application processes...
2024/12/01 11:05:05.722713 [INFO] Registering the proc: web

2024/12/01 11:05:05.722722 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:05:05.761175 [INFO] Running command: systemctl daemon-reload
2024/12/01 11:05:06.026156 [INFO] Running command: systemctl reset-failed
2024/12/01 11:05:06.033134 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 11:05:06.040885 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 11:05:06.296217 [INFO] Running command: systemctl start eb-app.target
2024/12/01 11:05:06.307259 [INFO] Running command: systemctl enable web.service
2024/12/01 11:05:06.575051 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 11:05:06.575070 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 11:05:06.585722 [INFO] Running command: systemctl is-active web.service
2024/12/01 11:05:06.592355 [INFO] Running command: systemctl start web.service
2024/12/01 11:05:06.657141 [INFO] Executing instruction: start X-Ray
2024/12/01 11:05:06.657155 [INFO] X-Ray is not enabled.
2024/12/01 11:05:06.657158 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 11:05:06.657174 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 11:05:06.685410 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:12
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 11:05:06.685427 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:12
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 11:05:06.685431 [INFO] Executing cleanup logic
2024/12/01 11:05:06.685547 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733051100345,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733051106685,"severity":"ERROR"}]}]}

2024/12/01 11:05:06.685757 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 11:06:41.134582 [INFO] Starting...
2024/12/01 11:06:41.134615 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 11:06:41.134636 [INFO] reading event message file
2024/12/01 11:06:41.134767 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 11:06:41.207383 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 11:06:41.509533 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 11:06:41.805350 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 11:06:41.805361 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 11:06:41.805364 [INFO] Engine command: (tail-log)

2024/12/01 11:06:41.805412 [INFO] Executing instruction: GetTailLogs
2024/12/01 11:06:41.805415 [INFO] Tail Logs...
2024/12/01 11:06:41.808221 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 11:06:41.810157 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 11:06:41.812333 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 11:06:41.816714 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 11:06:41.821239 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 11:06:41.924347 [INFO] Executing cleanup logic
2024/12/01 11:06:41.924428 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733051201924,"severity":"INFO"}]}]}

2024/12/01 11:06:41.924500 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 13:54:02.936584 [INFO] Starting...
2024/12/01 13:54:02.936630 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 13:54:02.936656 [INFO] reading event message file
2024/12/01 13:54:02.936779 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 13:54:03.006804 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 13:54:03.302539 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 13:54:03.590713 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 13:54:03.590726 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 13:54:03.590728 [INFO] Engine command: (tail-log)

2024/12/01 13:54:03.590764 [INFO] Executing instruction: GetTailLogs
2024/12/01 13:54:03.590767 [INFO] Tail Logs...
2024/12/01 13:54:03.592235 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 13:54:03.594473 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 13:54:03.596508 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 13:54:03.597897 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 13:54:03.602405 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 13:54:03.686164 [INFO] Executing cleanup logic
2024/12/01 13:54:03.686259 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733061243686,"severity":"INFO"}]}]}

2024/12/01 13:54:03.686333 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 13:55:03.098207 [INFO] Starting...
2024/12/01 13:55:03.098244 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 13:55:03.098260 [INFO] reading event message file
2024/12/01 13:55:03.098393 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 13:55:03.177456 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 13:55:03.465121 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 13:55:03.752793 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 13:55:03.752804 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 13:55:03.752807 [INFO] Engine command: (app-deploy)

2024/12/01 13:55:03.752824 [INFO] Downloading EB Application...
2024/12/01 13:55:03.752827 [INFO] Region: us-east-1
2024/12/01 13:55:03.752829 [INFO] envID: e-phgumpyagn
2024/12/01 13:55:03.752832 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 13:55:03.752838 [INFO] Using manifest file name from command request
2024/12/01 13:55:03.752843 [INFO] Manifest name is : manifest_1733061300547
2024/12/01 13:55:03.752845 [INFO] Download app version manifest
2024/12/01 13:55:03.752962 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733061300547
2024/12/01 13:55:03.792196 [INFO] Download successful104bytes downloaded
2024/12/01 13:55:03.792375 [INFO] Trying to read and parse version manifest...
2024/12/01 13:55:03.794434 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_085441861796
2024/12/01 13:55:05.808669 [INFO] Download successful88764382bytes downloaded
2024/12/01 13:55:05.808895 [INFO] Executing instruction: ElectLeader
2024/12/01 13:55:05.808900 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 13:55:05.808903 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 13:55:05.808913 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id e3335c29-8111-46b1-8536-4b5e0f6120f4 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 13:55:06.052376 [INFO] Instance is Leader.
2024/12/01 13:55:06.052421 [INFO] Executing instruction: stopSqsd
2024/12/01 13:55:06.052426 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 13:55:06.052429 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 13:55:06.052432 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 13:55:06.052443 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 13:55:06.335357 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 13:55:06.335400 [INFO] Executing instruction: StageApplication
2024/12/01 13:55:06.335404 [INFO] Recreating /var/app/staging/
2024/12/01 13:55:06.335478 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 13:55:06.335488 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 13:55:08.349750 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 13:55:08.416134 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 13:55:08.416168 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 13:55:08.416187 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 13:55:08.416190 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 13:55:08.416195 [INFO] Executing instruction: InstallDependency
2024/12/01 13:55:08.416200 [INFO] checking dependencies file
2024/12/01 13:55:08.416211 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 13:55:08.416224 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 13:55:12.134030 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 13:55:12.134059 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 13:55:12.134066 [INFO] Executing instruction: check Procfile
2024/12/01 13:55:12.134503 [INFO] detected Procfile in application source bundle ...
2024/12/01 13:55:12.134511 [INFO] Executing instruction: configure X-Ray
2024/12/01 13:55:12.134514 [INFO] X-Ray is not enabled.
2024/12/01 13:55:12.134517 [INFO] Executing instruction: configure proxy server
2024/12/01 13:55:12.134534 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 13:55:12.145705 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 13:55:12.161979 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 13:55:12.165351 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:55:12.203927 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 13:55:12.203943 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:55:12.211230 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 13:55:12.217584 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:55:12.225510 [INFO] Running command: systemctl stop healthd.service
2024/12/01 13:55:12.295383 [INFO] Running command: systemctl disable healthd.service
2024/12/01 13:55:12.586878 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 13:55:12.587001 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:55:12.852500 [INFO] Running command: systemctl reset-failed
2024/12/01 13:55:12.863949 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:55:13.116360 [INFO] Running command: systemctl reset-failed
2024/12/01 13:55:13.124109 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 13:55:13.131109 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 13:55:13.391510 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 13:55:13.401265 [INFO] Running command: systemctl enable healthd.service
2024/12/01 13:55:13.657348 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 13:55:13.657368 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:55:13.668755 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 13:55:13.676293 [INFO] Running command: systemctl start healthd.service
2024/12/01 13:55:13.732395 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 13:55:13.733725 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 13:55:13.734994 [INFO] Executing instruction: configure log streaming
2024/12/01 13:55:13.735002 [INFO] log streaming is not enabled
2024/12/01 13:55:13.735005 [INFO] disable log stream
2024/12/01 13:55:13.735013 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 13:55:13.747841 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 13:55:13.763066 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 13:55:13.763079 [INFO] Checking if logs need forced rotation
2024/12/01 13:55:13.763090 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 13:55:14.263075 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 13:55:14.756330 [INFO] Generating rsyslog config from Procfile
2024/12/01 13:55:14.759448 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 13:55:15.113299 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 13:55:15.113322 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 13:55:15.113332 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 13:55:15.516162 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 13:55:15.516180 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 13:55:15.516283 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 13:55:15.516288 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 13:55:15.516300 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 13:55:15.516333 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 13:55:15.516337 [INFO] Try add execution permission
2024/12/01 13:55:15.516342 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 13:55:15.516354 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 13:55:15.523392 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 13:55:15.523405 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 13:55:15.529527 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 13:55:15.529536 [INFO] Executing instruction: stop X-Ray
2024/12/01 13:55:15.529540 [INFO] stop X-Ray ...
2024/12/01 13:55:15.529546 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 13:55:15.539437 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 13:55:15.539449 [INFO] Running command: systemctl stop xray.service
2024/12/01 13:55:15.554220 [INFO] Executing instruction: stop proxy
2024/12/01 13:55:15.554234 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 13:55:15.564689 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 13:55:15.564703 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 13:55:15.576142 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 13:55:15.576153 [INFO] Executing instruction: FlipApplication
2024/12/01 13:55:15.576156 [INFO] Fetching environment variables...
2024/12/01 13:55:15.576322 [INFO] Purge old process...
2024/12/01 13:55:15.576373 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 13:55:15.586873 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 13:55:15.595812 [INFO] web.service

2024/12/01 13:55:15.595822 [INFO] deregistering process: web
2024/12/01 13:55:15.595827 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:55:15.604774 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:55:15.610895 [INFO] Running command: systemctl disable web.service
2024/12/01 13:55:15.930349 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 13:55:15.930408 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:55:16.395545 [INFO] Running command: systemctl reset-failed
2024/12/01 13:55:16.413203 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:55:16.423369 [INFO] Process web has not been fully terminated
2024/12/01 13:55:16.423382 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 13:55:17.423458 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:55:17.433095 [INFO] Process web has been fully terminated
2024/12/01 13:55:17.433109 [INFO] All processes have been fully terminated
2024/12/01 13:55:17.433117 [INFO] Removing /var/app/current/ if it exists
2024/12/01 13:55:17.576911 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 13:55:17.576958 [INFO] Register application processes...
2024/12/01 13:55:17.576962 [INFO] Registering the proc: web

2024/12/01 13:55:17.576971 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:55:17.630424 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:55:17.933937 [INFO] Running command: systemctl reset-failed
2024/12/01 13:55:17.940708 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 13:55:17.948013 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 13:55:18.210013 [INFO] Running command: systemctl start eb-app.target
2024/12/01 13:55:18.218454 [INFO] Running command: systemctl enable web.service
2024/12/01 13:55:18.486211 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 13:55:18.486231 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:55:18.496463 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:55:18.503445 [INFO] Running command: systemctl start web.service
2024/12/01 13:55:18.553124 [INFO] Executing instruction: start X-Ray
2024/12/01 13:55:18.553139 [INFO] X-Ray is not enabled.
2024/12/01 13:55:18.553142 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 13:55:18.553159 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 13:55:18.583263 [INFO] nginx: [emerg] "http" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 13:55:18.583279 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "http" directive is not allowed here in /var/proxy/staging/nginx/conf.d/custom.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 13:55:18.583282 [INFO] Executing cleanup logic
2024/12/01 13:55:18.584744 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733061312134,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733061318583,"severity":"ERROR"}]}]}

2024/12/01 13:55:18.584958 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 13:57:11.047191 [INFO] Starting...
2024/12/01 13:57:11.047506 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 13:57:11.047524 [INFO] reading event message file
2024/12/01 13:57:11.047652 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 13:57:11.125927 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 13:57:11.423503 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 13:57:11.710500 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 13:57:11.710511 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 13:57:11.710514 [INFO] Engine command: (app-deploy)

2024/12/01 13:57:11.710520 [INFO] Downloading EB Application...
2024/12/01 13:57:11.710523 [INFO] Region: us-east-1
2024/12/01 13:57:11.710527 [INFO] envID: e-phgumpyagn
2024/12/01 13:57:11.710530 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 13:57:11.710533 [INFO] Using manifest file name from command request
2024/12/01 13:57:11.710538 [INFO] Manifest name is : manifest_1733061428503
2024/12/01 13:57:11.710540 [INFO] Download app version manifest
2024/12/01 13:57:11.710638 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733061428503
2024/12/01 13:57:11.743104 [INFO] Download successful104bytes downloaded
2024/12/01 13:57:11.743241 [INFO] Trying to read and parse version manifest...
2024/12/01 13:57:11.745111 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_085649564488
2024/12/01 13:57:12.629364 [INFO] Download successful88764376bytes downloaded
2024/12/01 13:57:12.629547 [INFO] Executing instruction: ElectLeader
2024/12/01 13:57:12.629553 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 13:57:12.629556 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 13:57:12.629565 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 37c68ae4-9b46-4eb0-a1f8-c7280750d20f --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 13:57:12.926523 [INFO] Instance is Leader.
2024/12/01 13:57:12.926573 [INFO] Executing instruction: stopSqsd
2024/12/01 13:57:12.926578 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 13:57:12.926581 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 13:57:12.926584 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 13:57:12.926594 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 13:57:13.248282 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 13:57:13.248297 [INFO] Executing instruction: StageApplication
2024/12/01 13:57:13.248301 [INFO] Recreating /var/app/staging/
2024/12/01 13:57:13.248390 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 13:57:13.248400 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 13:57:15.255127 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 13:57:15.322203 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 13:57:15.322280 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 13:57:15.322294 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 13:57:15.322297 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 13:57:15.322303 [INFO] Executing instruction: InstallDependency
2024/12/01 13:57:15.322307 [INFO] checking dependencies file
2024/12/01 13:57:15.322318 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 13:57:15.322336 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 13:57:19.020303 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 13:57:19.020337 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 13:57:19.020343 [INFO] Executing instruction: check Procfile
2024/12/01 13:57:19.020387 [INFO] detected Procfile in application source bundle ...
2024/12/01 13:57:19.020393 [INFO] Executing instruction: configure X-Ray
2024/12/01 13:57:19.020398 [INFO] X-Ray is not enabled.
2024/12/01 13:57:19.020402 [INFO] Executing instruction: configure proxy server
2024/12/01 13:57:19.020418 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 13:57:19.029713 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 13:57:19.039409 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 13:57:19.042112 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:57:19.067820 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 13:57:19.067835 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:57:19.075935 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 13:57:19.082728 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:57:19.090678 [INFO] Running command: systemctl stop healthd.service
2024/12/01 13:57:19.164835 [INFO] Running command: systemctl disable healthd.service
2024/12/01 13:57:19.457044 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 13:57:19.457102 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:57:19.719222 [INFO] Running command: systemctl reset-failed
2024/12/01 13:57:19.729659 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:57:19.990537 [INFO] Running command: systemctl reset-failed
2024/12/01 13:57:19.998031 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 13:57:20.005685 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 13:57:20.270075 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 13:57:20.278795 [INFO] Running command: systemctl enable healthd.service
2024/12/01 13:57:20.536843 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 13:57:20.536866 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 13:57:20.547406 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 13:57:20.554389 [INFO] Running command: systemctl start healthd.service
2024/12/01 13:57:20.600589 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 13:57:20.601184 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 13:57:20.601786 [INFO] Executing instruction: configure log streaming
2024/12/01 13:57:20.601803 [INFO] log streaming is not enabled
2024/12/01 13:57:20.601806 [INFO] disable log stream
2024/12/01 13:57:20.601814 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 13:57:20.614500 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 13:57:20.635118 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 13:57:20.635129 [INFO] Checking if logs need forced rotation
2024/12/01 13:57:20.635140 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 13:57:21.153213 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 13:57:21.650889 [INFO] Generating rsyslog config from Procfile
2024/12/01 13:57:21.652817 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 13:57:21.770890 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 13:57:21.770951 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 13:57:21.770963 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 13:57:22.167443 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 13:57:22.167459 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 13:57:22.167621 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 13:57:22.167626 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 13:57:22.167658 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 13:57:22.167692 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 13:57:22.167696 [INFO] Try add execution permission
2024/12/01 13:57:22.167702 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 13:57:22.167717 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 13:57:22.174176 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 13:57:22.174188 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 13:57:22.178561 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 13:57:22.178571 [INFO] Executing instruction: stop X-Ray
2024/12/01 13:57:22.178574 [INFO] stop X-Ray ...
2024/12/01 13:57:22.178580 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 13:57:22.188868 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 13:57:22.188880 [INFO] Running command: systemctl stop xray.service
2024/12/01 13:57:22.202685 [INFO] Executing instruction: stop proxy
2024/12/01 13:57:22.202698 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 13:57:22.213554 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 13:57:22.213568 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 13:57:22.224386 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 13:57:22.224397 [INFO] Executing instruction: FlipApplication
2024/12/01 13:57:22.224400 [INFO] Fetching environment variables...
2024/12/01 13:57:22.224557 [INFO] Purge old process...
2024/12/01 13:57:22.224569 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 13:57:22.235832 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 13:57:22.244032 [INFO] web.service

2024/12/01 13:57:22.244044 [INFO] deregistering process: web
2024/12/01 13:57:22.244051 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:57:22.253403 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:57:22.259158 [INFO] Running command: systemctl disable web.service
2024/12/01 13:57:22.516353 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 13:57:22.516411 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:57:22.785505 [INFO] Running command: systemctl reset-failed
2024/12/01 13:57:22.795195 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:57:22.802014 [INFO] Process web has not been fully terminated
2024/12/01 13:57:22.802022 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 13:57:23.802280 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:57:23.809559 [INFO] Process web has been fully terminated
2024/12/01 13:57:23.809569 [INFO] All processes have been fully terminated
2024/12/01 13:57:23.809574 [INFO] Removing /var/app/current/ if it exists
2024/12/01 13:57:23.970014 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 13:57:23.970040 [INFO] Register application processes...
2024/12/01 13:57:23.970044 [INFO] Registering the proc: web

2024/12/01 13:57:23.970054 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:57:24.014300 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:57:24.273849 [INFO] Running command: systemctl reset-failed
2024/12/01 13:57:24.280954 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 13:57:24.287631 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 13:57:24.546594 [INFO] Running command: systemctl start eb-app.target
2024/12/01 13:57:24.557259 [INFO] Running command: systemctl enable web.service
2024/12/01 13:57:24.819483 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 13:57:24.819503 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 13:57:24.829796 [INFO] Running command: systemctl is-active web.service
2024/12/01 13:57:24.837986 [INFO] Running command: systemctl start web.service
2024/12/01 13:57:24.915592 [INFO] Executing instruction: start X-Ray
2024/12/01 13:57:24.915605 [INFO] X-Ray is not enabled.
2024/12/01 13:57:24.915609 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 13:57:24.915624 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 13:57:24.953886 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 13:57:24.954040 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 13:57:24.956823 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 13:57:24.982570 [INFO] Running command: systemctl daemon-reload
2024/12/01 13:57:25.436022 [INFO] Running command: systemctl reset-failed
2024/12/01 13:57:25.452551 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 13:57:25.481748 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 13:57:25.494492 [INFO] Running command: systemctl start nginx.service
2024/12/01 13:57:25.670907 [INFO] Executing instruction: configureSqsd
2024/12/01 13:57:25.672621 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 13:57:25.672626 [INFO] Executing instruction: startSqsd
2024/12/01 13:57:25.672628 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 13:57:25.672632 [INFO] Executing instruction: Track pids in healthd
2024/12/01 13:57:25.672635 [INFO] This is an enhanced health env...
2024/12/01 13:57:25.672645 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 13:57:25.692769 [INFO] cfn-hup.service nginx.service healthd.service

2024/12/01 13:57:25.692787 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 13:57:25.714361 [INFO] web.service

2024/12/01 13:57:25.714539 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 13:57:25.714552 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 13:57:25.714568 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/12/01 13:57:25.714571 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/12/01 13:57:25.714575 [INFO] Executing cleanup logic
2024/12/01 13:57:25.714682 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733061439020,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1733061445714,"severity":"INFO"}]}]}

2024/12/01 13:57:25.715789 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:17:55.593496 [INFO] Starting...
2024/12/01 14:17:55.593545 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:17:55.593561 [INFO] reading event message file
2024/12/01 14:17:55.593689 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:17:55.662096 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:17:55.954502 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:17:56.246769 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:17:56.246781 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:17:56.246784 [INFO] Engine command: (app-deploy)

2024/12/01 14:17:56.246788 [INFO] Downloading EB Application...
2024/12/01 14:17:56.246791 [INFO] Region: us-east-1
2024/12/01 14:17:56.246793 [INFO] envID: e-phgumpyagn
2024/12/01 14:17:56.246796 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:17:56.246799 [INFO] Using manifest file name from command request
2024/12/01 14:17:56.246804 [INFO] Manifest name is : manifest_1733062672697
2024/12/01 14:17:56.246806 [INFO] Download app version manifest
2024/12/01 14:17:56.246908 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733062672697
2024/12/01 14:17:56.273466 [INFO] Download successful104bytes downloaded
2024/12/01 14:17:56.273734 [INFO] Trying to read and parse version manifest...
2024/12/01 14:17:56.277769 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_091732859794
2024/12/01 14:17:58.765170 [INFO] Download successful88765095bytes downloaded
2024/12/01 14:17:58.765377 [INFO] Executing instruction: ElectLeader
2024/12/01 14:17:58.765382 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:17:58.765391 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:17:58.765400 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id eb5167d3-3eec-43d4-a87e-a2d784c4e755 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:17:59.015933 [INFO] Instance is Leader.
2024/12/01 14:17:59.015984 [INFO] Executing instruction: stopSqsd
2024/12/01 14:17:59.015989 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:17:59.015992 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:17:59.015995 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:17:59.016006 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:17:59.299516 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:17:59.299559 [INFO] Executing instruction: StageApplication
2024/12/01 14:17:59.299565 [INFO] Recreating /var/app/staging/
2024/12/01 14:17:59.299639 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:17:59.299654 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:18:01.301824 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:18:01.370524 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:18:01.370557 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:18:01.370572 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:18:01.370575 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:18:01.370582 [INFO] Executing instruction: InstallDependency
2024/12/01 14:18:01.370586 [INFO] checking dependencies file
2024/12/01 14:18:01.370597 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:18:01.370607 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:18:05.084825 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:18:05.086025 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:18:05.086033 [INFO] Executing instruction: check Procfile
2024/12/01 14:18:05.086077 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:18:05.086083 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:18:05.086087 [INFO] X-Ray is not enabled.
2024/12/01 14:18:05.086090 [INFO] Executing instruction: configure proxy server
2024/12/01 14:18:05.086104 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:18:05.093336 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:18:05.101674 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:18:05.104012 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:18:05.151536 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:18:05.151555 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:18:05.167730 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:18:05.177307 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:18:05.185221 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:18:05.254291 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:18:05.554829 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:18:05.555950 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:05.851262 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:05.862899 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:06.123662 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:06.131417 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:18:06.139772 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:18:06.400597 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:18:06.408805 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:18:06.668870 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:18:06.668891 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:18:06.678371 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:18:06.685409 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:18:06.743424 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:18:06.744609 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:18:06.745832 [INFO] Executing instruction: configure log streaming
2024/12/01 14:18:06.745840 [INFO] log streaming is not enabled
2024/12/01 14:18:06.745843 [INFO] disable log stream
2024/12/01 14:18:06.745851 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:18:06.757185 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:18:06.775997 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:18:06.776007 [INFO] Checking if logs need forced rotation
2024/12/01 14:18:06.776017 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:18:07.268022 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:18:07.771866 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:18:07.774577 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:18:08.107714 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:18:08.108450 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:18:08.108470 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:18:08.510348 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:18:08.510366 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:18:08.510468 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:18:08.510472 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:18:08.510484 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:18:08.510516 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:18:08.510520 [INFO] Try add execution permission
2024/12/01 14:18:08.510525 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:18:08.510537 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:18:08.517738 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:18:08.517751 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:18:08.523150 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:18:08.523162 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:18:08.523166 [INFO] stop X-Ray ...
2024/12/01 14:18:08.523172 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:18:08.533805 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:18:08.533817 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:18:08.546410 [INFO] Executing instruction: stop proxy
2024/12/01 14:18:08.546423 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:18:08.558206 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:18:08.558221 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:18:08.569006 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 14:18:08.576422 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:18:08.584525 [INFO] Running command: systemctl stop nginx.service
2024/12/01 14:18:08.687521 [INFO] Running command: systemctl disable nginx.service
2024/12/01 14:18:08.960253 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:09.215407 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:09.223585 [INFO] Executing instruction: FlipApplication
2024/12/01 14:18:09.223596 [INFO] Fetching environment variables...
2024/12/01 14:18:09.223811 [INFO] Purge old process...
2024/12/01 14:18:09.223824 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:18:09.232971 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:18:09.242146 [INFO] web.service

2024/12/01 14:18:09.242155 [INFO] deregistering process: web
2024/12/01 14:18:09.242161 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:18:09.252009 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:18:09.258570 [INFO] Running command: systemctl disable web.service
2024/12/01 14:18:09.649962 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:18:09.650025 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:09.906263 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:09.916659 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:18:09.932847 [INFO] Process web has not been fully terminated
2024/12/01 14:18:09.932861 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:18:10.933333 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:18:10.940836 [INFO] Process web has been fully terminated
2024/12/01 14:18:10.940845 [INFO] All processes have been fully terminated
2024/12/01 14:18:10.940848 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:18:11.091435 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:18:11.091473 [INFO] Register application processes...
2024/12/01 14:18:11.091477 [INFO] Registering the proc: web

2024/12/01 14:18:11.091486 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:18:11.125764 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:11.386531 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:11.393305 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:18:11.401129 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:18:11.658774 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:18:11.670114 [INFO] Running command: systemctl enable web.service
2024/12/01 14:18:11.931292 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:18:11.931312 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:18:11.941196 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:18:11.948101 [INFO] Running command: systemctl start web.service
2024/12/01 14:18:12.010749 [INFO] Executing instruction: start X-Ray
2024/12/01 14:18:12.010763 [INFO] X-Ray is not enabled.
2024/12/01 14:18:12.010766 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:18:12.010958 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:18:12.052501 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 14:18:12.052701 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 14:18:12.056101 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:18:12.085635 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:18:12.523836 [INFO] Running command: systemctl reset-failed
2024/12/01 14:18:12.544183 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:18:12.568691 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 14:18:12.586310 [INFO] Running command: systemctl start nginx.service
2024/12/01 14:18:12.774624 [INFO] Executing instruction: configureSqsd
2024/12/01 14:18:12.774638 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 14:18:12.774641 [INFO] Executing instruction: startSqsd
2024/12/01 14:18:12.774644 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 14:18:12.774647 [INFO] Executing instruction: Track pids in healthd
2024/12/01 14:18:12.774651 [INFO] This is an enhanced health env...
2024/12/01 14:18:12.774659 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 14:18:12.795255 [INFO] healthd.service nginx.service cfn-hup.service

2024/12/01 14:18:12.795275 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:18:12.815070 [INFO] web.service

2024/12/01 14:18:12.815266 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 14:18:12.815300 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 14:18:12.815659 [INFO] Following scripts will be executed in order: [01_static_files.sh]
2024/12/01 14:18:12.815664 [INFO] Try add execution permission
2024/12/01 14:18:12.815670 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:18:12.815686 [INFO] Running command: file -b /var/app/current/.platform/hooks/postdeploy/01_static_files.sh
2024/12/01 14:18:12.817956 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:18:12.817964 [INFO] Running script: .platform/hooks/postdeploy/01_static_files.sh
2024/12/01 14:18:12.833399 [ERROR] An error occurred during execution of command [app-deploy] - [RunAppDeployPostDeployHooks]. Stop running the command. Error: Command .platform/hooks/postdeploy/01_static_files.sh failed with error exit status 1. Stderr:ln: target '/var/app/current/staticjs/': No such file or directory
ln: target '/var/app/current/staticcss/': No such file or directory
 

2024/12/01 14:18:12.833405 [INFO] Executing cleanup logic
2024/12/01 14:18:12.833499 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733062685086,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733062692833,"severity":"ERROR"}]}]}

2024/12/01 14:18:12.833714 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:19:01.091733 [INFO] Starting...
2024/12/01 14:19:01.091765 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:19:01.091781 [INFO] reading event message file
2024/12/01 14:19:01.092297 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:19:01.163668 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:19:01.468161 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:19:01.784985 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:19:01.784996 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:19:01.784999 [INFO] Engine command: (app-deploy)

2024/12/01 14:19:01.785006 [INFO] Downloading EB Application...
2024/12/01 14:19:01.785009 [INFO] Region: us-east-1
2024/12/01 14:19:01.785011 [INFO] envID: e-phgumpyagn
2024/12/01 14:19:01.785014 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:19:01.785017 [INFO] Using manifest file name from command request
2024/12/01 14:19:01.785022 [INFO] Manifest name is : manifest_1733062738568
2024/12/01 14:19:01.785024 [INFO] Download app version manifest
2024/12/01 14:19:01.785123 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733062738568
2024/12/01 14:19:01.821445 [INFO] Download successful104bytes downloaded
2024/12/01 14:19:01.821603 [INFO] Trying to read and parse version manifest...
2024/12/01 14:19:01.823195 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_091839827768
2024/12/01 14:19:03.252477 [INFO] Download successful88765097bytes downloaded
2024/12/01 14:19:03.252706 [INFO] Executing instruction: ElectLeader
2024/12/01 14:19:03.252712 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:19:03.252715 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:19:03.252724 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id c6bf5b85-27db-4202-beb1-2a7f00a359e4 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:19:03.553092 [INFO] Instance is Leader.
2024/12/01 14:19:03.553142 [INFO] Executing instruction: stopSqsd
2024/12/01 14:19:03.553146 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:19:03.553149 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:19:03.553153 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:19:03.553163 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:19:03.884297 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:19:03.884314 [INFO] Executing instruction: StageApplication
2024/12/01 14:19:03.884318 [INFO] Recreating /var/app/staging/
2024/12/01 14:19:03.884408 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:19:03.884417 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:19:05.894071 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:19:05.958431 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:19:05.958464 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:19:05.958479 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:19:05.958482 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:19:05.958486 [INFO] Executing instruction: InstallDependency
2024/12/01 14:19:05.958491 [INFO] checking dependencies file
2024/12/01 14:19:05.958502 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:19:05.958511 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:19:09.673013 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:19:09.673059 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:19:09.673065 [INFO] Executing instruction: check Procfile
2024/12/01 14:19:09.673107 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:19:09.673114 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:19:09.673117 [INFO] X-Ray is not enabled.
2024/12/01 14:19:09.673120 [INFO] Executing instruction: configure proxy server
2024/12/01 14:19:09.673135 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:19:09.680994 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:19:09.689955 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:19:09.692872 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:19:09.742797 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:19:09.742815 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:19:09.759704 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:19:09.769499 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:19:09.778213 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:19:09.834838 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:19:10.145896 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:19:10.146004 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:10.447991 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:10.460609 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:10.717141 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:10.725660 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:19:10.732387 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:19:10.987285 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:19:10.996488 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:19:11.260773 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:19:11.261118 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:19:11.270354 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:19:11.277860 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:19:11.335110 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:19:11.335769 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:19:11.336356 [INFO] Executing instruction: configure log streaming
2024/12/01 14:19:11.336363 [INFO] log streaming is not enabled
2024/12/01 14:19:11.336365 [INFO] disable log stream
2024/12/01 14:19:11.336374 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:19:11.347699 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:19:11.366385 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:19:11.366397 [INFO] Checking if logs need forced rotation
2024/12/01 14:19:11.366410 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:19:11.855710 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:19:12.361281 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:19:12.364602 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:19:12.863819 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:19:12.863844 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:19:12.863866 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:19:13.259852 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:19:13.259871 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:19:13.259978 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:19:13.259982 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:19:13.259994 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:19:13.260038 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:19:13.260043 [INFO] Try add execution permission
2024/12/01 14:19:13.260049 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:19:13.260062 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:19:13.263873 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:19:13.263885 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:19:13.269135 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:19:13.269145 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:19:13.269148 [INFO] stop X-Ray ...
2024/12/01 14:19:13.269154 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:19:13.279205 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:19:13.279217 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:19:13.292917 [INFO] Executing instruction: stop proxy
2024/12/01 14:19:13.292931 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:19:13.303898 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:19:13.303918 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:19:13.315955 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 14:19:13.322170 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:19:13.329654 [INFO] Running command: systemctl stop nginx.service
2024/12/01 14:19:13.438443 [INFO] Running command: systemctl disable nginx.service
2024/12/01 14:19:13.704922 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:13.977291 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:13.985710 [INFO] Executing instruction: FlipApplication
2024/12/01 14:19:13.985721 [INFO] Fetching environment variables...
2024/12/01 14:19:13.985931 [INFO] Purge old process...
2024/12/01 14:19:13.985946 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:19:13.997896 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:19:14.007032 [INFO] web.service

2024/12/01 14:19:14.007046 [INFO] deregistering process: web
2024/12/01 14:19:14.007053 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:19:14.016890 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:19:14.023383 [INFO] Running command: systemctl disable web.service
2024/12/01 14:19:14.288350 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:19:14.288414 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:14.706742 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:14.716597 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:19:14.723121 [INFO] Process web has not been fully terminated
2024/12/01 14:19:14.723132 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:19:15.723220 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:19:15.731127 [INFO] Process web has been fully terminated
2024/12/01 14:19:15.731137 [INFO] All processes have been fully terminated
2024/12/01 14:19:15.731140 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:19:15.880956 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:19:15.880982 [INFO] Register application processes...
2024/12/01 14:19:15.881000 [INFO] Registering the proc: web

2024/12/01 14:19:15.881009 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:19:15.920621 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:16.181731 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:16.189020 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:19:16.195969 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:19:16.461915 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:19:16.473026 [INFO] Running command: systemctl enable web.service
2024/12/01 14:19:16.729592 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:19:16.729613 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:19:16.740261 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:19:16.746662 [INFO] Running command: systemctl start web.service
2024/12/01 14:19:16.803617 [INFO] Executing instruction: start X-Ray
2024/12/01 14:19:16.803632 [INFO] X-Ray is not enabled.
2024/12/01 14:19:16.803635 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:19:16.803649 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:19:16.842644 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 2048 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/12/01 14:19:16.842840 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/12/01 14:19:16.854343 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:19:16.875034 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:19:17.321904 [INFO] Running command: systemctl reset-failed
2024/12/01 14:19:17.333233 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:19:17.358617 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 14:19:17.375946 [INFO] Running command: systemctl start nginx.service
2024/12/01 14:19:17.553590 [INFO] Executing instruction: configureSqsd
2024/12/01 14:19:17.553603 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/12/01 14:19:17.553606 [INFO] Executing instruction: startSqsd
2024/12/01 14:19:17.553609 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/12/01 14:19:17.553612 [INFO] Executing instruction: Track pids in healthd
2024/12/01 14:19:17.553615 [INFO] This is an enhanced health env...
2024/12/01 14:19:17.553623 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/12/01 14:19:17.568127 [INFO] healthd.service cfn-hup.service nginx.service

2024/12/01 14:19:17.568145 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:19:17.582065 [INFO] web.service

2024/12/01 14:19:17.582759 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/12/01 14:19:17.582818 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/12/01 14:19:17.582860 [INFO] Following scripts will be executed in order: [01_static_files.sh]
2024/12/01 14:19:17.582865 [INFO] Try add execution permission
2024/12/01 14:19:17.582871 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:19:17.582883 [INFO] Running command: file -b /var/app/current/.platform/hooks/postdeploy/01_static_files.sh
2024/12/01 14:19:17.587910 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:19:17.587918 [INFO] Running script: .platform/hooks/postdeploy/01_static_files.sh
2024/12/01 14:19:17.602330 [ERROR] An error occurred during execution of command [app-deploy] - [RunAppDeployPostDeployHooks]. Stop running the command. Error: Command .platform/hooks/postdeploy/01_static_files.sh failed with error exit status 1. Stderr:ln: target '/var/app/current/staticjs/': No such file or directory
ln: target '/var/app/current/staticcss/': No such file or directory
 

2024/12/01 14:19:17.602336 [INFO] Executing cleanup logic
2024/12/01 14:19:17.602452 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733062749673,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733062757602,"severity":"ERROR"}]}]}

2024/12/01 14:19:17.602660 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:22:09.598033 [INFO] Starting...
2024/12/01 14:22:09.598067 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:22:09.598084 [INFO] reading event message file
2024/12/01 14:22:09.598197 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:22:09.669815 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:22:09.955862 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:22:10.237552 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 14:22:10.237564 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:22:10.237567 [INFO] Engine command: (tail-log)

2024/12/01 14:22:10.237604 [INFO] Executing instruction: GetTailLogs
2024/12/01 14:22:10.237607 [INFO] Tail Logs...
2024/12/01 14:22:10.237846 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 14:22:10.242466 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 14:22:10.244278 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 14:22:10.245667 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 14:22:10.249761 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 14:22:10.352640 [INFO] Executing cleanup logic
2024/12/01 14:22:10.352717 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733062930352,"severity":"INFO"}]}]}

2024/12/01 14:22:10.352815 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 14:23:24.461467 [INFO] Starting...
2024/12/01 14:23:24.461499 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:23:24.461516 [INFO] reading event message file
2024/12/01 14:23:24.461628 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:23:24.537096 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:23:24.837679 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:23:25.153236 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:23:25.153247 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:23:25.153250 [INFO] Engine command: (app-deploy)

2024/12/01 14:23:25.153255 [INFO] Downloading EB Application...
2024/12/01 14:23:25.153267 [INFO] Region: us-east-1
2024/12/01 14:23:25.153270 [INFO] envID: e-phgumpyagn
2024/12/01 14:23:25.153273 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:23:25.153276 [INFO] Using manifest file name from command request
2024/12/01 14:23:25.153281 [INFO] Manifest name is : manifest_1733063001635
2024/12/01 14:23:25.153283 [INFO] Download app version manifest
2024/12/01 14:23:25.153949 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733063001635
2024/12/01 14:23:25.186021 [INFO] Download successful104bytes downloaded
2024/12/01 14:23:25.186147 [INFO] Trying to read and parse version manifest...
2024/12/01 14:23:25.187982 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_092301823192
2024/12/01 14:23:26.532038 [INFO] Download successful88765381bytes downloaded
2024/12/01 14:23:26.532289 [INFO] Executing instruction: ElectLeader
2024/12/01 14:23:26.532296 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:23:26.532299 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:23:26.532309 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id e24471b9-41a2-446d-95e2-cad0c7fce716 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:23:26.780285 [INFO] Instance is Leader.
2024/12/01 14:23:26.780334 [INFO] Executing instruction: stopSqsd
2024/12/01 14:23:26.780338 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:23:26.780341 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:23:26.780344 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:23:26.780354 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:23:27.050743 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:23:27.050760 [INFO] Executing instruction: StageApplication
2024/12/01 14:23:27.050777 [INFO] Recreating /var/app/staging/
2024/12/01 14:23:27.050860 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:23:27.050870 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:23:29.050513 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:23:29.116140 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:23:29.116186 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:23:29.116200 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:23:29.116203 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:23:29.116207 [INFO] Executing instruction: InstallDependency
2024/12/01 14:23:29.116214 [INFO] checking dependencies file
2024/12/01 14:23:29.116229 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:23:29.116237 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:23:32.845070 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:23:32.845102 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:23:32.845107 [INFO] Executing instruction: check Procfile
2024/12/01 14:23:32.845155 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:23:32.845162 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:23:32.845166 [INFO] X-Ray is not enabled.
2024/12/01 14:23:32.845169 [INFO] Executing instruction: configure proxy server
2024/12/01 14:23:32.845183 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:23:32.854062 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:23:32.863505 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:23:32.866367 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:23:32.892629 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:23:32.892644 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:23:32.900226 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:23:32.906559 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:23:32.914367 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:23:32.984653 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:23:33.275858 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:23:33.276013 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:23:33.538987 [INFO] Running command: systemctl reset-failed
2024/12/01 14:23:33.549488 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:23:33.808069 [INFO] Running command: systemctl reset-failed
2024/12/01 14:23:33.815903 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:23:33.822763 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:23:34.081248 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:23:34.089697 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:23:34.358897 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:23:34.358928 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:23:34.369688 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:23:34.376606 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:23:34.432693 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:23:34.434095 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:23:34.435630 [INFO] Executing instruction: configure log streaming
2024/12/01 14:23:34.435641 [INFO] log streaming is not enabled
2024/12/01 14:23:34.435667 [INFO] disable log stream
2024/12/01 14:23:34.435675 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:23:34.446453 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:23:34.465175 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:23:34.465186 [INFO] Checking if logs need forced rotation
2024/12/01 14:23:34.465298 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:23:34.973045 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:23:35.493398 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:23:35.496187 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:23:35.860563 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:23:35.860587 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:23:35.860597 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:23:36.257806 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:23:36.257822 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:23:36.257928 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:23:36.257933 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:23:36.257944 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:23:36.257981 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:23:36.257985 [INFO] Try add execution permission
2024/12/01 14:23:36.257990 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:23:36.258003 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:23:36.271053 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:23:36.271066 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:23:36.276995 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:23:36.277007 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:23:36.277010 [INFO] stop X-Ray ...
2024/12/01 14:23:36.277017 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:23:36.286895 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:23:36.286922 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:23:36.298165 [INFO] Executing instruction: stop proxy
2024/12/01 14:23:36.298178 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:23:36.309916 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:23:36.309929 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:23:36.321389 [INFO] Running command: systemctl is-active nginx.service
2024/12/01 14:23:36.328290 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:23:36.337591 [INFO] Running command: systemctl stop nginx.service
2024/12/01 14:23:36.437776 [INFO] Running command: systemctl disable nginx.service
2024/12/01 14:23:36.699647 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:23:36.957370 [INFO] Running command: systemctl reset-failed
2024/12/01 14:23:36.965723 [INFO] Executing instruction: FlipApplication
2024/12/01 14:23:36.965735 [INFO] Fetching environment variables...
2024/12/01 14:23:36.965896 [INFO] Purge old process...
2024/12/01 14:23:36.965910 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:23:36.974752 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:23:36.983589 [INFO] web.service

2024/12/01 14:23:36.983600 [INFO] deregistering process: web
2024/12/01 14:23:36.983606 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:23:36.992476 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:23:36.998977 [INFO] Running command: systemctl disable web.service
2024/12/01 14:23:37.307423 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:23:37.307489 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:23:37.770808 [INFO] Running command: systemctl reset-failed
2024/12/01 14:23:37.783169 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:23:37.793536 [INFO] Process web has not been fully terminated
2024/12/01 14:23:37.793547 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:23:38.793625 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:23:38.830716 [INFO] Process web has been fully terminated
2024/12/01 14:23:38.830733 [INFO] All processes have been fully terminated
2024/12/01 14:23:38.830737 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:23:39.033316 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:23:39.033359 [INFO] Register application processes...
2024/12/01 14:23:39.033363 [INFO] Registering the proc: web

2024/12/01 14:23:39.033372 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:23:39.077317 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:23:39.335477 [INFO] Running command: systemctl reset-failed
2024/12/01 14:23:39.356842 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:23:39.364259 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:23:39.623234 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:23:39.631511 [INFO] Running command: systemctl enable web.service
2024/12/01 14:23:39.881941 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:23:39.881961 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:23:39.892698 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:23:39.900362 [INFO] Running command: systemctl start web.service
2024/12/01 14:23:39.966836 [INFO] Executing instruction: start X-Ray
2024/12/01 14:23:39.966849 [INFO] X-Ray is not enabled.
2024/12/01 14:23:39.966852 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:23:39.966866 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:23:39.994073 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:23:39.994090 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:23:39.994094 [INFO] Executing cleanup logic
2024/12/01 14:23:39.994210 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733063012845,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733063019994,"severity":"ERROR"}]}]}

2024/12/01 14:23:39.994412 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:24:49.894280 [INFO] Starting...
2024/12/01 14:24:49.894323 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:24:49.894340 [INFO] reading event message file
2024/12/01 14:24:49.894456 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:24:49.964782 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:24:50.256772 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:24:50.541045 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:24:50.541057 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:24:50.541060 [INFO] Engine command: (app-deploy)

2024/12/01 14:24:50.541065 [INFO] Downloading EB Application...
2024/12/01 14:24:50.541067 [INFO] Region: us-east-1
2024/12/01 14:24:50.541070 [INFO] envID: e-phgumpyagn
2024/12/01 14:24:50.541073 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:24:50.541075 [INFO] Using manifest file name from command request
2024/12/01 14:24:50.541080 [INFO] Manifest name is : manifest_1733063087455
2024/12/01 14:24:50.541082 [INFO] Download app version manifest
2024/12/01 14:24:50.541195 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733063087455
2024/12/01 14:24:50.580452 [INFO] Download successful104bytes downloaded
2024/12/01 14:24:50.580610 [INFO] Trying to read and parse version manifest...
2024/12/01 14:24:50.582502 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_092428696838
2024/12/01 14:24:52.202527 [INFO] Download successful88765377bytes downloaded
2024/12/01 14:24:52.202749 [INFO] Executing instruction: ElectLeader
2024/12/01 14:24:52.202756 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:24:52.202759 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:24:52.202769 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 661d73a0-c386-44f8-9cc4-28f0887b67c9 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:24:52.513966 [INFO] Instance is Leader.
2024/12/01 14:24:52.514037 [INFO] Executing instruction: stopSqsd
2024/12/01 14:24:52.514041 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:24:52.514044 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:24:52.514048 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:24:52.514059 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:24:52.838931 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:24:52.838961 [INFO] Executing instruction: StageApplication
2024/12/01 14:24:52.838965 [INFO] Recreating /var/app/staging/
2024/12/01 14:24:52.839050 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:24:52.839060 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:24:54.845178 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:24:54.906371 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:24:54.906402 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:24:54.906417 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:24:54.906420 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:24:54.906425 [INFO] Executing instruction: InstallDependency
2024/12/01 14:24:54.906431 [INFO] checking dependencies file
2024/12/01 14:24:54.906441 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:24:54.906450 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:24:58.588015 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:24:58.588053 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:24:58.588060 [INFO] Executing instruction: check Procfile
2024/12/01 14:24:58.588103 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:24:58.588110 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:24:58.588114 [INFO] X-Ray is not enabled.
2024/12/01 14:24:58.588121 [INFO] Executing instruction: configure proxy server
2024/12/01 14:24:58.588136 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:24:58.599732 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:24:58.611200 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:24:58.614767 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:24:58.638014 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:24:58.638028 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:24:58.646825 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:24:58.653190 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:24:58.660331 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:24:58.734466 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:24:58.997405 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:24:58.997506 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:24:59.263702 [INFO] Running command: systemctl reset-failed
2024/12/01 14:24:59.274891 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:24:59.527975 [INFO] Running command: systemctl reset-failed
2024/12/01 14:24:59.536212 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:24:59.543249 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:24:59.800263 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:24:59.808816 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:25:00.072977 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:25:00.073001 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:25:00.083633 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:25:00.091099 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:25:00.144153 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:25:00.146213 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:25:00.147495 [INFO] Executing instruction: configure log streaming
2024/12/01 14:25:00.147504 [INFO] log streaming is not enabled
2024/12/01 14:25:00.147507 [INFO] disable log stream
2024/12/01 14:25:00.147515 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:25:00.161595 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:25:00.178694 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:25:00.178705 [INFO] Checking if logs need forced rotation
2024/12/01 14:25:00.178716 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:25:00.674472 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:25:01.172521 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:25:01.175720 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:25:01.612778 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:25:01.612814 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:25:01.612825 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:25:02.048001 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:25:02.048035 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:25:02.048137 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:25:02.048141 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:25:02.048154 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:25:02.048187 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:25:02.048191 [INFO] Try add execution permission
2024/12/01 14:25:02.048196 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:25:02.048209 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:25:02.053892 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:25:02.053916 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:25:02.058831 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:25:02.058846 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:25:02.058850 [INFO] stop X-Ray ...
2024/12/01 14:25:02.058856 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:25:02.069839 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:25:02.069854 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:25:02.083775 [INFO] Executing instruction: stop proxy
2024/12/01 14:25:02.083792 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:25:02.094882 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:25:02.094897 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:25:02.107057 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 14:25:02.107071 [INFO] Executing instruction: FlipApplication
2024/12/01 14:25:02.107078 [INFO] Fetching environment variables...
2024/12/01 14:25:02.108625 [INFO] Purge old process...
2024/12/01 14:25:02.108652 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:25:02.118021 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:25:02.126597 [INFO] web.service

2024/12/01 14:25:02.126609 [INFO] deregistering process: web
2024/12/01 14:25:02.126617 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:25:02.136290 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:25:02.142739 [INFO] Running command: systemctl disable web.service
2024/12/01 14:25:02.420168 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:25:02.420234 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:25:02.884893 [INFO] Running command: systemctl reset-failed
2024/12/01 14:25:02.903293 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:25:02.913132 [INFO] Process web has not been fully terminated
2024/12/01 14:25:02.913148 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:25:03.913601 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:25:03.920976 [INFO] Process web has been fully terminated
2024/12/01 14:25:03.920987 [INFO] All processes have been fully terminated
2024/12/01 14:25:03.920990 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:25:04.058299 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:25:04.058357 [INFO] Register application processes...
2024/12/01 14:25:04.058362 [INFO] Registering the proc: web

2024/12/01 14:25:04.058371 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:25:04.109965 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:25:04.371054 [INFO] Running command: systemctl reset-failed
2024/12/01 14:25:04.378348 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:25:04.386723 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:25:04.650248 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:25:04.664231 [INFO] Running command: systemctl enable web.service
2024/12/01 14:25:04.938018 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:25:04.938038 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:25:04.949302 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:25:04.957733 [INFO] Running command: systemctl start web.service
2024/12/01 14:25:05.022754 [INFO] Executing instruction: start X-Ray
2024/12/01 14:25:05.022768 [INFO] X-Ray is not enabled.
2024/12/01 14:25:05.022772 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:25:05.022790 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:25:05.054421 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:25:05.054442 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:25:05.054446 [INFO] Executing cleanup logic
2024/12/01 14:25:05.054541 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733063098588,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733063105054,"severity":"ERROR"}]}]}

2024/12/01 14:25:05.054754 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:26:14.291301 [INFO] Starting...
2024/12/01 14:26:14.291333 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:26:14.291350 [INFO] reading event message file
2024/12/01 14:26:14.291476 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:26:14.370821 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:26:14.655117 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:26:14.940047 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:26:14.940059 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:26:14.940061 [INFO] Engine command: (app-deploy)

2024/12/01 14:26:14.940066 [INFO] Downloading EB Application...
2024/12/01 14:26:14.940069 [INFO] Region: us-east-1
2024/12/01 14:26:14.940071 [INFO] envID: e-phgumpyagn
2024/12/01 14:26:14.940074 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:26:14.940077 [INFO] Using manifest file name from command request
2024/12/01 14:26:14.940082 [INFO] Manifest name is : manifest_1733063171455
2024/12/01 14:26:14.940085 [INFO] Download app version manifest
2024/12/01 14:26:14.940209 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733063171455
2024/12/01 14:26:14.978699 [INFO] Download successful104bytes downloaded
2024/12/01 14:26:14.978862 [INFO] Trying to read and parse version manifest...
2024/12/01 14:26:14.980688 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_092551796065
2024/12/01 14:26:15.752907 [INFO] Download successful88765357bytes downloaded
2024/12/01 14:26:15.753127 [INFO] Executing instruction: ElectLeader
2024/12/01 14:26:15.753133 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:26:15.753136 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:26:15.753155 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id e03816e9-8a6b-4a61-9e65-43a295b7b695 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:26:16.039596 [INFO] Instance is Leader.
2024/12/01 14:26:16.039646 [INFO] Executing instruction: stopSqsd
2024/12/01 14:26:16.039652 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:26:16.039655 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:26:16.039658 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:26:16.039668 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:26:16.354706 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:26:16.355160 [INFO] Executing instruction: StageApplication
2024/12/01 14:26:16.355165 [INFO] Recreating /var/app/staging/
2024/12/01 14:26:16.355240 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:26:16.355249 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:26:18.346680 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:26:18.414841 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:26:18.414960 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:26:18.414978 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:26:18.414981 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:26:18.414986 [INFO] Executing instruction: InstallDependency
2024/12/01 14:26:18.414992 [INFO] checking dependencies file
2024/12/01 14:26:18.415003 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:26:18.415015 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:26:22.086855 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:26:22.086913 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:26:22.086922 [INFO] Executing instruction: check Procfile
2024/12/01 14:26:22.086968 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:26:22.086974 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:26:22.086978 [INFO] X-Ray is not enabled.
2024/12/01 14:26:22.086982 [INFO] Executing instruction: configure proxy server
2024/12/01 14:26:22.086997 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:26:22.097669 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:26:22.108321 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:26:22.111976 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:26:22.142293 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:26:22.142309 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:26:22.150877 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:26:22.158479 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:26:22.165321 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:26:22.234235 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:26:22.498117 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:26:22.498175 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:26:22.758581 [INFO] Running command: systemctl reset-failed
2024/12/01 14:26:22.770676 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:26:23.029768 [INFO] Running command: systemctl reset-failed
2024/12/01 14:26:23.039130 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:26:23.046435 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:26:23.310268 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:26:23.318336 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:26:23.580950 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:26:23.580971 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:26:23.592925 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:26:23.600095 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:26:23.657050 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:26:23.657830 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:26:23.658665 [INFO] Executing instruction: configure log streaming
2024/12/01 14:26:23.658672 [INFO] log streaming is not enabled
2024/12/01 14:26:23.658675 [INFO] disable log stream
2024/12/01 14:26:23.658683 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:26:23.676506 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:26:23.690269 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:26:23.690279 [INFO] Checking if logs need forced rotation
2024/12/01 14:26:23.690289 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:26:24.232616 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:26:24.706032 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:26:24.707858 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:26:25.110173 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:26:25.110197 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:26:25.110206 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:26:25.515449 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:26:25.515467 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:26:25.515570 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:26:25.515574 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:26:25.515586 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:26:25.515617 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:26:25.515621 [INFO] Try add execution permission
2024/12/01 14:26:25.515627 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:26:25.515640 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:26:25.520196 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:26:25.520205 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:26:25.525105 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:26:25.525116 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:26:25.525120 [INFO] stop X-Ray ...
2024/12/01 14:26:25.525127 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:26:25.535392 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:26:25.535404 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:26:25.548287 [INFO] Executing instruction: stop proxy
2024/12/01 14:26:25.548299 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:26:25.560496 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:26:25.560509 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:26:25.571281 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 14:26:25.571294 [INFO] Executing instruction: FlipApplication
2024/12/01 14:26:25.571297 [INFO] Fetching environment variables...
2024/12/01 14:26:25.571823 [INFO] Purge old process...
2024/12/01 14:26:25.571838 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:26:25.580080 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:26:25.589083 [INFO] web.service

2024/12/01 14:26:25.589093 [INFO] deregistering process: web
2024/12/01 14:26:25.589100 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:26:25.598139 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:26:25.604364 [INFO] Running command: systemctl disable web.service
2024/12/01 14:26:25.869168 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:26:25.869262 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:26:26.130395 [INFO] Running command: systemctl reset-failed
2024/12/01 14:26:26.144138 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:26:26.150865 [INFO] Process web has not been fully terminated
2024/12/01 14:26:26.150875 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:26:27.150981 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:26:27.157659 [INFO] Process web has not been fully terminated
2024/12/01 14:26:27.157673 [INFO] Some processes have not been fully terminated, sleeping 2 seconds now
2024/12/01 14:26:29.158016 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:26:29.165591 [INFO] Process web has been fully terminated
2024/12/01 14:26:29.165601 [INFO] All processes have been fully terminated
2024/12/01 14:26:29.165606 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:26:29.306524 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:26:29.306566 [INFO] Register application processes...
2024/12/01 14:26:29.306571 [INFO] Registering the proc: web

2024/12/01 14:26:29.306580 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:26:29.355489 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:26:29.614233 [INFO] Running command: systemctl reset-failed
2024/12/01 14:26:29.622867 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:26:29.630042 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:26:29.885441 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:26:29.895804 [INFO] Running command: systemctl enable web.service
2024/12/01 14:26:30.156020 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:26:30.156041 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:26:30.167402 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:26:30.173882 [INFO] Running command: systemctl start web.service
2024/12/01 14:26:30.223899 [INFO] Executing instruction: start X-Ray
2024/12/01 14:26:30.223912 [INFO] X-Ray is not enabled.
2024/12/01 14:26:30.223915 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:26:30.223930 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:26:30.248038 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:26:30.248054 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:26:30.248059 [INFO] Executing cleanup logic
2024/12/01 14:26:30.248180 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733063182086,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733063190248,"severity":"ERROR"}]}]}

2024/12/01 14:26:30.248380 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:33:17.145667 [INFO] Starting...
2024/12/01 14:33:17.145701 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:33:17.145717 [INFO] reading event message file
2024/12/01 14:33:17.145835 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:33:17.266449 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:33:17.560874 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:33:17.849613 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:33:17.849625 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:33:17.849629 [INFO] Engine command: (app-deploy)

2024/12/01 14:33:17.849633 [INFO] Downloading EB Application...
2024/12/01 14:33:17.849636 [INFO] Region: us-east-1
2024/12/01 14:33:17.849639 [INFO] envID: e-phgumpyagn
2024/12/01 14:33:17.849641 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:33:17.849644 [INFO] Using manifest file name from command request
2024/12/01 14:33:17.849649 [INFO] Manifest name is : manifest_1733063594299
2024/12/01 14:33:17.849651 [INFO] Download app version manifest
2024/12/01 14:33:17.849772 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733063594299
2024/12/01 14:33:17.918506 [INFO] Download successful104bytes downloaded
2024/12/01 14:33:17.918673 [INFO] Trying to read and parse version manifest...
2024/12/01 14:33:17.920167 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_093254973308
2024/12/01 14:33:18.696258 [INFO] Download successful88764816bytes downloaded
2024/12/01 14:33:18.697204 [INFO] Executing instruction: ElectLeader
2024/12/01 14:33:18.697211 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:33:18.697214 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:33:18.697240 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 363f3477-6c8f-425e-9f2a-98958ec5829e --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:33:19.006302 [INFO] Instance is Leader.
2024/12/01 14:33:19.006350 [INFO] Executing instruction: stopSqsd
2024/12/01 14:33:19.006355 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:33:19.006358 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:33:19.006361 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:33:19.006374 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:33:19.318949 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:33:19.318976 [INFO] Executing instruction: StageApplication
2024/12/01 14:33:19.318980 [INFO] Recreating /var/app/staging/
2024/12/01 14:33:19.319063 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:33:19.319074 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:33:21.310862 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:33:21.373299 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:33:21.373328 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:33:21.373343 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:33:21.373346 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:33:21.373351 [INFO] Executing instruction: InstallDependency
2024/12/01 14:33:21.373355 [INFO] checking dependencies file
2024/12/01 14:33:21.373366 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:33:21.373376 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:33:25.176668 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:33:25.176699 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:33:25.176705 [INFO] Executing instruction: check Procfile
2024/12/01 14:33:25.176746 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:33:25.176753 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:33:25.176757 [INFO] X-Ray is not enabled.
2024/12/01 14:33:25.176760 [INFO] Executing instruction: configure proxy server
2024/12/01 14:33:25.176774 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:33:25.189619 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:33:25.206075 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:33:25.209014 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:33:25.242988 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:33:25.243003 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:33:25.250320 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:33:25.256995 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:33:25.264669 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:33:25.365615 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:33:25.770032 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:33:25.770122 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:33:26.029401 [INFO] Running command: systemctl reset-failed
2024/12/01 14:33:26.042289 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:33:26.300486 [INFO] Running command: systemctl reset-failed
2024/12/01 14:33:26.309599 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:33:26.316509 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:33:26.580312 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:33:26.589517 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:33:26.846207 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:33:26.846228 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:33:26.856514 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:33:26.864232 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:33:26.912972 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:33:26.914757 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:33:26.916090 [INFO] Executing instruction: configure log streaming
2024/12/01 14:33:26.916097 [INFO] log streaming is not enabled
2024/12/01 14:33:26.916100 [INFO] disable log stream
2024/12/01 14:33:26.916109 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:33:26.932717 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:33:26.944597 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:33:26.944607 [INFO] Checking if logs need forced rotation
2024/12/01 14:33:26.944619 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:33:27.408797 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:33:27.917120 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:33:27.920182 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:33:28.362253 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:33:28.362280 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:33:28.362291 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:33:28.763531 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:33:28.763549 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:33:28.763642 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:33:28.763646 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:33:28.763657 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:33:28.763690 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:33:28.763693 [INFO] Try add execution permission
2024/12/01 14:33:28.763699 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:33:28.763711 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:33:28.769544 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:33:28.769555 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:33:28.775745 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:33:28.775758 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:33:28.775761 [INFO] stop X-Ray ...
2024/12/01 14:33:28.775768 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:33:28.786731 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:33:28.786744 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:33:28.801512 [INFO] Executing instruction: stop proxy
2024/12/01 14:33:28.801526 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:33:28.811900 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:33:28.811913 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:33:28.825676 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 14:33:28.825688 [INFO] Executing instruction: FlipApplication
2024/12/01 14:33:28.825691 [INFO] Fetching environment variables...
2024/12/01 14:33:28.825844 [INFO] Purge old process...
2024/12/01 14:33:28.825857 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:33:28.836918 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:33:28.846337 [INFO] web.service

2024/12/01 14:33:28.846347 [INFO] deregistering process: web
2024/12/01 14:33:28.846353 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:33:28.854902 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:33:28.861858 [INFO] Running command: systemctl disable web.service
2024/12/01 14:33:29.142108 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:33:29.142168 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:33:29.600826 [INFO] Running command: systemctl reset-failed
2024/12/01 14:33:29.613128 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:33:29.623551 [INFO] Process web has not been fully terminated
2024/12/01 14:33:29.623562 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:33:30.623642 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:33:30.632234 [INFO] Process web has been fully terminated
2024/12/01 14:33:30.632247 [INFO] All processes have been fully terminated
2024/12/01 14:33:30.632251 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:33:30.768282 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:33:30.768309 [INFO] Register application processes...
2024/12/01 14:33:30.768313 [INFO] Registering the proc: web

2024/12/01 14:33:30.768322 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:33:30.818060 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:33:31.076895 [INFO] Running command: systemctl reset-failed
2024/12/01 14:33:31.084190 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:33:31.090889 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:33:31.378797 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:33:31.386655 [INFO] Running command: systemctl enable web.service
2024/12/01 14:33:31.643298 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:33:31.643317 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:33:31.655236 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:33:31.661814 [INFO] Running command: systemctl start web.service
2024/12/01 14:33:31.710329 [INFO] Executing instruction: start X-Ray
2024/12/01 14:33:31.710342 [INFO] X-Ray is not enabled.
2024/12/01 14:33:31.710346 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:33:31.710361 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:33:31.746349 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:33:31.746367 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:33:31.746373 [INFO] Executing cleanup logic
2024/12/01 14:33:31.748186 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733063605176,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733063611746,"severity":"ERROR"}]}]}

2024/12/01 14:33:31.748385 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:39:11.642477 [INFO] Starting...
2024/12/01 14:39:11.642514 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:39:11.642547 [INFO] reading event message file
2024/12/01 14:39:11.643524 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:39:11.726879 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:39:12.023814 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:39:12.315881 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:39:12.315893 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:39:12.315896 [INFO] Engine command: (app-deploy)

2024/12/01 14:39:12.315901 [INFO] Downloading EB Application...
2024/12/01 14:39:12.315903 [INFO] Region: us-east-1
2024/12/01 14:39:12.315906 [INFO] envID: e-phgumpyagn
2024/12/01 14:39:12.315908 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:39:12.315911 [INFO] Using manifest file name from command request
2024/12/01 14:39:12.315917 [INFO] Manifest name is : manifest_1733063929840
2024/12/01 14:39:12.315919 [INFO] Download app version manifest
2024/12/01 14:39:12.316457 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733063929840
2024/12/01 14:39:12.362793 [INFO] Download successful104bytes downloaded
2024/12/01 14:39:12.362922 [INFO] Trying to read and parse version manifest...
2024/12/01 14:39:12.364862 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_093829226778
2024/12/01 14:39:13.209887 [INFO] Download successful88765157bytes downloaded
2024/12/01 14:39:13.210113 [INFO] Executing instruction: ElectLeader
2024/12/01 14:39:13.210120 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:39:13.210123 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:39:13.210148 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id f736f0bd-c718-4437-827e-2d1e2e0f0042 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:39:13.479048 [INFO] Instance is Leader.
2024/12/01 14:39:13.479084 [INFO] Executing instruction: stopSqsd
2024/12/01 14:39:13.479089 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:39:13.479092 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:39:13.479096 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:39:13.479106 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:39:17.899149 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:39:17.899194 [INFO] Executing instruction: StageApplication
2024/12/01 14:39:17.899199 [INFO] Recreating /var/app/staging/
2024/12/01 14:39:17.900387 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:39:17.900406 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:39:20.035136 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:39:20.156289 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:39:20.156367 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:39:20.157733 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:39:20.157741 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:39:20.157784 [INFO] Executing instruction: InstallDependency
2024/12/01 14:39:20.158916 [INFO] checking dependencies file
2024/12/01 14:39:20.158949 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:39:20.158967 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:39:24.338546 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:39:24.338592 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:39:24.338598 [INFO] Executing instruction: check Procfile
2024/12/01 14:39:24.338644 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:39:24.338652 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:39:24.338660 [INFO] X-Ray is not enabled.
2024/12/01 14:39:24.338663 [INFO] Executing instruction: configure proxy server
2024/12/01 14:39:24.338687 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:39:24.352132 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:39:24.369658 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:39:24.376370 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:39:24.434968 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:39:24.434987 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:39:24.442666 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:39:24.448931 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:39:24.457076 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:39:24.544979 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:39:24.891491 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:39:24.892390 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:39:25.157626 [INFO] Running command: systemctl reset-failed
2024/12/01 14:39:25.169320 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:39:25.427912 [INFO] Running command: systemctl reset-failed
2024/12/01 14:39:25.437717 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:39:25.444959 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:39:25.694353 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:39:25.703001 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:39:25.960658 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:39:25.960677 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:39:25.971377 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:39:25.977856 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:39:26.030984 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:39:26.032369 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:39:26.033838 [INFO] Executing instruction: configure log streaming
2024/12/01 14:39:26.033846 [INFO] log streaming is not enabled
2024/12/01 14:39:26.033849 [INFO] disable log stream
2024/12/01 14:39:26.033856 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:39:26.046867 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:39:26.061450 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:39:26.061459 [INFO] Checking if logs need forced rotation
2024/12/01 14:39:26.061470 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:39:26.787342 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:39:27.288028 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:39:27.293743 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:39:27.612154 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:39:27.612175 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:39:27.612185 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:39:51.691741 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:39:51.692580 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:39:51.701803 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:39:51.701814 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:39:51.702739 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:39:51.708494 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:39:51.708503 [INFO] Try add execution permission
2024/12/01 14:39:51.708511 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:39:51.709621 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:39:51.759336 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:39:51.759353 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:39:51.767867 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:39:51.767909 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:39:51.767914 [INFO] stop X-Ray ...
2024/12/01 14:39:51.768731 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:39:51.968228 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:39:51.968250 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:39:51.980904 [INFO] Executing instruction: stop proxy
2024/12/01 14:39:51.980926 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:39:51.998159 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:39:51.998179 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:39:52.013860 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 14:39:52.013980 [INFO] Executing instruction: FlipApplication
2024/12/01 14:39:52.013986 [INFO] Fetching environment variables...
2024/12/01 14:39:52.017599 [INFO] Purge old process...
2024/12/01 14:39:52.019144 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:39:52.030455 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:39:52.041320 [INFO] web.service

2024/12/01 14:39:52.041331 [INFO] deregistering process: web
2024/12/01 14:39:52.041338 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:39:52.058312 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:39:52.069175 [INFO] Running command: systemctl disable web.service
2024/12/01 14:39:52.696337 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:39:52.696403 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:39:53.172736 [INFO] Running command: systemctl reset-failed
2024/12/01 14:39:53.193215 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:39:53.203725 [INFO] Process web has not been fully terminated
2024/12/01 14:39:53.203737 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:39:54.203835 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:39:54.211409 [INFO] Process web has been fully terminated
2024/12/01 14:39:54.211419 [INFO] All processes have been fully terminated
2024/12/01 14:39:54.211423 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:39:54.734534 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:39:54.734565 [INFO] Register application processes...
2024/12/01 14:39:54.734569 [INFO] Registering the proc: web

2024/12/01 14:39:54.734578 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:39:54.786611 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:39:55.053336 [INFO] Running command: systemctl reset-failed
2024/12/01 14:39:55.062014 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:39:55.069285 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:39:55.325304 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:39:55.336452 [INFO] Running command: systemctl enable web.service
2024/12/01 14:39:55.599587 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:39:55.599607 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:39:55.611649 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:39:55.618574 [INFO] Running command: systemctl start web.service
2024/12/01 14:39:55.657410 [INFO] Executing instruction: start X-Ray
2024/12/01 14:39:55.657422 [INFO] X-Ray is not enabled.
2024/12/01 14:39:55.657426 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:39:55.658162 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:39:55.706797 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:39:55.706813 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:39:55.706818 [INFO] Executing cleanup logic
2024/12/01 14:39:55.711554 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733063964338,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733063995706,"severity":"ERROR"}]}]}

2024/12/01 14:39:55.711795 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:46:56.817188 [INFO] Starting...
2024/12/01 14:46:56.817228 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:46:56.817271 [INFO] reading event message file
2024/12/01 14:46:56.822053 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:46:57.055057 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:46:57.777238 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:46:58.069100 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:46:58.069114 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:46:58.069117 [INFO] Engine command: (app-deploy)

2024/12/01 14:46:58.069121 [INFO] Downloading EB Application...
2024/12/01 14:46:58.069124 [INFO] Region: us-east-1
2024/12/01 14:46:58.069127 [INFO] envID: e-phgumpyagn
2024/12/01 14:46:58.069129 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:46:58.069132 [INFO] Using manifest file name from command request
2024/12/01 14:46:58.069140 [INFO] Manifest name is : manifest_1733064395132
2024/12/01 14:46:58.069142 [INFO] Download app version manifest
2024/12/01 14:46:58.069304 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733064395132
2024/12/01 14:46:58.103915 [INFO] Download successful104bytes downloaded
2024/12/01 14:46:58.104028 [INFO] Trying to read and parse version manifest...
2024/12/01 14:46:58.104603 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_094614072353
2024/12/01 14:46:59.262997 [INFO] Download successful88765194bytes downloaded
2024/12/01 14:46:59.264665 [INFO] Executing instruction: ElectLeader
2024/12/01 14:46:59.264672 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:46:59.264675 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:46:59.264686 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 51ba154f-7900-4b1a-a3f9-bd194078f459 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:46:59.497921 [INFO] Instance is Leader.
2024/12/01 14:46:59.497970 [INFO] Executing instruction: stopSqsd
2024/12/01 14:46:59.497975 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:46:59.497978 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:46:59.497981 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:46:59.497999 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:47:01.664840 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:47:01.664888 [INFO] Executing instruction: StageApplication
2024/12/01 14:47:01.664892 [INFO] Recreating /var/app/staging/
2024/12/01 14:47:01.664979 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:47:01.665450 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:47:03.631149 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:47:03.692550 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:47:03.692633 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:47:03.692651 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:47:03.692654 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:47:03.692659 [INFO] Executing instruction: InstallDependency
2024/12/01 14:47:03.692664 [INFO] checking dependencies file
2024/12/01 14:47:03.692676 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:47:03.692688 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:47:07.825057 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:47:07.825085 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:47:07.825091 [INFO] Executing instruction: check Procfile
2024/12/01 14:47:07.825135 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:47:07.825143 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:47:07.825148 [INFO] X-Ray is not enabled.
2024/12/01 14:47:07.825151 [INFO] Executing instruction: configure proxy server
2024/12/01 14:47:07.825167 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:47:07.837534 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:47:07.852230 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:47:07.854407 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:47:07.877228 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:47:07.877243 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:47:07.886365 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:47:07.893116 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:47:07.901261 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:47:07.964985 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:47:08.237637 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:47:08.237707 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:47:08.503256 [INFO] Running command: systemctl reset-failed
2024/12/01 14:47:08.515111 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:47:08.773744 [INFO] Running command: systemctl reset-failed
2024/12/01 14:47:08.783630 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:47:08.790372 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:47:09.051956 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:47:09.061481 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:47:09.317906 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:47:09.317926 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:47:09.327944 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:47:09.334303 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:47:09.377568 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:47:09.378723 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:47:09.379395 [INFO] Executing instruction: configure log streaming
2024/12/01 14:47:09.379402 [INFO] log streaming is not enabled
2024/12/01 14:47:09.379405 [INFO] disable log stream
2024/12/01 14:47:09.379413 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:47:09.392473 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:47:09.410322 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:47:09.410334 [INFO] Checking if logs need forced rotation
2024/12/01 14:47:09.410346 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:47:09.836519 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:47:10.289706 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:47:10.295910 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:47:10.866704 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:47:10.866727 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:47:10.866738 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:47:12.597493 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 14:47:12.597512 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 14:47:12.597597 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 14:47:12.597602 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 14:47:12.597614 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 14:47:12.597656 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 14:47:12.597661 [INFO] Try add execution permission
2024/12/01 14:47:12.597666 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 14:47:12.597679 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:47:12.603202 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 14:47:12.603215 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 14:47:12.609205 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 14:47:12.609215 [INFO] Executing instruction: stop X-Ray
2024/12/01 14:47:12.609220 [INFO] stop X-Ray ...
2024/12/01 14:47:12.609227 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 14:47:12.620908 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 14:47:12.620919 [INFO] Running command: systemctl stop xray.service
2024/12/01 14:47:12.635747 [INFO] Executing instruction: stop proxy
2024/12/01 14:47:12.635762 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 14:47:12.648040 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 14:47:12.648054 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 14:47:12.660136 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 14:47:12.660148 [INFO] Executing instruction: FlipApplication
2024/12/01 14:47:12.660152 [INFO] Fetching environment variables...
2024/12/01 14:47:12.660313 [INFO] Purge old process...
2024/12/01 14:47:12.660324 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 14:47:12.669553 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 14:47:12.679119 [INFO] web.service

2024/12/01 14:47:12.679131 [INFO] deregistering process: web
2024/12/01 14:47:12.679136 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:47:12.688530 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:47:12.695025 [INFO] Running command: systemctl disable web.service
2024/12/01 14:47:12.961701 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 14:47:12.961793 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:47:13.250165 [INFO] Running command: systemctl reset-failed
2024/12/01 14:47:13.263316 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:47:13.284110 [INFO] Process web has not been fully terminated
2024/12/01 14:47:13.284125 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 14:47:14.284195 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:47:14.291336 [INFO] Process web has been fully terminated
2024/12/01 14:47:14.291345 [INFO] All processes have been fully terminated
2024/12/01 14:47:14.291348 [INFO] Removing /var/app/current/ if it exists
2024/12/01 14:47:14.753350 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 14:47:14.753378 [INFO] Register application processes...
2024/12/01 14:47:14.753384 [INFO] Registering the proc: web

2024/12/01 14:47:14.753393 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:47:14.788789 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:47:15.047165 [INFO] Running command: systemctl reset-failed
2024/12/01 14:47:15.054341 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 14:47:15.061507 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 14:47:15.317075 [INFO] Running command: systemctl start eb-app.target
2024/12/01 14:47:15.326640 [INFO] Running command: systemctl enable web.service
2024/12/01 14:47:15.593030 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 14:47:15.593050 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 14:47:15.608106 [INFO] Running command: systemctl is-active web.service
2024/12/01 14:47:15.614706 [INFO] Running command: systemctl start web.service
2024/12/01 14:47:15.667385 [INFO] Executing instruction: start X-Ray
2024/12/01 14:47:15.667398 [INFO] X-Ray is not enabled.
2024/12/01 14:47:15.667407 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 14:47:15.667421 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 14:47:15.705117 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 14:47:15.705135 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 14:47:15.705138 [INFO] Executing cleanup logic
2024/12/01 14:47:15.705241 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733064427825,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733064435705,"severity":"ERROR"}]}]}

2024/12/01 14:47:15.705435 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:53:46.449724 [INFO] Starting...
2024/12/01 14:53:46.449764 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:53:46.449787 [INFO] reading event message file
2024/12/01 14:53:46.451553 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:53:46.673265 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:53:46.975037 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:53:47.278216 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:53:47.278230 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:53:47.278233 [INFO] Engine command: (app-deploy)

2024/12/01 14:53:47.278238 [INFO] Downloading EB Application...
2024/12/01 14:53:47.278241 [INFO] Region: us-east-1
2024/12/01 14:53:47.278243 [INFO] envID: e-phgumpyagn
2024/12/01 14:53:47.278246 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:53:47.278248 [INFO] Using manifest file name from command request
2024/12/01 14:53:47.278256 [INFO] Manifest name is : manifest_1733064803907
2024/12/01 14:53:47.278258 [INFO] Download app version manifest
2024/12/01 14:53:47.278375 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733064803907
2024/12/01 14:53:47.326484 [INFO] Download successful104bytes downloaded
2024/12/01 14:53:47.326639 [INFO] Trying to read and parse version manifest...
2024/12/01 14:53:47.329388 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_095303257114
2024/12/01 14:53:48.803028 [INFO] Download successful88765908bytes downloaded
2024/12/01 14:53:48.805097 [INFO] Executing instruction: ElectLeader
2024/12/01 14:53:48.805104 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:53:48.805107 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:53:48.805118 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 896c353a-46a0-4324-8ba7-70a54d2efa87 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:53:49.110424 [INFO] Instance is Leader.
2024/12/01 14:53:49.110472 [INFO] Executing instruction: stopSqsd
2024/12/01 14:53:49.110477 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:53:49.110488 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:53:49.110491 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:53:49.110503 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:54:14.911293 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:54:14.912953 [INFO] Executing instruction: StageApplication
2024/12/01 14:54:14.912959 [INFO] Recreating /var/app/staging/
2024/12/01 14:54:14.919365 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:54:14.920294 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:54:18.508405 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:54:18.659913 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:54:18.660644 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:54:18.661621 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:54:18.661627 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:54:18.661665 [INFO] Executing instruction: InstallDependency
2024/12/01 14:54:18.661671 [INFO] checking dependencies file
2024/12/01 14:54:18.661686 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:54:18.661714 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:54:25.462165 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:54:25.462193 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:54:25.462199 [INFO] Executing instruction: check Procfile
2024/12/01 14:54:25.462233 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:54:25.463410 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:54:25.463426 [INFO] X-Ray is not enabled.
2024/12/01 14:54:25.463429 [INFO] Executing instruction: configure proxy server
2024/12/01 14:54:25.463452 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:54:25.481762 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:54:25.495484 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:54:25.502780 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:54:25.544106 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:54:25.544126 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:54:25.557632 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:54:25.567486 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:54:25.584448 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:54:25.675338 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:54:26.263209 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:54:26.263270 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:54:26.688523 [INFO] Running command: systemctl reset-failed
2024/12/01 14:54:26.703700 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:54:27.142141 [INFO] Running command: systemctl reset-failed
2024/12/01 14:54:27.150559 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:54:27.165018 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:54:27.597027 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:54:27.609235 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:54:28.031422 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:54:28.031443 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:54:28.046500 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:54:28.056607 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:54:28.119898 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:54:28.120713 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:54:28.121389 [INFO] Executing instruction: configure log streaming
2024/12/01 14:54:28.121396 [INFO] log streaming is not enabled
2024/12/01 14:54:28.121399 [INFO] disable log stream
2024/12/01 14:54:28.121407 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:54:28.141446 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:54:28.164165 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:54:28.164177 [INFO] Checking if logs need forced rotation
2024/12/01 14:54:28.164188 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:54:29.121054 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:54:29.793092 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:54:29.796652 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:54:29.894425 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:54:29.894448 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:54:29.894458 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:55:13.536807 [INFO] Error occurred during build: Command 04_install_requirements failed

2024/12/01 14:55:13.539482 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/12/01 14:55:13.539490 [INFO] Executing cleanup logic
2024/12/01 14:55:13.547293 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733064865463,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733064913539,"severity":"ERROR"}]}]}

2024/12/01 14:55:13.548362 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 14:56:57.161505 [INFO] Starting...
2024/12/01 14:56:57.161548 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 14:56:57.161588 [INFO] reading event message file
2024/12/01 14:56:57.166132 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 14:56:57.376877 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:56:57.897085 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:56:58.202825 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 14:56:58.202839 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 14:56:58.202842 [INFO] Engine command: (app-deploy)

2024/12/01 14:56:58.202847 [INFO] Downloading EB Application...
2024/12/01 14:56:58.202850 [INFO] Region: us-east-1
2024/12/01 14:56:58.202852 [INFO] envID: e-phgumpyagn
2024/12/01 14:56:58.202855 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 14:56:58.202857 [INFO] Using manifest file name from command request
2024/12/01 14:56:58.202868 [INFO] Manifest name is : manifest_1733064995270
2024/12/01 14:56:58.202870 [INFO] Download app version manifest
2024/12/01 14:56:58.204351 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733064995270
2024/12/01 14:56:58.243270 [INFO] Download successful104bytes downloaded
2024/12/01 14:56:58.243386 [INFO] Trying to read and parse version manifest...
2024/12/01 14:56:58.243754 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_095614416328
2024/12/01 14:56:59.177561 [INFO] Download successful88766010bytes downloaded
2024/12/01 14:56:59.179153 [INFO] Executing instruction: ElectLeader
2024/12/01 14:56:59.179160 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 14:56:59.179163 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 14:56:59.179174 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 31010e13-93b2-46a5-9f43-9310b94cb746 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 14:56:59.444083 [INFO] Instance is Leader.
2024/12/01 14:56:59.444131 [INFO] Executing instruction: stopSqsd
2024/12/01 14:56:59.444136 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 14:56:59.444139 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 14:56:59.444142 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 14:56:59.444152 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 14:57:11.042429 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 14:57:11.045041 [INFO] Executing instruction: StageApplication
2024/12/01 14:57:11.045048 [INFO] Recreating /var/app/staging/
2024/12/01 14:57:11.534820 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 14:57:11.534845 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 14:57:13.983123 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 14:57:14.056409 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 14:57:14.057770 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 14:57:14.057793 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 14:57:14.057796 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 14:57:14.057802 [INFO] Executing instruction: InstallDependency
2024/12/01 14:57:14.058554 [INFO] checking dependencies file
2024/12/01 14:57:14.058571 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 14:57:14.058584 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 14:57:18.370849 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: PyMuPDF==1.23.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (1.23.8)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 17)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyMuPDFb==1.23.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from PyMuPDF==1.23.8->-r requirements.txt (line 14)) (1.23.7)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 16)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 16)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 16)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 16)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 16)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 16)) (1.0.0)

2024/12/01 14:57:18.370875 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 14:57:18.370882 [INFO] Executing instruction: check Procfile
2024/12/01 14:57:18.370936 [INFO] detected Procfile in application source bundle ...
2024/12/01 14:57:18.370944 [INFO] Executing instruction: configure X-Ray
2024/12/01 14:57:18.370949 [INFO] X-Ray is not enabled.
2024/12/01 14:57:18.370952 [INFO] Executing instruction: configure proxy server
2024/12/01 14:57:18.370966 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 14:57:18.428101 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 14:57:18.450366 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 14:57:18.455002 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:57:18.485195 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 14:57:18.485217 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:57:18.493163 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:57:18.499512 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:57:18.506823 [INFO] Running command: systemctl stop healthd.service
2024/12/01 14:57:18.614350 [INFO] Running command: systemctl disable healthd.service
2024/12/01 14:57:19.098422 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 14:57:19.099541 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:57:19.358523 [INFO] Running command: systemctl reset-failed
2024/12/01 14:57:19.370742 [INFO] Running command: systemctl daemon-reload
2024/12/01 14:57:19.622169 [INFO] Running command: systemctl reset-failed
2024/12/01 14:57:19.629900 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 14:57:19.636579 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 14:57:19.903555 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 14:57:19.912042 [INFO] Running command: systemctl enable healthd.service
2024/12/01 14:57:20.167686 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 14:57:20.167705 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 14:57:20.186224 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 14:57:20.193026 [INFO] Running command: systemctl start healthd.service
2024/12/01 14:57:20.243557 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 14:57:20.244981 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 14:57:20.246633 [INFO] Executing instruction: configure log streaming
2024/12/01 14:57:20.246642 [INFO] log streaming is not enabled
2024/12/01 14:57:20.246645 [INFO] disable log stream
2024/12/01 14:57:20.246653 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 14:57:20.262054 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 14:57:20.276574 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 14:57:20.276586 [INFO] Checking if logs need forced rotation
2024/12/01 14:57:20.276599 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 14:57:20.898883 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 14:57:21.410429 [INFO] Generating rsyslog config from Procfile
2024/12/01 14:57:21.415182 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 14:57:21.864133 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 14:57:21.864155 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 14:57:21.864165 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 14:57:48.153055 [INFO] Error occurred during build: Command 02_install_requirements failed

2024/12/01 14:57:48.155754 [ERROR] An error occurred during execution of command [app-deploy] - [PostBuildEbExtension]. Stop running the command. Error: container commands build failed. Please refer to /var/log/cfn-init.log for more details. 

2024/12/01 14:57:48.155762 [INFO] Executing cleanup logic
2024/12/01 14:57:48.174530 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733065038370,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733065068156,"severity":"ERROR"}]}]}

2024/12/01 14:57:48.176671 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 15:57:10.347920 [INFO] Starting...
2024/12/01 15:57:10.347962 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 15:57:10.348001 [INFO] reading event message file
2024/12/01 15:57:10.348999 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 15:57:10.588043 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 15:57:10.916403 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 15:57:11.218352 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 15:57:11.218366 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 15:57:11.218369 [INFO] Engine command: (app-deploy)

2024/12/01 15:57:11.218374 [INFO] Downloading EB Application...
2024/12/01 15:57:11.218376 [INFO] Region: us-east-1
2024/12/01 15:57:11.218383 [INFO] envID: e-phgumpyagn
2024/12/01 15:57:11.218386 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 15:57:11.218390 [INFO] Using manifest file name from command request
2024/12/01 15:57:11.218398 [INFO] Manifest name is : manifest_1733068609035
2024/12/01 15:57:11.218401 [INFO] Download app version manifest
2024/12/01 15:57:11.220869 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733068609035
2024/12/01 15:57:11.263209 [INFO] Download successful104bytes downloaded
2024/12/01 15:57:11.263335 [INFO] Trying to read and parse version manifest...
2024/12/01 15:57:11.264277 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_105627236673
2024/12/01 15:57:13.081338 [INFO] Download successful88765357bytes downloaded
2024/12/01 15:57:13.083984 [INFO] Executing instruction: ElectLeader
2024/12/01 15:57:13.083993 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 15:57:13.083997 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 15:57:13.084016 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 9791d4ea-5924-49e2-a343-477b975384f3 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 15:57:13.370038 [INFO] Instance is Leader.
2024/12/01 15:57:13.370086 [INFO] Executing instruction: stopSqsd
2024/12/01 15:57:13.370091 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 15:57:13.370094 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 15:57:13.370097 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 15:57:13.370109 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 15:57:17.540351 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 15:57:17.540379 [INFO] Executing instruction: StageApplication
2024/12/01 15:57:17.540382 [INFO] Recreating /var/app/staging/
2024/12/01 15:57:18.000385 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 15:57:18.000407 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 15:57:20.018488 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 15:57:20.085297 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 15:57:20.085375 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 15:57:20.085392 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 15:57:20.085394 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 15:57:20.085399 [INFO] Executing instruction: InstallDependency
2024/12/01 15:57:20.085406 [INFO] checking dependencies file
2024/12/01 15:57:20.085417 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 15:57:20.085430 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 15:57:24.373659 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 15)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 15)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 15)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (1.0.0)

2024/12/01 15:57:24.373702 [INFO] 
[notice] A new release of pip available: 22.3.1 -> 24.3.1
[notice] To update, run: python3.11 -m pip install --upgrade pip

2024/12/01 15:57:24.373708 [INFO] Executing instruction: check Procfile
2024/12/01 15:57:24.373751 [INFO] detected Procfile in application source bundle ...
2024/12/01 15:57:24.373759 [INFO] Executing instruction: configure X-Ray
2024/12/01 15:57:24.373763 [INFO] X-Ray is not enabled.
2024/12/01 15:57:24.373766 [INFO] Executing instruction: configure proxy server
2024/12/01 15:57:24.373781 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 15:57:24.383396 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 15:57:24.394998 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 15:57:24.398645 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:57:24.443786 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 15:57:24.443810 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:57:24.452331 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 15:57:24.458444 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:57:24.467065 [INFO] Running command: systemctl stop healthd.service
2024/12/01 15:57:24.535397 [INFO] Running command: systemctl disable healthd.service
2024/12/01 15:57:25.037973 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 15:57:25.038897 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:57:25.299689 [INFO] Running command: systemctl reset-failed
2024/12/01 15:57:25.311998 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:57:25.571723 [INFO] Running command: systemctl reset-failed
2024/12/01 15:57:25.581534 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 15:57:25.589130 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 15:57:25.850980 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 15:57:25.860140 [INFO] Running command: systemctl enable healthd.service
2024/12/01 15:57:26.121264 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 15:57:26.121284 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:57:26.131176 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 15:57:26.137733 [INFO] Running command: systemctl start healthd.service
2024/12/01 15:57:26.194475 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 15:57:26.195162 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 15:57:26.195904 [INFO] Executing instruction: configure log streaming
2024/12/01 15:57:26.195912 [INFO] log streaming is not enabled
2024/12/01 15:57:26.195915 [INFO] disable log stream
2024/12/01 15:57:26.195923 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 15:57:26.208663 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 15:57:26.223767 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 15:57:26.223778 [INFO] Checking if logs need forced rotation
2024/12/01 15:57:26.223788 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 15:57:26.686297 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 15:57:27.203910 [INFO] Generating rsyslog config from Procfile
2024/12/01 15:57:27.207475 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 15:57:27.612955 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 15:57:27.612978 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 15:57:27.612988 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 15:57:33.899456 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 15:57:33.899477 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 15:57:33.899571 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 15:57:33.899574 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 15:57:33.899587 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 15:57:33.903419 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 15:57:33.903433 [INFO] Try add execution permission
2024/12/01 15:57:33.903442 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 15:57:33.903458 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 15:57:33.931899 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 15:57:33.931914 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 15:57:33.939110 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 15:57:33.939132 [INFO] Executing instruction: stop X-Ray
2024/12/01 15:57:33.939136 [INFO] stop X-Ray ...
2024/12/01 15:57:33.939143 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 15:57:33.950830 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 15:57:33.950843 [INFO] Running command: systemctl stop xray.service
2024/12/01 15:57:33.964171 [INFO] Executing instruction: stop proxy
2024/12/01 15:57:33.964185 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 15:57:33.976115 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 15:57:33.976128 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 15:57:33.988182 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 15:57:33.988193 [INFO] Executing instruction: FlipApplication
2024/12/01 15:57:33.988197 [INFO] Fetching environment variables...
2024/12/01 15:57:33.988366 [INFO] Purge old process...
2024/12/01 15:57:33.988378 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 15:57:33.998870 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 15:57:34.009387 [INFO] web.service

2024/12/01 15:57:34.009402 [INFO] deregistering process: web
2024/12/01 15:57:34.009408 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:57:34.023278 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:57:34.033098 [INFO] Running command: systemctl disable web.service
2024/12/01 15:57:34.514595 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 15:57:34.514658 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:57:34.989806 [INFO] Running command: systemctl reset-failed
2024/12/01 15:57:35.003947 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:57:35.013355 [INFO] Process web has not been fully terminated
2024/12/01 15:57:35.013370 [INFO] Some processes have not been fully terminated, sleeping 1 seconds now
2024/12/01 15:57:36.013441 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:57:36.020726 [INFO] Process web has been fully terminated
2024/12/01 15:57:36.020737 [INFO] All processes have been fully terminated
2024/12/01 15:57:36.020740 [INFO] Removing /var/app/current/ if it exists
2024/12/01 15:57:36.524625 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 15:57:36.524651 [INFO] Register application processes...
2024/12/01 15:57:36.524676 [INFO] Registering the proc: web

2024/12/01 15:57:36.524686 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:57:36.575959 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:57:36.841311 [INFO] Running command: systemctl reset-failed
2024/12/01 15:57:36.849090 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 15:57:36.856192 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 15:57:37.116694 [INFO] Running command: systemctl start eb-app.target
2024/12/01 15:57:37.127663 [INFO] Running command: systemctl enable web.service
2024/12/01 15:57:37.443352 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 15:57:37.443373 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:57:37.458053 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:57:37.467033 [INFO] Running command: systemctl start web.service
2024/12/01 15:57:37.521534 [INFO] Executing instruction: start X-Ray
2024/12/01 15:57:37.521548 [INFO] X-Ray is not enabled.
2024/12/01 15:57:37.521551 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 15:57:37.521571 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 15:57:37.564971 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 15:57:37.564988 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 15:57:37.564992 [INFO] Executing cleanup logic
2024/12/01 15:57:37.565094 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733068644373,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733068657565,"severity":"ERROR"}]}]}

2024/12/01 15:57:37.565306 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 15:59:17.692265 [INFO] Starting...
2024/12/01 15:59:17.692304 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 15:59:17.692343 [INFO] reading event message file
2024/12/01 15:59:17.694392 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 15:59:17.918183 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 15:59:18.229973 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 15:59:18.533016 [INFO] checking whether command app-deploy is applicable to this instance...
2024/12/01 15:59:18.533030 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 15:59:18.533033 [INFO] Engine command: (app-deploy)

2024/12/01 15:59:18.533038 [INFO] Downloading EB Application...
2024/12/01 15:59:18.533041 [INFO] Region: us-east-1
2024/12/01 15:59:18.533043 [INFO] envID: e-phgumpyagn
2024/12/01 15:59:18.533046 [INFO] envBucket: elasticbeanstalk-us-east-1-677045937080
2024/12/01 15:59:18.533048 [INFO] Using manifest file name from command request
2024/12/01 15:59:18.533061 [INFO] Manifest name is : manifest_1733068735681
2024/12/01 15:59:18.533063 [INFO] Download app version manifest
2024/12/01 15:59:18.533183 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/versions/manifest_1733068735681
2024/12/01 15:59:18.570598 [INFO] Download successful104bytes downloaded
2024/12/01 15:59:18.570747 [INFO] Trying to read and parse version manifest...
2024/12/01 15:59:18.573441 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-677045937080, object: /resources/environments/e-phgumpyagn/_runtime/_versions/genas/app-b2ae-241201_105834920905
2024/12/01 15:59:19.800941 [INFO] Download successful88765499bytes downloaded
2024/12/01 15:59:19.803308 [INFO] Executing instruction: ElectLeader
2024/12/01 15:59:19.803317 [INFO] Running leader election for instance i-0a6923d06430c5604...
2024/12/01 15:59:19.803320 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/12/01 15:59:19.803331 [INFO] Running command: /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 2f5199c8-8ec9-46de-965c-81274f999ff0 --listener-id i-0a6923d06430c5604 --region us-east-1
2024/12/01 15:59:20.053424 [INFO] Instance is Leader.
2024/12/01 15:59:20.053473 [INFO] Executing instruction: stopSqsd
2024/12/01 15:59:20.053478 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/12/01 15:59:20.053481 [INFO] Executing instruction: PreBuildEbExtension
2024/12/01 15:59:20.053484 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/12/01 15:59:20.053496 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/12/01 15:59:21.685239 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/12/01 15:59:21.685273 [INFO] Executing instruction: StageApplication
2024/12/01 15:59:21.685276 [INFO] Recreating /var/app/staging/
2024/12/01 15:59:21.685811 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/12/01 15:59:21.685821 [INFO] Running command: /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/12/01 15:59:23.689049 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/12/01 15:59:23.753684 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/12/01 15:59:23.753704 [WARN] skipping hooks scripts under /opt/elasticbeanstalk/hooks/
2024/12/01 15:59:23.753719 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/12/01 15:59:23.753736 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/12/01 15:59:23.753739 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/12/01 15:59:23.753744 [INFO] Executing instruction: InstallDependency
2024/12/01 15:59:23.753748 [INFO] checking dependencies file
2024/12/01 15:59:23.753761 [INFO] Installing dependencies with requirements.txt by using Pip
2024/12/01 15:59:23.753770 [INFO] Running command: /var/app/venv/staging-LQM1lest/bin/pip install -r requirements.txt
2024/12/01 15:59:24.591211 [INFO] Requirement already satisfied: Flask==2.2.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 1)) (2.2.5)
Requirement already satisfied: flask-cors==4.0.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 2)) (4.0.0)
Requirement already satisfied: Werkzeug==2.2.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 3)) (2.2.3)
Requirement already satisfied: python-dotenv==0.19.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 4)) (0.19.0)
Requirement already satisfied: boto3==1.26.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 5)) (1.26.137)
Requirement already satisfied: anthropic==0.3.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 6)) (0.3.11)
Requirement already satisfied: tenacity==8.2.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 7)) (8.2.2)
Requirement already satisfied: PyPDF2==3.0.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 8)) (3.0.1)
Requirement already satisfied: python-docx==0.8.11 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 9)) (0.8.11)
Requirement already satisfied: Flask-Session==0.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 10)) (0.5.0)
Requirement already satisfied: gunicorn==21.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 11)) (21.2.0)
Requirement already satisfied: beautifulsoup4==4.12.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 12)) (4.12.2)
Requirement already satisfied: markdown==3.5.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 13)) (3.5.1)
Requirement already satisfied: chardet==5.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 14)) (5.2.0)
Requirement already satisfied: langchain==0.0.300 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 15)) (0.0.300)
Requirement already satisfied: python-multipart==0.0.6 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from -r requirements.txt (line 16)) (0.0.6)
Requirement already satisfied: Jinja2>=3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (3.1.4)
Requirement already satisfied: itsdangerous>=2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (2.2.0)
Requirement already satisfied: click>=8.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask==2.2.5->-r requirements.txt (line 1)) (8.1.7)
Requirement already satisfied: MarkupSafe>=2.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Werkzeug==2.2.3->-r requirements.txt (line 3)) (3.0.2)
Requirement already satisfied: botocore<1.30.0,>=1.29.137 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.29.165)
Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (1.0.1)
Requirement already satisfied: s3transfer<0.7.0,>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from boto3==1.26.137->-r requirements.txt (line 5)) (0.6.2)
Requirement already satisfied: anyio<4,>=3.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (3.7.1)
Requirement already satisfied: distro<2,>=1.7.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.28.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (2.10.2)
Requirement already satisfied: tokenizers>=0.13.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (0.21.0)
Requirement already satisfied: typing-extensions<5,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anthropic==0.3.11->-r requirements.txt (line 6)) (4.12.2)
Requirement already satisfied: lxml>=2.3.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-docx==0.8.11->-r requirements.txt (line 9)) (5.3.0)
Requirement already satisfied: cachelib in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from Flask-Session==0.5.0->-r requirements.txt (line 10)) (0.13.0)
Requirement already satisfied: packaging in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from gunicorn==21.2.0->-r requirements.txt (line 11)) (24.2)
Requirement already satisfied: soupsieve>1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from beautifulsoup4==4.12.2->-r requirements.txt (line 12)) (2.6)
Requirement already satisfied: PyYAML>=5.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (6.0.2)
Requirement already satisfied: SQLAlchemy<3,>=1.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.0.36)
Requirement already satisfied: aiohttp<4.0.0,>=3.8.3 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (3.11.8)
Requirement already satisfied: dataclasses-json<0.7,>=0.5.7 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (0.6.7)
Requirement already satisfied: jsonpatch<2.0,>=1.33 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (1.33)
Requirement already satisfied: langsmith<0.1.0,>=0.0.38 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (0.0.92)
Requirement already satisfied: numexpr<3.0.0,>=2.8.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.10.2)
Requirement already satisfied: numpy<2,>=1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (1.26.4)
Requirement already satisfied: requests<3,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from langchain==0.0.300->-r requirements.txt (line 15)) (2.32.3)
Requirement already satisfied: aiohappyeyeballs>=2.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (2.4.3)
Requirement already satisfied: aiosignal>=1.1.2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.3.1)
Requirement already satisfied: attrs>=17.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (24.2.0)
Requirement already satisfied: frozenlist>=1.1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.5.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (6.1.0)
Requirement already satisfied: propcache>=0.2.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (0.2.0)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from aiohttp<4.0.0,>=3.8.3->langchain==0.0.300->-r requirements.txt (line 15)) (1.18.0)
Requirement already satisfied: idna>=2.8 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.10)
Requirement already satisfied: sniffio>=1.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from anyio<4,>=3.5.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.3.1)
Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (2.9.0.post0)
Requirement already satisfied: urllib3<1.27,>=1.25.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.26.20)
Requirement already satisfied: marshmallow<4.0.0,>=3.18.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (3.23.1)
Requirement already satisfied: typing-inspect<1,>=0.4.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (0.9.0)
Requirement already satisfied: certifi in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.8.30)
Requirement already satisfied: httpcore==1.* in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (1.0.7)
Requirement already satisfied: h11<0.15,>=0.13 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.14.0)
Requirement already satisfied: jsonpointer>=1.9 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from jsonpatch<2.0,>=1.33->langchain==0.0.300->-r requirements.txt (line 15)) (3.0.0)
Requirement already satisfied: annotated-types>=0.6.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.7.0)
Requirement already satisfied: pydantic-core==2.27.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from pydantic<3,>=1.9.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2.27.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from requests<3,>=2->langchain==0.0.300->-r requirements.txt (line 15)) (3.4.0)
Requirement already satisfied: greenlet!=0.4.17 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from SQLAlchemy<3,>=1.4->langchain==0.0.300->-r requirements.txt (line 15)) (3.1.1)
Requirement already satisfied: huggingface-hub<1.0,>=0.16.4 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (0.26.3)
Requirement already satisfied: filelock in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (3.16.1)
Requirement already satisfied: fsspec>=2023.5.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (2024.10.0)
Requirement already satisfied: tqdm>=4.42.1 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from huggingface-hub<1.0,>=0.16.4->tokenizers>=0.13.0->anthropic==0.3.11->-r requirements.txt (line 6)) (4.67.1)
Requirement already satisfied: six>=1.5 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.30.0,>=1.29.137->boto3==1.26.137->-r requirements.txt (line 5)) (1.16.0)
Requirement already satisfied: mypy-extensions>=0.3.0 in /var/app/venv/staging-LQM1lest/lib64/python3.11/site-packages (from typing-inspect<1,>=0.4.0->dataclasses-json<0.7,>=0.5.7->langchain==0.0.300->-r requirements.txt (line 15)) (1.0.0)

2024/12/01 15:59:24.591256 [INFO] Executing instruction: check Procfile
2024/12/01 15:59:24.591303 [INFO] detected Procfile in application source bundle ...
2024/12/01 15:59:24.591309 [INFO] Executing instruction: configure X-Ray
2024/12/01 15:59:24.591312 [INFO] X-Ray is not enabled.
2024/12/01 15:59:24.591316 [INFO] Executing instruction: configure proxy server
2024/12/01 15:59:24.591333 [INFO] Recreating /var/proxy/staging/nginx
2024/12/01 15:59:24.600841 [INFO] Running command: cp -rp /var/app/staging/.platform/nginx/. /var/proxy/staging/nginx
2024/12/01 15:59:24.612178 [INFO] Executing instruction: configure healthd specific proxy conf
2024/12/01 15:59:24.615323 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:59:24.639523 [WARN] Warning: process healthd is already registered...
Deregistering the process ...
2024/12/01 15:59:24.639548 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:59:24.647479 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 15:59:24.654199 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:59:24.662944 [INFO] Running command: systemctl stop healthd.service
2024/12/01 15:59:24.735316 [INFO] Running command: systemctl disable healthd.service
2024/12/01 15:59:25.027636 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/healthd.service".

2024/12/01 15:59:25.027784 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:59:25.293504 [INFO] Running command: systemctl reset-failed
2024/12/01 15:59:25.307364 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:59:25.578967 [INFO] Running command: systemctl reset-failed
2024/12/01 15:59:25.592973 [INFO] Running command: systemctl is-enabled aws-eb.target
2024/12/01 15:59:25.600299 [INFO] Running command: systemctl enable aws-eb.target
2024/12/01 15:59:25.861047 [INFO] Running command: systemctl start aws-eb.target
2024/12/01 15:59:25.868988 [INFO] Running command: systemctl enable healthd.service
2024/12/01 15:59:26.132131 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/12/01 15:59:26.132152 [INFO] Running command: systemctl show -p PartOf healthd.service
2024/12/01 15:59:26.141333 [INFO] Running command: systemctl is-active healthd.service
2024/12/01 15:59:26.148807 [INFO] Running command: systemctl start healthd.service
2024/12/01 15:59:26.205852 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/12/01 15:59:26.207649 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/12/01 15:59:26.209481 [INFO] Executing instruction: configure log streaming
2024/12/01 15:59:26.209491 [INFO] log streaming is not enabled
2024/12/01 15:59:26.209493 [INFO] disable log stream
2024/12/01 15:59:26.209502 [INFO] Running command: systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/12/01 15:59:26.221220 [INFO] Running command: systemctl stop amazon-cloudwatch-agent.service
2024/12/01 15:59:26.241798 [INFO] Executing instruction: GetToggleForceRotate
2024/12/01 15:59:26.241815 [INFO] Checking if logs need forced rotation
2024/12/01 15:59:26.241842 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 15:59:26.766397 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 15:59:27.284267 [INFO] Generating rsyslog config from Procfile
2024/12/01 15:59:27.287955 [INFO] Running command: systemctl restart rsyslog.service
2024/12/01 15:59:27.612729 [INFO] Executing instruction: PostBuildEbExtension
2024/12/01 15:59:27.612751 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/12/01 15:59:27.612765 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/12/01 15:59:29.927155 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/12/01 15:59:29.927177 [INFO] Executing instruction: CleanEbExtensions
2024/12/01 15:59:29.927275 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/12/01 15:59:29.927280 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/12/01 15:59:29.927292 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/12/01 15:59:29.927325 [INFO] Following scripts will be executed in order: [01_permissions.sh]
2024/12/01 15:59:29.927329 [INFO] Try add execution permission
2024/12/01 15:59:29.927335 [INFO] Adding execute mode to file, original mode is 438
2024/12/01 15:59:29.927350 [INFO] Running command: file -b /var/app/staging/.platform/hooks/predeploy/01_permissions.sh
2024/12/01 15:59:29.931927 [INFO] Bourne-Again shell script, ASCII text executable

2024/12/01 15:59:29.931938 [INFO] Running script: .platform/hooks/predeploy/01_permissions.sh
2024/12/01 15:59:29.937338 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/12/01 15:59:29.937353 [INFO] Executing instruction: stop X-Ray
2024/12/01 15:59:29.937356 [INFO] stop X-Ray ...
2024/12/01 15:59:29.937363 [INFO] Running command: systemctl show -p PartOf xray.service
2024/12/01 15:59:29.948088 [WARN] stopProcess Warning: process xray is not registered 
2024/12/01 15:59:29.948102 [INFO] Running command: systemctl stop xray.service
2024/12/01 15:59:29.961088 [INFO] Executing instruction: stop proxy
2024/12/01 15:59:29.961103 [INFO] Running command: systemctl show -p PartOf httpd.service
2024/12/01 15:59:29.971956 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2024/12/01 15:59:29.971971 [INFO] Running command: systemctl show -p PartOf nginx.service
2024/12/01 15:59:29.984362 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2024/12/01 15:59:29.984376 [INFO] Executing instruction: FlipApplication
2024/12/01 15:59:29.984380 [INFO] Fetching environment variables...
2024/12/01 15:59:29.984539 [INFO] Purge old process...
2024/12/01 15:59:29.984552 [INFO] Running command: systemctl stop eb-app.target
2024/12/01 15:59:30.004335 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/12/01 15:59:30.020543 [INFO] web.service

2024/12/01 15:59:30.020573 [INFO] deregistering process: web
2024/12/01 15:59:30.020582 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:59:30.030661 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:59:30.037240 [INFO] Running command: systemctl disable web.service
2024/12/01 15:59:30.327599 [INFO] Removed "/etc/systemd/system/multi-user.target.wants/web.service".

2024/12/01 15:59:30.327662 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:59:30.609091 [INFO] Running command: systemctl reset-failed
2024/12/01 15:59:30.637310 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:59:30.645197 [INFO] Process web has been fully terminated
2024/12/01 15:59:30.645210 [INFO] All processes have been fully terminated
2024/12/01 15:59:30.645214 [INFO] Removing /var/app/current/ if it exists
2024/12/01 15:59:30.784940 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/12/01 15:59:30.784984 [INFO] Register application processes...
2024/12/01 15:59:30.784988 [INFO] Registering the proc: web

2024/12/01 15:59:30.784999 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:59:30.835060 [INFO] Running command: systemctl daemon-reload
2024/12/01 15:59:31.102635 [INFO] Running command: systemctl reset-failed
2024/12/01 15:59:31.111879 [INFO] Running command: systemctl is-enabled eb-app.target
2024/12/01 15:59:31.119692 [INFO] Running command: systemctl enable eb-app.target
2024/12/01 15:59:31.385368 [INFO] Running command: systemctl start eb-app.target
2024/12/01 15:59:31.395813 [INFO] Running command: systemctl enable web.service
2024/12/01 15:59:31.661832 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2024/12/01 15:59:31.661854 [INFO] Running command: systemctl show -p PartOf web.service
2024/12/01 15:59:31.676390 [INFO] Running command: systemctl is-active web.service
2024/12/01 15:59:31.683458 [INFO] Running command: systemctl start web.service
2024/12/01 15:59:31.745225 [INFO] Executing instruction: start X-Ray
2024/12/01 15:59:31.745239 [INFO] X-Ray is not enabled.
2024/12/01 15:59:31.745242 [INFO] Executing instruction: start proxy with new configuration
2024/12/01 15:59:31.745257 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/12/01 15:59:31.786376 [INFO] nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed

2024/12/01 15:59:31.786396 [ERROR] An error occurred during execution of command [app-deploy] - [start proxy with new configuration]. Stop running the command. Error: copy proxy conf from staging failed with error validate nginx configuration failed with error Command /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf failed with error exit status 1. Stderr:nginx: [emerg] "location" directive is not allowed here in /var/proxy/staging/nginx/conf.d/static.conf:1
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test failed
 

2024/12/01 15:59:31.786399 [INFO] Executing cleanup logic
2024/12/01 15:59:31.786495 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1733068764591,"severity":"INFO"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1733068771786,"severity":"ERROR"}]}]}

2024/12/01 15:59:31.786863 [INFO] Platform Engine finished execution on command: app-deploy

2024/12/01 16:01:01.765054 [INFO] Starting...
2024/12/01 16:01:01.765093 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 16:01:01.765110 [INFO] reading event message file
2024/12/01 16:01:01.765984 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 16:01:01.963709 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 16:01:02.372529 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 16:01:02.718799 [INFO] checking whether command tail-log is applicable to this instance...
2024/12/01 16:01:02.718814 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 16:01:02.718817 [INFO] Engine command: (tail-log)

2024/12/01 16:01:02.720479 [INFO] Executing instruction: GetTailLogs
2024/12/01 16:01:02.720486 [INFO] Tail Logs...
2024/12/01 16:01:02.724841 [INFO] Running command: tail -n 100 /var/log/nginx/access.log
2024/12/01 16:01:02.729369 [INFO] Running command: tail -n 100 /var/log/nginx/error.log
2024/12/01 16:01:02.735783 [INFO] Running command: tail -n 100 /var/log/flask/application.log
2024/12/01 16:01:02.737908 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2024/12/01 16:01:02.741654 [INFO] Running command: tail -n 100 /var/log/eb-engine.log
2024/12/01 16:01:02.743672 [INFO] Running command: tail -n 100 /var/log/eb-hooks.log
2024/12/01 16:01:02.827548 [INFO] Executing cleanup logic
2024/12/01 16:01:02.827610 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1733068862827,"severity":"INFO"}]}]}

2024/12/01 16:01:02.827701 [INFO] Platform Engine finished execution on command: tail-log

2024/12/01 16:01:44.759014 [INFO] Starting...
2024/12/01 16:01:44.759047 [INFO] Starting EBPlatform-PlatformEngine
2024/12/01 16:01:44.759064 [INFO] reading event message file
2024/12/01 16:01:44.759182 [INFO] Engine received EB command cfn-hup-exec

2024/12/01 16:01:44.838537 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBAutoScalingGroup --region us-east-1
2024/12/01 16:01:45.144358 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:677045937080:stack/awseb-e-phgumpyagn-stack/b301ac30-ae51-11ef-a20a-0afffbbc4823 -r AWSEBBeanstalkMetadata --region us-east-1
2024/12/01 16:01:45.442135 [INFO] checking whether command bundle-log is applicable to this instance...
2024/12/01 16:01:45.442157 [INFO] this command is applicable to the instance, thus instance should execute command
2024/12/01 16:01:45.442160 [INFO] Engine command: (bundle-log)

2024/12/01 16:01:45.442197 [INFO] Executing instruction: GetBundleLogs
2024/12/01 16:01:45.442200 [INFO] Bundle Logs...
